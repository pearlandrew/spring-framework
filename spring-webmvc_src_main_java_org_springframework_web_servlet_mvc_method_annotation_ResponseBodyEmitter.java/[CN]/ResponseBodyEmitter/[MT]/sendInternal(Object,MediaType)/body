{
  if (object == null) {
    return;
  }
  if (this.handler == null) {
synchronized (this) {
      if (this.handler == null) {
        this.initHandlerCache.put(object,mediaType);
        return;
      }
    }
  }
  try {
    this.handler.send(object,mediaType);
  }
 catch (  IOException ex) {
    this.handler.completeWithError(ex);
    throw ex;
  }
catch (  Throwable ex) {
    this.handler.completeWithError(ex);
    throw new IllegalStateException("Failed to send " + object,ex);
  }
}
