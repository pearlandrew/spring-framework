{
  if (this.portletClass == null) {
    throw new IllegalArgumentException("portletClass is required");
  }
  if (!Portlet.class.isAssignableFrom(this.portletClass)) {
    throw new IllegalArgumentException("portletClass [" + this.portletClass.getName() + "] needs to implement interface [javax.portlet.Portlet]");
  }
  if (this.portletName == null) {
    this.portletName=this.beanName;
  }
  PortletConfig config=this.portletConfig;
  if (config == null || !this.useSharedPortletConfig) {
    config=new DelegatingPortletConfig();
  }
  this.portletInstance=(Portlet)this.portletClass.newInstance();
  this.portletInstance.init(config);
}
