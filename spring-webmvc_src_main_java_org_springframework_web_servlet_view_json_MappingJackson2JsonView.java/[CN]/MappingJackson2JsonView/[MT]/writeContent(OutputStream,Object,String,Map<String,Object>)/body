{
  @SuppressWarnings("deprecation") JsonGenerator generator=this.objectMapper.getJsonFactory().createJsonGenerator(stream,this.encoding);
  if (this.objectMapper.isEnabled(SerializationFeature.INDENT_OUTPUT)) {
    generator.useDefaultPrettyPrinter();
  }
  if (jsonPrefix != null) {
    generator.writeRaw(jsonPrefix);
  }
  Class<?> serializationView=(Class<?>)model.get(JsonView.class.getName());
  if (serializationView != null) {
    this.objectMapper.writerWithView(serializationView).writeValue(generator,value);
  }
 else {
    this.objectMapper.writeValue(generator,value);
  }
}
