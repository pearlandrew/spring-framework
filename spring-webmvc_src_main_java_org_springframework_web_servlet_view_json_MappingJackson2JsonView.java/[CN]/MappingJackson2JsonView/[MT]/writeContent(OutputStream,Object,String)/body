{
  @SuppressWarnings("deprecation") JsonGenerator generator=this.objectMapper.getJsonFactory().createJsonGenerator(stream,this.encoding);
  if (this.objectMapper.isEnabled(SerializationFeature.INDENT_OUTPUT)) {
    generator.useDefaultPrettyPrinter();
  }
  if (jsonPrefix != null) {
    generator.writeRaw(jsonPrefix);
  }
  Class<?> serializationView=null;
  String jsonpFunction=null;
  if (value instanceof MappingJacksonValue) {
    MappingJacksonValue container=(MappingJacksonValue)value;
    value=container.getValue();
    serializationView=container.getSerializationView();
    jsonpFunction=container.getJsonpFunction();
  }
  if (jsonpFunction != null) {
    generator.writeRaw(jsonpFunction + "(");
  }
  if (serializationView != null) {
    this.objectMapper.writerWithView(serializationView).writeValue(generator,value);
  }
 else {
    this.objectMapper.writeValue(generator,value);
  }
  if (jsonpFunction != null) {
    generator.writeRaw(");");
    generator.flush();
  }
}
