{
  request.setRequestURI("/test.html");
  ViewResolver viewResolverMock1=createMock("viewResolver1",ViewResolver.class);
  ViewResolver viewResolverMock2=createMock("viewResolver2",ViewResolver.class);
  viewResolver.setViewResolvers(Arrays.asList(viewResolverMock1,viewResolverMock2));
  View viewMock1=createMock("application_xml",View.class);
  View viewMock2=createMock("text_html",View.class);
  String viewName="view";
  Locale locale=Locale.ENGLISH;
  expect(viewResolverMock1.resolveViewName(viewName,locale)).andReturn(viewMock1);
  expect(viewResolverMock1.resolveViewName(viewName + ".html",locale)).andReturn(null);
  expect(viewResolverMock2.resolveViewName(viewName,locale)).andReturn(null);
  expect(viewResolverMock2.resolveViewName(viewName + ".html",locale)).andReturn(viewMock2);
  expect(viewMock1.getContentType()).andReturn("application/xml").anyTimes();
  expect(viewMock2.getContentType()).andReturn("text/html;charset=ISO-8859-1").anyTimes();
  replay(viewResolverMock1,viewResolverMock2,viewMock1,viewMock2);
  View result=viewResolver.resolveViewName(viewName,locale);
  assertSame("Invalid view",viewMock2,result);
  verify(viewResolverMock1,viewResolverMock2,viewMock1,viewMock2);
}
