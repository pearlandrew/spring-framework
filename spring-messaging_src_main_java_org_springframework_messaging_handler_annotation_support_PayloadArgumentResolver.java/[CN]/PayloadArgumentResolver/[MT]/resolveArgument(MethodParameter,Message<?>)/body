{
  Payload annot=param.getParameterAnnotation(Payload.class);
  if ((annot != null) && StringUtils.hasText(annot.value())) {
    throw new IllegalStateException("@Payload SpEL expressions not supported by this resolver.");
  }
  Object target=getTargetPayload(param,message);
  if (isEmptyPayload(target)) {
    if (annot == null || annot.required()) {
      String paramName=param.getParameterName();
      paramName=(paramName == null ? "Arg" + param.getParameterIndex() : paramName);
      BindingResult bindingResult=new BeanPropertyBindingResult(target,paramName);
      bindingResult.addError(new ObjectError(paramName,"@Payload param is required"));
      throw new MethodArgumentNotValidException(message,param,bindingResult);
    }
 else {
      return null;
    }
  }
  if (annot != null) {
    validate(message,param,target);
  }
  return target;
}
