{
  Assert.notNull(testClass,"Test class must not be null");
  if (!StringUtils.hasText(defaultContextLoaderClassName)) {
    defaultContextLoaderClassName=testClass.isAnnotationPresent(WebAppConfiguration.class) ? DEFAULT_WEB_CONTEXT_LOADER_CLASS_NAME : DEFAULT_CONTEXT_LOADER_CLASS_NAME;
  }
  Class<? extends ContextLoader> contextLoaderClass=resolveContextLoaderClass(testClass,defaultContextLoaderClassName);
  return instantiateClass(contextLoaderClass,ContextLoader.class);
}
