{
  Assert.notNull(testClass,"Class must not be null");
  final List<ContextConfigurationAttributes> attributesList=new ArrayList<ContextConfigurationAttributes>();
  Class<ContextConfiguration> annotationType=ContextConfiguration.class;
  AnnotationDescriptor<ContextConfiguration> descriptor=findAnnotationDescriptor(testClass,annotationType);
  Assert.notNull(descriptor,String.format("Could not find an 'annotation declaring class' for annotation type [%s] and class [%s]",annotationType.getName(),testClass.getName()));
  while (descriptor != null) {
    Class<?> rootDeclaringClass=descriptor.getDeclaringClass();
    Class<?> declaringClass=(descriptor.getStereotype() != null) ? descriptor.getStereotypeType() : rootDeclaringClass;
    convertContextConfigToConfigAttributesAndAddToList(descriptor.getAnnotation(),declaringClass,attributesList);
    descriptor=findAnnotationDescriptor(rootDeclaringClass.getSuperclass(),annotationType);
  }
  return attributesList;
}
