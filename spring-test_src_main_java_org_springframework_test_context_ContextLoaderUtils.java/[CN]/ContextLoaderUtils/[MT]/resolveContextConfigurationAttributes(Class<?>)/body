{
  Assert.notNull(testClass,"Class must not be null");
  final List<ContextConfigurationAttributes> attributesList=new ArrayList<ContextConfigurationAttributes>();
  Class<ContextConfiguration> annotationType=ContextConfiguration.class;
  Class<?> declaringClass=findAnnotationDeclaringClass(annotationType,testClass);
  Assert.notNull(declaringClass,String.format("Could not find an 'annotation declaring class' for annotation type [%s] and class [%s]",annotationType.getName(),testClass.getName()));
  while (declaringClass != null) {
    ContextConfiguration contextConfiguration=declaringClass.getAnnotation(annotationType);
    if (logger.isTraceEnabled()) {
      logger.trace(String.format("Retrieved @ContextConfiguration [%s] for declaring class [%s].",contextConfiguration,declaringClass.getName()));
    }
    ContextConfigurationAttributes attributes=new ContextConfigurationAttributes(declaringClass,contextConfiguration);
    if (logger.isTraceEnabled()) {
      logger.trace("Resolved context configuration attributes: " + attributes);
    }
    attributesList.add(attributes);
    declaringClass=findAnnotationDeclaringClass(annotationType,declaringClass.getSuperclass());
  }
  return attributesList;
}
