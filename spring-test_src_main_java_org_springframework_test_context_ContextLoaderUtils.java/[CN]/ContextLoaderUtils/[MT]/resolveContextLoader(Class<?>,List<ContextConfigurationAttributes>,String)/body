{
  Assert.notNull(testClass,"Class must not be null");
  Assert.notEmpty(configAttributesList,"ContextConfigurationAttributes list must not be empty");
  if (!StringUtils.hasText(defaultContextLoaderClassName)) {
    Class<? extends Annotation> webAppConfigClass=loadWebAppConfigurationClass();
    defaultContextLoaderClassName=webAppConfigClass != null && findAnnotation(testClass,webAppConfigClass) != null ? DEFAULT_WEB_CONTEXT_LOADER_CLASS_NAME : DEFAULT_CONTEXT_LOADER_CLASS_NAME;
  }
  Class<? extends ContextLoader> contextLoaderClass=resolveContextLoaderClass(testClass,configAttributesList,defaultContextLoaderClassName);
  return instantiateClass(contextLoaderClass,ContextLoader.class);
}
