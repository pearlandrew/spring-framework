{
  if (c == null) {
    return null;
  }
  byte[] bytes=c.toString().getBytes(enc);
  StringBuilder builder=new StringBuilder();
  for (int i=0; i < bytes.length; i++) {
    int b=bytes[i];
    if (b < 0) {
      b=256 + b;
    }
    char hex1=Character.toUpperCase(Character.forDigit((b >> 4) & 0xF,16));
    char hex2=Character.toUpperCase(Character.forDigit(b & 0xF,16));
    builder.append('%');
    builder.append(hex1);
    builder.append(hex2);
  }
  return builder.toString();
}
