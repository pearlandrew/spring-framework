{
  MediaType accepted=MediaType.TEXT_PLAIN;
  String returnValue="Foo";
  servletRequest.addHeader("Accept",accepted.toString());
  expect(messageConverter.canWrite(String.class,accepted)).andReturn(false);
  expect(messageConverter.getSupportedMediaTypes()).andReturn(Arrays.asList(MediaType.APPLICATION_OCTET_STREAM));
  replay(messageConverter);
  processor.handleReturnValue(returnValue,stringReturnValue,mavContainer,webRequest);
  assertFalse("The ResolveView flag wasn't turned off",mavContainer.isResolveView());
  verify(messageConverter);
}
