{
  MediaType contentType=MediaType.TEXT_PLAIN;
  servletRequest.addHeader("Content-Type",contentType.toString());
  HttpMessageConverter<ValidBean> beanConverter=createMock(HttpMessageConverter.class);
  expect(beanConverter.getSupportedMediaTypes()).andReturn(Collections.singletonList(MediaType.TEXT_PLAIN));
  expect(beanConverter.canRead(ValidBean.class,contentType)).andReturn(true);
  expect(beanConverter.read(eq(ValidBean.class),isA(HttpInputMessage.class))).andReturn(new ValidBean("name"));
  replay(beanConverter);
  processor=new RequestResponseBodyMethodProcessor(Collections.<HttpMessageConverter<?>>singletonList(beanConverter));
  processor.resolveArgument(paramValidBean,mavContainer,webRequest,new ValidatingBinderFactory());
}
