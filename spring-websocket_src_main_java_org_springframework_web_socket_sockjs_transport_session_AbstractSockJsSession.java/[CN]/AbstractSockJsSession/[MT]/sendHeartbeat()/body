{
  if (isActive()) {
    if (heartbeatLock.tryLock()) {
      try {
        writeFrame(SockJsFrame.heartbeatFrame());
        scheduleHeartbeat();
      }
  finally {
        heartbeatLock.unlock();
      }
    }
  }
}
