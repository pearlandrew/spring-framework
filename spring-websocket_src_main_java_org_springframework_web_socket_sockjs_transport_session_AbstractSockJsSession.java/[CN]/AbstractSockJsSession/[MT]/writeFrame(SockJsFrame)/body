{
  if (logger.isTraceEnabled()) {
    logger.trace("Preparing to write " + frame);
  }
  try {
    writeFrameInternal(frame);
  }
 catch (  Throwable ex) {
    logger.error("Terminating connection after failure to send message to client. " + "This may be because the client has gone away " + "(see https://java.net/jira/browse/SERVLET_SPEC-44)",ex);
    try {
      disconnect(CloseStatus.SERVER_ERROR);
      close(CloseStatus.SERVER_ERROR);
    }
 catch (    Throwable ex2) {
    }
    throw new SockJsTransportFailureException("Failed to write " + frame,this.getId(),ex);
  }
}
