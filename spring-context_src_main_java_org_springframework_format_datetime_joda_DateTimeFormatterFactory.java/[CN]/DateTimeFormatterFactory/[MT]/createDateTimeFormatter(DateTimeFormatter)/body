{
  DateTimeFormatter dateTimeFormatter=null;
  if (StringUtils.hasLength(pattern)) {
    dateTimeFormatter=DateTimeFormat.forPattern(pattern);
  }
 else   if (iso != null && iso != ISO.NONE) {
    if (iso == ISO.DATE) {
      dateTimeFormatter=ISODateTimeFormat.date();
    }
 else     if (iso == ISO.TIME) {
      dateTimeFormatter=ISODateTimeFormat.time();
    }
 else {
      dateTimeFormatter=ISODateTimeFormat.dateTime();
    }
  }
 else   if (StringUtils.hasLength(style)) {
    dateTimeFormatter=DateTimeFormat.forStyle(style);
  }
  if (dateTimeFormatter != null && this.timeZone != null) {
    dateTimeFormatter=dateTimeFormatter.withZone(DateTimeZone.forTimeZone(this.timeZone));
  }
  return (dateTimeFormatter != null ? dateTimeFormatter : fallbackFormatter);
}
