{
  DateTimeFormatter dateTimeFormatter=null;
  if (StringUtils.hasLength(pattern)) {
    dateTimeFormatter=DateTimeFormat.forPattern(pattern);
  }
 else   if (iso != null && iso != ISO.NONE) {
switch (iso) {
case DATE:
      dateTimeFormatter=ISODateTimeFormat.date();
    break;
case TIME:
  dateTimeFormatter=ISODateTimeFormat.time();
break;
case DATE_TIME:
dateTimeFormatter=ISODateTimeFormat.dateTime();
break;
case NONE:
break;
default :
throw new IllegalStateException("Unsupported ISO format: " + iso);
}
}
 else if (StringUtils.hasLength(style)) {
dateTimeFormatter=DateTimeFormat.forStyle(style);
}
if (dateTimeFormatter != null && this.timeZone != null) {
dateTimeFormatter=dateTimeFormatter.withZone(DateTimeZone.forTimeZone(this.timeZone));
}
return (dateTimeFormatter != null ? dateTimeFormatter : fallbackFormatter);
}
