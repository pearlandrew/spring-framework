{
synchronized (this.updateCache) {
    Set<String> destinationsToRemove=new HashSet<String>();
    for (    Map.Entry<String,MultiValueMap<String,String>> entry : this.updateCache.entrySet()) {
      String destination=entry.getKey();
      MultiValueMap<String,String> sessionMap=entry.getValue();
      if (sessionMap.remove(info.getSessionId()) != null) {
        if (sessionMap.isEmpty()) {
          destinationsToRemove.add(destination);
        }
 else {
          this.accessCache.put(destination,new LinkedMultiValueMap<String,String>(sessionMap));
        }
      }
    }
    for (    String destination : destinationsToRemove) {
      this.updateCache.remove(destination);
      this.accessCache.remove(destination);
    }
  }
}
