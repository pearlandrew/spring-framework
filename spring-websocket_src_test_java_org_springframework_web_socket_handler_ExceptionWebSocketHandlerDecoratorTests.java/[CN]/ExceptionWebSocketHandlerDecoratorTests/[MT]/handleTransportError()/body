{
  Exception exception=new Exception("transport error");
  doThrow(new IllegalStateException("error")).when(this.delegate).handleTransportError(this.session,exception);
  this.decorator.handleTransportError(this.session,exception);
  assertEquals(CloseStatus.SERVER_ERROR,this.session.getCloseStatus());
}
