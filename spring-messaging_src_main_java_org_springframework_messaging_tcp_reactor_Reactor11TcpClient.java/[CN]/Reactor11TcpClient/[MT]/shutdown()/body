{
  try {
    Promise<Boolean> promise=this.tcpClient.close();
    return new AbstractPromiseToListenableFutureAdapter<Boolean,Boolean>(promise){
      @Override protected Boolean adapt(      Boolean result){
        return result;
      }
    }
;
  }
  finally {
    if (this.environment != null) {
      this.environment.shutdown();
    }
  }
}
