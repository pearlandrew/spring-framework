{
  String pathWithinApp=getPathWithinApplication(request);
  String servletPath=getServletPath(request);
  if (pathWithinApp.startsWith(servletPath)) {
    return pathWithinApp.substring(servletPath.length());
  }
 else {
    String pathInfo=request.getPathInfo();
    return (pathInfo != null ? pathInfo : servletPath);
  }
}
