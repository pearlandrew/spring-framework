{
  RequestMappingInfo html=new RequestMappingInfo(null,null,null,null,null,new ProducesRequestCondition("text/html"));
  RequestMappingInfo xml=new RequestMappingInfo(null,null,null,null,null,new ProducesRequestCondition("application/xml"));
  RequestMappingInfo none=new RequestMappingInfo(null);
  request.addHeader("Accept","application/xml, text/html");
  Comparator<RequestMappingInfo> comparator=handlerMapping.getMappingComparator(request);
  int result=comparator.compare(html,xml);
  assertTrue("Invalid comparison result: " + result,result > 0);
  assertTrue(comparator.compare(xml,html) < 0);
  assertTrue(comparator.compare(xml,none) < 0);
  assertTrue(comparator.compare(none,xml) > 0);
  assertTrue(comparator.compare(html,none) < 0);
  assertTrue(comparator.compare(none,html) > 0);
  request=new MockHttpServletRequest();
  request.addHeader("Accept","application/xml, text/*");
  comparator=handlerMapping.getMappingComparator(request);
  assertTrue(comparator.compare(html,xml) > 0);
  assertTrue(comparator.compare(xml,html) < 0);
  request=new MockHttpServletRequest();
  request.addHeader("Accept","application/pdf");
  comparator=handlerMapping.getMappingComparator(request);
  assertTrue(comparator.compare(html,xml) == 0);
  assertTrue(comparator.compare(xml,html) == 0);
  request=new MockHttpServletRequest();
  request.addHeader("Accept","text/html;q=0.9,application/xml");
  comparator=handlerMapping.getMappingComparator(request);
  assertTrue(comparator.compare(html,xml) > 0);
  assertTrue(comparator.compare(xml,html) < 0);
}
