{
  super.setBeanFactory(beanFactory);
  Executor executorToUse=this.executor;
  if (executorToUse == null) {
    try {
      executorToUse=beanFactory.getBean(TaskExecutor.class);
    }
 catch (    NoUniqueBeanDefinitionException ex) {
      try {
        executorToUse=beanFactory.getBean(DEFAULT_TASK_EXECUTOR_BEAN_NAME,Executor.class);
      }
 catch (      NoSuchBeanDefinitionException ex2) {
        logger.info("More than one TaskExecutor bean found within the context, and none is " + "named 'taskExecutor'. Mark one of them as primary or name it 'taskExecutor' " + "(possibly as an alias) in order to use it for async annotation processing.");
      }
    }
catch (    NoSuchBeanDefinitionException ex) {
      logger.info("No TaskExecutor bean found for async annotation processing.");
    }
  }
  AsyncAnnotationAdvisor advisor=new AsyncAnnotationAdvisor(executorToUse,this.exceptionHandler);
  if (this.asyncAnnotationType != null) {
    advisor.setAsyncAnnotationType(this.asyncAnnotationType);
  }
  advisor.setBeanFactory(beanFactory);
  this.advisor=advisor;
}
