{
synchronized (this.mutex) {
    this.state=State.FAILURE;
    this.result=ex;
    while (!this.failureCallbacks.isEmpty()) {
      this.failureCallbacks.poll().onFailure(ex);
    }
  }
}
