{
  if (logger.isDebugEnabled()) {
    logger.debug("Checking lookup path: " + lookupPath);
  }
  for (  String pattern : this.handlerMap.keySet()) {
    if (!getPathMatcher().match(pattern,lookupPath)) {
      continue;
    }
    String pathWithinMapping=getPathMatcher().extractPathWithinPattern(pattern,lookupPath);
    String pathMapping=lookupPath.substring(0,lookupPath.indexOf(pathWithinMapping));
    if (logger.isDebugEnabled()) {
      logger.debug("Found matching resource mapping=\"" + pattern + "\", "+ "resource URL path=\""+ pathWithinMapping+ "\"");
    }
    ResourceHttpRequestHandler handler=this.handlerMap.get(pattern);
    ResourceResolverChain chain=handler.createResourceResolverChain();
    String resolved=chain.resolvePublicUrlPath(pathWithinMapping,handler.getLocations());
    if (resolved == null) {
      throw new IllegalStateException("Failed to get public resource URL path for " + pathWithinMapping);
    }
    if (logger.isDebugEnabled()) {
      logger.debug("Returning public resource URL path=\"" + resolved + "\"");
    }
    return pathMapping + resolved;
  }
  logger.debug("No matching resource mapping");
  return null;
}
