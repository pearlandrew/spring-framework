{
  request.setRequestURI("/foo.html");
  String lookupPath=new UrlPathHelper().getLookupPathForRequest(request);
  RequestMappingInfo key1=new RequestMappingInfo(asList("/foo","*.jpeg"),null);
  RequestMappingInfo key2=new RequestMappingInfo(asList("/foo","*.html"),null);
  RequestMappingInfo match1=handlerMapping.getMatchingMapping(key1,lookupPath,request);
  RequestMappingInfo match2=handlerMapping.getMatchingMapping(key2,lookupPath,request);
  List<RequestMappingInfo> matches=asList(match1,match2);
  Collections.sort(matches,handlerMapping.getMappingComparator(lookupPath,request));
  assertSame(match2.getPatterns(),matches.get(0).getPatterns());
}
