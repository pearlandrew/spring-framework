{
  request.setRequestURI("/foo.html");
  String lookupPath=new UrlPathHelper().getLookupPathForRequest(request);
  RequestMappingKey key1=new RequestMappingKey(asList("/foo","*.jpeg"),null);
  RequestMappingKey key2=new RequestMappingKey(asList("/foo","*.html"),null);
  RequestMappingKey match1=handlerMapping.getMatchingMappingKey(key1,lookupPath,request);
  RequestMappingKey match2=handlerMapping.getMatchingMappingKey(key2,lookupPath,request);
  List<RequestMappingKey> matches=asList(match1,match2);
  Collections.sort(matches,handlerMapping.getMappingKeyComparator(lookupPath,request));
  assertSame(match2.getPatterns(),matches.get(0).getPatterns());
}
