{
  RequestMappingKey html=new RequestMappingKey(null,null,null,RequestConditionFactory.parseHeaders("accept=text/html"),null);
  RequestMappingKey xml=new RequestMappingKey(null,null,null,RequestConditionFactory.parseHeaders("accept=application/xml"),null);
  RequestMappingKey none=new RequestMappingKey(null,null);
  request.addHeader("Accept","application/xml, text/html");
  Comparator<RequestMappingKey> comparator=handlerMapping.getMappingKeyComparator("",request);
  assertTrue(comparator.compare(html,xml) > 0);
  assertTrue(comparator.compare(xml,html) < 0);
  assertTrue(comparator.compare(xml,none) < 0);
  assertTrue(comparator.compare(none,xml) > 0);
  assertTrue(comparator.compare(html,none) < 0);
  assertTrue(comparator.compare(none,html) > 0);
  request=new MockHttpServletRequest();
  request.addHeader("Accept","application/xml, text/*");
  comparator=handlerMapping.getMappingKeyComparator("",request);
  assertTrue(comparator.compare(html,xml) > 0);
  assertTrue(comparator.compare(xml,html) < 0);
  request=new MockHttpServletRequest();
  request.addHeader("Accept","application/pdf");
  comparator=handlerMapping.getMappingKeyComparator("",request);
  assertTrue(comparator.compare(html,xml) == 0);
  assertTrue(comparator.compare(xml,html) == 0);
  request=new MockHttpServletRequest();
  request.addHeader("Accept","text/html;q=0.9,application/xml");
  comparator=handlerMapping.getMappingKeyComparator("",request);
  assertTrue(comparator.compare(html,xml) > 0);
  assertTrue(comparator.compare(xml,html) < 0);
}
