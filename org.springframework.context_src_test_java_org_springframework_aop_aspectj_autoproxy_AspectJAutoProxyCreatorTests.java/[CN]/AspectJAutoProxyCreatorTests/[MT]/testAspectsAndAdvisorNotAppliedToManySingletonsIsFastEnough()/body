{
  if (factoryLog.isTraceEnabled() || factoryLog.isDebugEnabled()) {
    return;
  }
  GenericApplicationContext ac=new GenericApplicationContext();
  new XmlBeanDefinitionReader(ac).loadBeanDefinitions(new ClassPathResource(qName("aspectsPlusAdvisor.xml"),getClass()));
  for (int i=0; i < 10000; i++) {
    ac.registerBeanDefinition("singleton" + i,new RootBeanDefinition(NestedTestBean.class));
  }
  StopWatch sw=new StopWatch();
  sw.start("singleton");
  ac.refresh();
  sw.stop();
  long totalTimeMillis=sw.getTotalTimeMillis();
  int maxTimeMillis=5000;
  assertTrue("Singleton creation took too long: " + totalTimeMillis,totalTimeMillis < maxTimeMillis);
}
