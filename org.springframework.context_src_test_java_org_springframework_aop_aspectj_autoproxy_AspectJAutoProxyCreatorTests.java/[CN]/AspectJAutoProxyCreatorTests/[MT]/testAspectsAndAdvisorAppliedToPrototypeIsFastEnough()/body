{
  if (factoryLog.isTraceEnabled() || factoryLog.isDebugEnabled()) {
    return;
  }
  ClassPathXmlApplicationContext ac=newContext("aspectsPlusAdvisor.xml");
  StopWatch sw=new StopWatch();
  sw.start("prototype");
  for (int i=0; i < 10000; i++) {
    ITestBean shouldBeWeaved=(ITestBean)ac.getBean("adrian2");
    if (i < 10) {
      doTestAspectsAndAdvisorAreApplied(ac,shouldBeWeaved);
    }
  }
  sw.stop();
  long totalTimeMillis=sw.getTotalTimeMillis();
  int maxTimeMillis=5000;
  assertTrue("Prototype creation took too long: " + totalTimeMillis,totalTimeMillis < maxTimeMillis);
}
