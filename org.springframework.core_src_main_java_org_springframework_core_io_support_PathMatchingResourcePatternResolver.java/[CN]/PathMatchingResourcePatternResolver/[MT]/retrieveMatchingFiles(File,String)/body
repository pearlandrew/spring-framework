{
  if (!rootDir.isDirectory()) {
    throw new IllegalArgumentException("Resource path [" + rootDir + "] does not denote a directory");
  }
  String fullPattern=StringUtils.replace(rootDir.getAbsolutePath(),File.separator,"/");
  if (!pattern.startsWith("/")) {
    fullPattern+="/";
  }
  fullPattern=fullPattern + StringUtils.replace(pattern,File.separator,"/");
  Set<File> result=new LinkedHashSet<File>(8);
  doRetrieveMatchingFiles(fullPattern,rootDir,result);
  return result;
}
