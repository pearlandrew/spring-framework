{
  if (bean instanceof ServerEndpointConfig) {
    ServerEndpointConfig endpointConfig=(ServerEndpointConfig)bean;
    try {
      if (logger.isInfoEnabled()) {
        logger.info("Registering bean '" + beanName + "' as javax.websocket.Endpoint under path "+ endpointConfig.getPath());
      }
      getServerContainer().addEndpoint(endpointConfig);
    }
 catch (    DeploymentException ex) {
      throw new IllegalStateException("Failed to deploy Endpoint bean with name '" + bean + "'",ex);
    }
  }
  return bean;
}
