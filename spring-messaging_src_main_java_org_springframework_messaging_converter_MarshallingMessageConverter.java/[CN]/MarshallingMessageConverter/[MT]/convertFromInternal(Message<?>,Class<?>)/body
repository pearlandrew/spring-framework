{
  Assert.notNull(this.unmarshaller,"Property 'unmarshaller' is required");
  try {
    Source source=getSource(message.getPayload());
    Object result=this.unmarshaller.unmarshal(source);
    if (!targetClass.isInstance(result)) {
      throw new TypeMismatchException(result,targetClass);
    }
    return result;
  }
 catch (  UnmarshallingFailureException ex) {
    throw new MessageConversionException(message,"Could not unmarshal XML: " + ex.getMessage(),ex);
  }
catch (  IOException ex) {
    throw new MessageConversionException(message,"Could not unmarshal XML: " + ex.getMessage(),ex);
  }
}
