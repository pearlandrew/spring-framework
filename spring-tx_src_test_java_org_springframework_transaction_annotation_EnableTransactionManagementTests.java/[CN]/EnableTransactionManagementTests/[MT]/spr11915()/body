{
  AnnotationConfigApplicationContext ctx=new AnnotationConfigApplicationContext(Spr11915Config.class);
  TransactionalTestBean bean=ctx.getBean(TransactionalTestBean.class);
  bean.saveQualifiedFoo();
  CallCountingTransactionManager txManager=ctx.getBean("qualifiedTransactionManager",CallCountingTransactionManager.class);
  assertThat(txManager.begun,equalTo(1));
  assertThat(txManager.commits,equalTo(1));
  assertThat(txManager.rollbacks,equalTo(0));
}
