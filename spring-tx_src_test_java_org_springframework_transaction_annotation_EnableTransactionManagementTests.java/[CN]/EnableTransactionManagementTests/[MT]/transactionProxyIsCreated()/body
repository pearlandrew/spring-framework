{
  AnnotationConfigApplicationContext ctx=new AnnotationConfigApplicationContext();
  ctx.register(EnableTxConfig.class,TxManagerConfig.class);
  ctx.refresh();
  TransactionalTestBean bean=ctx.getBean(TransactionalTestBean.class);
  assertThat("testBean is not a proxy",AopUtils.isAopProxy(bean),is(true));
  Map<?,?> services=ctx.getBeansWithAnnotation(Service.class);
  assertThat("Stereotype annotation not visible",services.containsKey("testBean"),is(true));
}
