{
  List typeInfo=new ArrayList(2);
  if (converter instanceof ConverterInfo) {
    ConverterInfo info=(ConverterInfo)converter;
    typeInfo.add(info.getSourceType());
    typeInfo.add(info.getTargetType());
    return typeInfo;
  }
  Class classToIntrospect=converter.getClass();
  while (classToIntrospect != null) {
    Type[] genericInterfaces=classToIntrospect.getGenericInterfaces();
    for (    Type genericInterface : genericInterfaces) {
      if (genericInterface instanceof ParameterizedType) {
        ParameterizedType pInterface=(ParameterizedType)genericInterface;
        if (Converter.class.isAssignableFrom((Class)pInterface.getRawType()) || ConverterFactory.class.isAssignableFrom((Class)pInterface.getRawType())) {
          Class s=getParameterClass(pInterface.getActualTypeArguments()[0],converter.getClass());
          Class t=getParameterClass(pInterface.getActualTypeArguments()[1],converter.getClass());
          typeInfo.add(getParameterClass(s,converter.getClass()));
          typeInfo.add(getParameterClass(t,converter.getClass()));
          break;
        }
      }
    }
    classToIntrospect=classToIntrospect.getSuperclass();
  }
  if (typeInfo.size() != 2) {
    throw new IllegalArgumentException("Unable to extract source and target class arguments from Converter [" + converter.getClass().getName() + "]; does the Converter specify the <S, T> generic types?");
  }
  return typeInfo;
}
