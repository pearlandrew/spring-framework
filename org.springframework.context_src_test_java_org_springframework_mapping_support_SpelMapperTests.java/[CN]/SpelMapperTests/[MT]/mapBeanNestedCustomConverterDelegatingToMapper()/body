{
  PersonDto source=new PersonDto();
  NestedDto nested=new NestedDto();
  nested.foo="bar";
  source.setNested(nested);
  Person target=new Person();
  mapper.getConverterRegistry().addConverter(new Converter<NestedDto,Nested>(){
    public Nested convert(    NestedDto source){
      Nested nested=new Nested();
      SpelMapper nestedMapper=new SpelMapper();
      nestedMapper.addMapping("foo").setConverter(new Converter<String,String>(){
        public String convert(        String source){
          return source + " and baz";
        }
      }
);
      return (Nested)nestedMapper.map(source,nested);
    }
  }
);
  mapper.setAutoMappingEnabled(false);
  mapper.addMapping("nested");
  mapper.map(source,target);
  assertEquals("bar and baz",target.nested.foo);
}
