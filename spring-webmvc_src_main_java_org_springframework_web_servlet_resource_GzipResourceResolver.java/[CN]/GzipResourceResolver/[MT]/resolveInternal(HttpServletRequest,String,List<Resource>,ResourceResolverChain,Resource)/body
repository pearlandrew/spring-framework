{
  if ((resource == null) || !isGzipAccepted(request)) {
    return resource;
  }
  try {
    Resource gzipped=new GzippedResource(resource);
    if (gzipped.exists()) {
      return gzipped;
    }
  }
 catch (  IOException e) {
    logger.trace("No gzipped resource for " + resource.getFilename(),e);
  }
  return resource;
}
