{
  GenericWebApplicationContext wac=new GenericWebApplicationContext();
  wac.registerBeanDefinition("controller",new RootBeanDefinition(controllerType));
  if (useAutoProxy) {
    DefaultAdvisorAutoProxyCreator autoProxyCreator=new DefaultAdvisorAutoProxyCreator();
    autoProxyCreator.setBeanFactory(wac.getBeanFactory());
    wac.getBeanFactory().addBeanPostProcessor(autoProxyCreator);
    wac.getBeanFactory().registerSingleton("advsr",new DefaultPointcutAdvisor(new SimpleTraceInterceptor()));
  }
  RequestMappingHandlerMethodMapping mapping=new RequestMappingHandlerMethodMapping();
  mapping.setApplicationContext(wac);
  return mapping;
}
