{
  Assert.notNull(uri,"'uri' must not be null");
  Assert.isTrue(!uri.isOpaque(),"Opaque URI [" + uri + "] not supported");
  this.scheme=uri.getScheme();
  if (uri.getRawUserInfo() != null) {
    this.userInfo=uri.getRawUserInfo();
  }
  if (uri.getHost() != null) {
    this.host=uri.getHost();
  }
  if (uri.getPort() != -1) {
    this.port=uri.getPort();
  }
  if (StringUtils.hasLength(uri.getRawPath())) {
    String[] pathSegments=StringUtils.tokenizeToStringArray(uri.getRawPath(),"/");
    this.pathSegments.clear();
    Collections.addAll(this.pathSegments,pathSegments);
  }
  if (StringUtils.hasLength(uri.getRawQuery())) {
    this.queryBuilder.setLength(0);
    this.queryBuilder.append(uri.getRawQuery());
  }
  if (uri.getRawFragment() != null) {
    this.fragment=uri.getRawFragment();
  }
  return this;
}
