{
class TestBeanSubclass extends TestBean implements Comparable {
    public int compareTo(    Object arg0){
      throw new UnsupportedOperationException("compareTo");
    }
  }
  TestBeanSubclass raw=new TestBeanSubclass();
  ProxyFactory factory=new ProxyFactory(raw);
  assertEquals("Found correct number of interfaces",5,factory.getProxiedInterfaces().length);
  ITestBean tb=(ITestBean)factory.getProxy();
  assertTrue("Picked up secondary interface",tb instanceof IOther);
  raw.setAge(25);
  assertTrue(tb.getAge() == raw.getAge());
  long t=555555L;
  TimestampIntroductionInterceptor ti=new TimestampIntroductionInterceptor(t);
  Class[] oldProxiedInterfaces=factory.getProxiedInterfaces();
  factory.addAdvisor(0,new DefaultIntroductionAdvisor(ti,TimeStamped.class));
  Class[] newProxiedInterfaces=factory.getProxiedInterfaces();
  assertEquals("Advisor proxies one more interface after introduction",oldProxiedInterfaces.length + 1,newProxiedInterfaces.length);
  TimeStamped ts=(TimeStamped)factory.getProxy();
  assertTrue(ts.getTimeStamp() == t);
  ((IOther)ts).absquatulate();
}
