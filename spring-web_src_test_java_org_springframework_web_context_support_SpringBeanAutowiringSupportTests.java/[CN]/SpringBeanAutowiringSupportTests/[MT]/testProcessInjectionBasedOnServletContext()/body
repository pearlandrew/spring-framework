{
  MockServletContext sc=new MockServletContext();
  StaticWebApplicationContext wac=new StaticWebApplicationContext();
  MutablePropertyValues pvs=new MutablePropertyValues();
  pvs.add("name","tb");
  wac.registerSingleton("testBean",TestBean.class,pvs);
  wac.setServletContext(sc);
  wac.refresh();
  sc.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE,wac);
  InjectionTarget target=new InjectionTarget();
  SpringBeanAutowiringSupport.processInjectionBasedOnServletContext(target,sc);
  assertTrue(target.testBean instanceof TestBean);
  assertEquals("tb",target.name);
}
