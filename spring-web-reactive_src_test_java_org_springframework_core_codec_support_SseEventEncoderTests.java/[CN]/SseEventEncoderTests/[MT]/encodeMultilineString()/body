{
  SseEventEncoder encoder=new SseEventEncoder(new StringEncoder(),Arrays.asList(new JacksonJsonEncoder()));
  Flux<String> source=Flux.just("foo\nbar","foo\nbaz");
  Flux<DataBuffer> output=encoder.encode(source,this.dataBufferFactory,ResolvableType.forClass(String.class),new MimeType("text","event-stream"));
  TestSubscriber.subscribe(output).assertNoError().assertValuesWith(stringConsumer("data:foo\ndata:bar\n"),stringConsumer("\n"),stringConsumer("data:foo\ndata:baz\n"),stringConsumer("\n"));
}
