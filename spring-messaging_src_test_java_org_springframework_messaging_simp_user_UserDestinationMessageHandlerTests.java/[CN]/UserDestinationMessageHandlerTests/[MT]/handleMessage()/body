{
  this.registry.registerSessionId("joe","123");
  when(this.brokerChannel.send(Mockito.any(Message.class))).thenReturn(true);
  this.messageHandler.handleMessage(createMessage(SimpMessageType.MESSAGE,"joe","123","/user/joe/queue/foo"));
  ArgumentCaptor<Message> captor=ArgumentCaptor.forClass(Message.class);
  Mockito.verify(this.brokerChannel).send(captor.capture());
  assertEquals("/queue/foo-user123",SimpMessageHeaderAccessor.getDestination(captor.getValue().getHeaders()));
  assertEquals("/user/queue/foo",captor.getValue().getHeaders().get(SimpMessageHeaderAccessor.ORIGINAL_DESTINATION));
}
