{
  if (!getExpectedException().isAssignableFrom(actualException.getClass())) {
    AssertionFailedError error=new AssertionFailedError(createMessageForWrongThrownExceptionType(actualException));
    error.initCause(actualException);
    throw error;
  }
}
