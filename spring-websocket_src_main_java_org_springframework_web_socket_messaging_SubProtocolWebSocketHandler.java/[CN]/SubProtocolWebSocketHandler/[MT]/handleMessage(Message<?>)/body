{
  String sessionId=resolveSessionId(message);
  if (sessionId == null) {
    logger.error("sessionId not found in message " + message);
    return;
  }
  WebSocketSession session=this.sessions.get(sessionId);
  if (session == null) {
    logger.error("Session not found for session with id " + sessionId);
    return;
  }
  try {
    findProtocolHandler(session).handleMessageToClient(session,message);
  }
 catch (  SessionLimitExceededException ex) {
    try {
      logger.error("Terminating session id '" + sessionId + "'",ex);
      clearSession(session,ex.getStatus());
      session.close(ex.getStatus());
    }
 catch (    Exception secondException) {
      logger.error("Exception terminating session id '" + sessionId + "'",secondException);
    }
  }
catch (  Exception e) {
    logger.error("Failed to send message to client " + message,e);
  }
}
