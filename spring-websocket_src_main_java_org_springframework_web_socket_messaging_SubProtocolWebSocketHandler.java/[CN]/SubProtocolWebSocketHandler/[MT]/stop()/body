{
synchronized (this.lifecycleMonitor) {
    this.running=false;
    this.clientOutboundChannel.unsubscribe(this);
    for (    WebSocketSessionHolder holder : this.sessions.values()) {
      try {
        holder.getSession().close(CloseStatus.GOING_AWAY);
      }
 catch (      Throwable t) {
        logger.error("Failed to close '" + holder.getSession() + "': "+ t.getMessage());
      }
    }
  }
}
