{
  SessionBroker broker=new MockSingleSessionBroker();
  SessionBrokerSessionFactory factory=new SessionBrokerSessionFactory(broker);
  assertEquals(factory.createSession(),broker);
  try {
    factory.createManagedClientSession();
    fail("Should have thrown ValidationException");
  }
 catch (  ValidationException ex) {
  }
}
