{
  SessionBroker client=new MockClientSessionBroker();
  SessionBroker broker=new MockServerSessionBroker(client);
  SessionBrokerSessionFactory factory=new SessionBrokerSessionFactory(broker);
  assertEquals(client,factory.createSession());
  Session session=factory.createManagedClientSession();
  assertEquals(client,session.getActiveSession());
  assertNotNull(session.getActiveUnitOfWork());
  assertEquals(session.getActiveUnitOfWork(),session.getActiveUnitOfWork());
}
