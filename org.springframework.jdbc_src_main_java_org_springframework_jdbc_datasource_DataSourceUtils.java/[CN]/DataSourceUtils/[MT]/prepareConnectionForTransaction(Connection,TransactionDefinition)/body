{
  Assert.notNull(con,"No Connection specified");
  if (definition != null && definition.isReadOnly()) {
    try {
      if (logger.isDebugEnabled()) {
        logger.debug("Setting JDBC Connection [" + con + "] read-only");
      }
      con.setReadOnly(true);
    }
 catch (    Throwable ex) {
      logger.debug("Could not set JDBC Connection read-only",ex);
    }
  }
  Integer previousIsolationLevel=null;
  if (definition != null && definition.getIsolationLevel() != TransactionDefinition.ISOLATION_DEFAULT) {
    if (logger.isDebugEnabled()) {
      logger.debug("Changing isolation level of JDBC Connection [" + con + "] to "+ definition.getIsolationLevel());
    }
    previousIsolationLevel=new Integer(con.getTransactionIsolation());
    con.setTransactionIsolation(definition.getIsolationLevel());
  }
  return previousIsolationLevel;
}
