{
  Object originalReplyChannelHeader=requestMessage.getHeaders().getReplyChannel();
  Object originalErrorChannelHeader=requestMessage.getHeaders().getErrorChannel();
  TemporaryReplyChannel replyChannel=new TemporaryReplyChannel(this.receiveTimeout,this.throwExceptionOnLateReply);
  requestMessage=MessageBuilder.fromMessage(requestMessage).setReplyChannel(replyChannel).setErrorChannel(replyChannel).build();
  try {
    this.doSend(destination,requestMessage);
  }
 catch (  RuntimeException e) {
    replyChannel.setClientWontReceive(true);
    throw e;
  }
  Message<R> reply=this.doReceive(replyChannel);
  if (reply != null) {
    reply=MessageBuilder.fromMessage(reply).setHeader(MessageHeaders.REPLY_CHANNEL,originalReplyChannelHeader).setHeader(MessageHeaders.ERROR_CHANNEL,originalErrorChannelHeader).build();
  }
  return reply;
}
