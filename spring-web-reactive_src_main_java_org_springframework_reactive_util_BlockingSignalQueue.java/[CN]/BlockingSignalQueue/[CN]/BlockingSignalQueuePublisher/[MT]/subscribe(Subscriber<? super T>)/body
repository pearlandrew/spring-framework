{
synchronized (this.subscriberMutex) {
    if (this.subscriber != null) {
      subscriber.onError(new IllegalStateException("Only one subscriber allowed"));
    }
 else {
      this.subscriber=subscriber;
      final SubscriptionThread thread=new SubscriptionThread();
      this.subscriber.onSubscribe(new Subscription(){
        @Override public void request(        long n){
          thread.request(n);
        }
        @Override public void cancel(){
          thread.cancel();
        }
      }
);
      thread.start();
    }
  }
}
