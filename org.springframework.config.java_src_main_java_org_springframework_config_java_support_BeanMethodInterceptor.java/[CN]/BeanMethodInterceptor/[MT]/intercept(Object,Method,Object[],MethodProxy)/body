{
  String beanName=getBeanName(method);
  Scope scope=AnnotationUtils.findAnnotation(method,Scope.class);
  boolean isScopedProxy=(scope != null && scope.proxyMode() != ScopedProxyMode.NO);
  String scopedBeanName=BeanRegistrar.resolveHiddenScopedProxyBeanName(beanName);
  if (isScopedProxy && beanFactory.isCurrentlyInCreation(scopedBeanName))   beanName=scopedBeanName;
  if (factoryContainsBean(beanName)) {
    Object cachedBean=beanFactory.getBean(beanName);
    if (log.isInfoEnabled())     log.info(format("Returning cached singleton object [%s] for @Bean method %s.%s",cachedBean,method.getDeclaringClass().getSimpleName(),beanName));
    return cachedBean;
  }
  return proxy.invokeSuper(obj,args);
}
