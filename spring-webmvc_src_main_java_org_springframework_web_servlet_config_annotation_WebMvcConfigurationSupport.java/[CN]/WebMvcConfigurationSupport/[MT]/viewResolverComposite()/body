{
  ViewResolutionRegistry registry=getViewResolutionRegistry();
  ViewResolverComposite compositeViewResolver=new ViewResolverComposite();
  List<ViewResolver> viewResolvers=registry.getViewResolvers();
  ContentNegotiatingViewResolver contentNegotiatingViewResolver=null;
  List<ViewResolver> filteredViewResolvers=new ArrayList<ViewResolver>();
  for (  ViewResolver viewResolver : viewResolvers) {
    if (viewResolver instanceof ContentNegotiatingViewResolver) {
      contentNegotiatingViewResolver=(ContentNegotiatingViewResolver)viewResolver;
      contentNegotiatingViewResolver.setContentNegotiationManager(this.mvcContentNegotiationManager());
    }
 else {
      filteredViewResolvers.add(viewResolver);
    }
  }
  if (contentNegotiatingViewResolver != null) {
    contentNegotiatingViewResolver.setViewResolvers(filteredViewResolvers);
    viewResolvers=new ArrayList<ViewResolver>();
    viewResolvers.add(contentNegotiatingViewResolver);
  }
  compositeViewResolver.setViewResolvers(viewResolvers);
  compositeViewResolver.setApplicationContext(this.applicationContext);
  compositeViewResolver.setServletContext(this.servletContext);
  return compositeViewResolver;
}
