{
  ConfigurableWebBindingInitializer webBindingInitializer=new ConfigurableWebBindingInitializer();
  webBindingInitializer.setConversionService(mvcConversionService());
  webBindingInitializer.setValidator(mvcValidator());
  webBindingInitializer.setMessageCodesResolver(getMessageCodesResolver());
  List<HandlerMethodArgumentResolver> argumentResolvers=new ArrayList<HandlerMethodArgumentResolver>();
  addArgumentResolvers(argumentResolvers);
  List<HandlerMethodReturnValueHandler> returnValueHandlers=new ArrayList<HandlerMethodReturnValueHandler>();
  addReturnValueHandlers(returnValueHandlers);
  RequestMappingHandlerAdapter adapter=new RequestMappingHandlerAdapter();
  adapter.setContentNegotiationManager(mvcContentNegotiationManager());
  adapter.setMessageConverters(getMessageConverters());
  adapter.setWebBindingInitializer(webBindingInitializer);
  adapter.setCustomArgumentResolvers(argumentResolvers);
  adapter.setCustomReturnValueHandlers(returnValueHandlers);
  AsyncSupportConfigurer configurer=new AsyncSupportConfigurer();
  configureAsyncSupport(configurer);
  if (configurer.getTaskExecutor() != null) {
    adapter.setTaskExecutor(configurer.getTaskExecutor());
  }
  if (configurer.getTimeout() != null) {
    adapter.setAsyncRequestTimeout(configurer.getTimeout());
  }
  return adapter;
}
