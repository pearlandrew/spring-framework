{
  Validator validator=getValidator();
  if (validator == null) {
    if (ClassUtils.isPresent("javax.validation.Validator",getClass().getClassLoader())) {
      Class<?> clazz;
      try {
        String className="org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean";
        clazz=ClassUtils.forName(className,WebMvcConfigurationSupport.class.getClassLoader());
      }
 catch (      ClassNotFoundException e) {
        throw new BeanInitializationException("Could not find default validator",e);
      }
catch (      LinkageError e) {
        throw new BeanInitializationException("Could not find default validator",e);
      }
      validator=(Validator)BeanUtils.instantiate(clazz);
    }
 else {
      validator=new Validator(){
        @Override public boolean supports(        Class<?> clazz){
          return false;
        }
        @Override public void validate(        Object target,        Errors errors){
        }
      }
;
    }
  }
  return validator;
}
