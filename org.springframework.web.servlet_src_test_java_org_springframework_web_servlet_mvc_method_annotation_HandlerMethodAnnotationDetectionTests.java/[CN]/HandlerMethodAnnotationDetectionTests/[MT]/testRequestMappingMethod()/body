{
  MockHttpServletRequest request=new MockHttpServletRequest("POST","/path1/path2");
  request.setParameter("datePattern","MM:dd:yyyy");
  request.addHeader("dateA","11:01:2011");
  request.addHeader("dateB","11:02:2011");
  request.addHeader("Accept","application/json");
  HandlerExecutionChain chain=handlerMapping.getHandler(request);
  assertNotNull(chain);
  MockHttpServletResponse response=new MockHttpServletResponse();
  handlerAdapter.handle(request,response,chain.getHandler());
  assertEquals("application/json",response.getHeader("Content-Type"));
  assertEquals("{\"dateA\":1320105600000,\"dateB\":1320192000000}",response.getContentAsString());
  response=new MockHttpServletResponse();
  exceptionResolver.resolveException(request,response,chain.getHandler(),new Exception("failure"));
  assertEquals("application/json",response.getHeader("Content-Type"));
  assertEquals("\"failure\"",response.getContentAsString());
}
