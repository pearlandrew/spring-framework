{
  if (sessionFactory instanceof SessionFactoryImplementor) {
    Wrapped cp=((SessionFactoryImplementor)sessionFactory).getConnectionProvider();
    if (cp != null) {
      return cp.unwrap(DataSource.class);
    }
  }
  return null;
}
