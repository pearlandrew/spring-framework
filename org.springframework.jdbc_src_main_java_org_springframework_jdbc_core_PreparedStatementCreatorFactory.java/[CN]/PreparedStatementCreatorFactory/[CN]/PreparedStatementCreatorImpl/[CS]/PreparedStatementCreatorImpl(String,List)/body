{
  this.actualSql=actualSql;
  Assert.notNull(parameters,"Parameters List must not be null");
  this.parameters=parameters;
  if (this.parameters.size() != declaredParameters.size()) {
    Set names=new HashSet();
    for (int i=0; i < parameters.size(); i++) {
      Object o=parameters.get(i);
      if (o instanceof SqlParameterValue) {
        names.add(((SqlParameterValue)o).getName());
      }
 else {
        names.add("Parameter #" + i);
      }
    }
    if (names.size() != declaredParameters.size()) {
      throw new InvalidDataAccessApiUsageException("SQL [" + sql + "]: given "+ names.size()+ " parameters but expected "+ declaredParameters.size());
    }
  }
}
