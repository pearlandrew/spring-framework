{
  try {
    if (this.currentStream != null && this.currentStream.available() > 0) {
      return this.currentStream;
    }
 else {
      ByteBuffer signal=this.queue.take();
      if (signal == null) {
        this.completed=true;
        return null;
      }
      this.currentStream=new ByteBufferInputStream(signal);
      return this.currentStream;
    }
  }
 catch (  CancelException ce) {
    this.completed=true;
    return null;
  }
catch (  InterruptedException ex) {
    Thread.currentThread().interrupt();
  }
catch (  Throwable error) {
    this.completed=true;
    throw new IOException(error);
  }
  throw new IOException();
}
