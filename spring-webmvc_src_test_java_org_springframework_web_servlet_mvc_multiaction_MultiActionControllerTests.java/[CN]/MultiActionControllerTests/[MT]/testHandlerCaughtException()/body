{
  TestMaController mc=new TestExceptionHandler();
  ModelAndView mv=testHandlerCaughtException(mc,new Exception());
  assertNotNull("ModelAndView must not be null",mv);
  assertTrue("mv name is handle(Exception)","handle(Exception)".equals(mv.getViewName()));
  assertTrue("Invoked correct method",mc.wasInvoked("handle(Exception)"));
  testExceptionNoHandler(mc,new Error());
  mc=new TestServletExceptionHandler();
  mv=testHandlerCaughtException(mc,new ServletException());
  assertTrue(mv.getViewName().equals("handle(ServletException)"));
  assertTrue("Invoke correct method",mc.wasInvoked("handle(ServletException)"));
  mv=testHandlerCaughtException(mc,new ServletRequestBindingException("foo"));
  assertTrue(mv.getViewName().equals("handle(ServletException)"));
  assertTrue("Invoke correct method",mc.wasInvoked("handle(ServletException)"));
  testExceptionNoHandler(mc,new RuntimeException());
  testExceptionNoHandler(mc,new Error());
  testExceptionNoHandler(mc,new SQLException());
  testExceptionNoHandler(mc,new Exception());
  mc=new TestRuntimeExceptionHandler();
  mv=testHandlerCaughtException(mc,new RuntimeException());
  assertTrue(mv.getViewName().equals("handle(RTE)"));
  assertTrue("Invoke correct method",mc.wasInvoked("handle(RTE)"));
  mv=testHandlerCaughtException(mc,new FatalBeanException(null,null));
  assertTrue(mv.getViewName().equals("handle(RTE)"));
  assertTrue("Invoke correct method",mc.wasInvoked("handle(RTE)"));
  testExceptionNoHandler(mc,new SQLException());
  testExceptionNoHandler(mc,new Exception());
}
