{
  TestMaController mc=new TestMaController();
  HttpServletRequest request=new MockHttpServletRequest("GET","/welcome.html");
  HttpServletResponse response=new MockHttpServletResponse();
  Properties p=new Properties();
  p.put("/welcome.html","welcome");
  PropertiesMethodNameResolver mnr=new PropertiesMethodNameResolver();
  mnr.setMappings(p);
  mc.setMethodNameResolver(mnr);
  ModelAndView mv=mc.handleRequest(request,response);
  assertTrue("Invoked welcome method",mc.wasInvoked("welcome"));
  assertTrue("view name is welcome",mv.getViewName().equals("welcome"));
  assertTrue("Only one method invoked",mc.getInvokedMethods() == 1);
  mc=new TestMaController();
  request=new MockHttpServletRequest("GET","/subdir/test.html");
  response=new MockHttpServletResponse();
  mv=mc.handleRequest(request,response);
  assertTrue("Invoked test method",mc.wasInvoked("test"));
  assertTrue("view name is subdir_test",mv.getViewName().equals("test"));
  assertTrue("Only one method invoked",mc.getInvokedMethods() == 1);
}
