{
  Map<String,Object> jpaProperties=new HashMap<>();
  if (getDatabasePlatform() != null) {
    jpaProperties.put(Environment.DIALECT,getDatabasePlatform());
  }
 else   if (getDatabase() != null) {
    Class<?> databaseDialectClass=determineDatabaseDialectClass(getDatabase());
    if (databaseDialectClass != null) {
      jpaProperties.put(Environment.DIALECT,databaseDialectClass.getName());
    }
  }
  if (isGenerateDdl()) {
    jpaProperties.put(Environment.HBM2DDL_AUTO,"update");
  }
  if (isShowSql()) {
    jpaProperties.put(Environment.SHOW_SQL,"true");
  }
  if (this.jpaDialect.prepareConnection) {
    jpaProperties.put("hibernate.connection.handling_mode","DELAYED_ACQUISITION_AND_HOLD");
  }
  return jpaProperties;
}
