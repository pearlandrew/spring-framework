{
  DeferredResultHandler resultHandler=createMock(DeferredResultHandler.class);
  resultHandler.handle("foo");
  replay(resultHandler);
  DeferredResult<String> deferredResult=new DeferredResult<String>("foo");
  deferredResult.init(resultHandler);
  deferredResult.set("foo");
  verify(resultHandler);
  reset(resultHandler);
  replay(resultHandler);
  deferredResult.getTimeoutHandler().run();
  verify(resultHandler);
}
