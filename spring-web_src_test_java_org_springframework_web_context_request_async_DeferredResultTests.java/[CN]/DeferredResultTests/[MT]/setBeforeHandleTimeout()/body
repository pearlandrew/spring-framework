{
  DeferredResultHandler resultHandler=createMock(DeferredResultHandler.class);
  DeferredResult deferredResult=new DeferredResult("foo");
  deferredResult.init(resultHandler);
  resultHandler.handle("foo");
  replay(resultHandler);
  deferredResult.set("foo");
  verify(resultHandler);
  reset(resultHandler);
  replay(resultHandler);
  deferredResult.handleTimeout();
  verify(resultHandler);
}
