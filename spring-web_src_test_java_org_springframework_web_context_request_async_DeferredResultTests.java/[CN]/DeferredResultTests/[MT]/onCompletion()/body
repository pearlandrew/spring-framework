{
  final StringBuilder sb=new StringBuilder();
  DeferredResult<String> result=new DeferredResult<String>();
  result.onCompletion(new Runnable(){
    public void run(){
      sb.append("completion event");
    }
  }
);
  result.getInterceptor().afterCompletion(null,null);
  assertTrue(result.isSetOrExpired());
  assertEquals("completion event",sb.toString());
}
