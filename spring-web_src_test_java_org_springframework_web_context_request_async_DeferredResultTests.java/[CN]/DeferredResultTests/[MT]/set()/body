{
  DeferredResultHandler resultHandler=createMock(DeferredResultHandler.class);
  DeferredResult<String> deferredResult=new DeferredResult<String>();
  deferredResult.init(resultHandler);
  resultHandler.handle("foo");
  replay(resultHandler);
  deferredResult.set("foo");
  verify(resultHandler);
}
