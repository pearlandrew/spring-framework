{
  CommonsPool2TargetSource targetSource=new CommonsPool2TargetSource();
  targetSource.setUseObjectEquality(true);
  targetSource.setMaxWait(1);
  prepareTargetSource(targetSource);
  Object first=targetSource.getTarget();
  Object second=targetSource.getTarget();
  assertTrue(first instanceof SerializablePerson);
  assertTrue(second instanceof SerializablePerson);
  assertEquals(first,second);
  targetSource.releaseTarget(first);
  thrown.expect(IllegalStateException.class);
  targetSource.releaseTarget(second);
}
