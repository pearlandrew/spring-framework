{
  ScriptSource script=mock(ScriptSource.class);
  final String badScript="String getMessage() { throw new IllegalArgumentException(); }";
  given(script.getScriptAsString()).willReturn(badScript);
  given(script.isModified()).willReturn(true);
  BshScriptFactory factory=new BshScriptFactory(ScriptFactoryPostProcessor.INLINE_SCRIPT_PREFIX + badScript,new Class<?>[]{Messenger.class});
  try {
    Messenger messenger=(Messenger)factory.getScriptedObject(script,new Class<?>[]{Messenger.class});
    messenger.getMessage();
    fail("Must have thrown a BshScriptUtils.BshExecutionException.");
  }
 catch (  BshScriptUtils.BshExecutionException expected) {
  }
}
