{
  MockControl mock=MockControl.createControl(ScriptSource.class);
  ScriptSource script=(ScriptSource)mock.getMock();
  script.getScriptAsString();
  final String badScript="String getMessage() { throw new IllegalArgumentException(); }";
  mock.setReturnValue(badScript);
  script.isModified();
  mock.setReturnValue(true);
  mock.replay();
  BshScriptFactory factory=new BshScriptFactory(ScriptFactoryPostProcessor.INLINE_SCRIPT_PREFIX + badScript,new Class[]{Messenger.class});
  try {
    Messenger messenger=(Messenger)factory.getScriptedObject(script,new Class[]{Messenger.class});
    messenger.getMessage();
    fail("Must have thrown a BshScriptUtils.BshExecutionException.");
  }
 catch (  BshScriptUtils.BshExecutionException expected) {
  }
  mock.verify();
}
