{
  super.setUp();
  MockitoAnnotations.initMocks(this);
  this.session=new TestSockJsSession(sessionId,new StubSockJsServiceConfig(),this.wsHandler);
  when(this.xhrHandler.getTransportType()).thenReturn(TransportType.XHR);
  when(this.xhrHandler.createSession(sessionId,this.wsHandler)).thenReturn(this.session);
  when(this.xhrSendHandler.getTransportType()).thenReturn(TransportType.XHR_SEND);
  this.service=new DefaultSockJsService(this.taskScheduler,Arrays.<TransportHandler>asList(this.xhrHandler,this.xhrSendHandler));
  this.service.setValidSockJsPrefixes(sockJsPrefix);
}
