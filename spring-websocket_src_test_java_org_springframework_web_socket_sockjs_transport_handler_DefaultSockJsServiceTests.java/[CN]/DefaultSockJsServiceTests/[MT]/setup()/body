{
  super.setUp();
  MockitoAnnotations.initMocks(this);
  Map<String,Object> attributes=Collections.emptyMap();
  this.session=new TestSockJsSession(sessionId,new StubSockJsServiceConfig(),this.wsHandler,attributes);
  when(this.xhrHandler.getTransportType()).thenReturn(TransportType.XHR);
  when(this.xhrHandler.createSession(sessionId,this.wsHandler,attributes)).thenReturn(this.session);
  when(this.xhrSendHandler.getTransportType()).thenReturn(TransportType.XHR_SEND);
  this.service=new DefaultSockJsService(this.taskScheduler,Arrays.<TransportHandler>asList(this.xhrHandler,this.xhrSendHandler));
}
