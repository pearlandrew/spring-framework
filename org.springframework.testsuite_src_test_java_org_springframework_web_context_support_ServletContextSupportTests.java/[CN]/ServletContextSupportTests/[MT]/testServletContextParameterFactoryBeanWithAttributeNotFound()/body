{
  MockServletContext sc=new MockServletContext();
  StaticWebApplicationContext wac=new StaticWebApplicationContext();
  wac.setServletContext(sc);
  MutablePropertyValues pvs=new MutablePropertyValues();
  pvs.addPropertyValue("initParamName","myParam");
  wac.registerSingleton("importedParam",ServletContextParameterFactoryBean.class,pvs);
  try {
    wac.refresh();
    fail("Should have thrown BeanCreationException");
  }
 catch (  BeanCreationException ex) {
    assertTrue(ex.getCause() instanceof IllegalStateException);
    assertTrue(ex.getCause().getMessage().indexOf("myParam") != -1);
  }
}
