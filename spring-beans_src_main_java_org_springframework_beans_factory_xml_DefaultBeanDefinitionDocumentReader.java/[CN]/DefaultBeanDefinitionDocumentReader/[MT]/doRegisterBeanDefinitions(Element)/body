{
  String profileSpec=root.getAttribute(PROFILE_ATTRIBUTE);
  if (StringUtils.hasText(profileSpec)) {
    Assert.state(this.environment != null,"Environment must be set for evaluating profiles");
    String[] specifiedProfiles=StringUtils.tokenizeToStringArray(profileSpec,BeanDefinitionParserDelegate.MULTI_VALUE_ATTRIBUTE_DELIMITERS);
    if (!this.environment.acceptsProfiles(specifiedProfiles)) {
      return;
    }
  }
  BeanDefinitionParserDelegate parent=this.delegate;
  this.delegate=createHelper(this.readerContext,root,parent);
  preProcessXml(root);
  parseBeanDefinitions(root,this.delegate);
  postProcessXml(root);
  this.delegate=parent;
}
