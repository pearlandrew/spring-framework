{
  TestController mc=new TestController();
  MockHttpServletRequest request=new MockHttpServletRequest("GET","/welcome.html");
  request.addParameter("_postProcessed","visible");
  request.addParameter("postProcessed","true");
  MockHttpServletResponse response=new MockHttpServletResponse();
  ModelAndView mv=mc.handleRequest(request,response);
  TestBean tb=(TestBean)mv.getModel().get("command");
  Errors errors=(Errors)mv.getModel().get("errors");
  assertTrue("Correct postProcessed property",tb.isPostProcessed());
  assertTrue("Correct postProcessed value",Boolean.TRUE.equals(errors.getFieldValue("postProcessed")));
  request=new MockHttpServletRequest("GET","/welcome.html");
  request.addParameter("_postProcessed","visible");
  mv=mc.handleRequest(request,response);
  tb=(TestBean)mv.getModel().get("command");
  errors=(Errors)mv.getModel().get("errors");
  assertTrue("Correct postProcessed property",!tb.isPostProcessed());
  assertTrue("Correct postProcessed value",Boolean.FALSE.equals(errors.getFieldValue("postProcessed")));
}
