{
  String commandName="attr1";
  Object command=new Object();
  ModelAndViewContainer container=new ModelAndViewContainer();
  container.addAttribute(commandName,command);
  WebDataBinder dataBinder=new WebDataBinder(command,commandName);
  WebDataBinderFactory binderFactory=mock(WebDataBinderFactory.class);
  given(binderFactory.createBinder(this.webRequest,command,commandName)).willReturn(dataBinder);
  ModelFactory modelFactory=new ModelFactory(null,binderFactory,this.sessionAttrsHandler);
  modelFactory.updateModel(this.webRequest,container);
  assertEquals(command,container.getModel().get(commandName));
  assertSame(dataBinder.getBindingResult(),container.getModel().get(bindingResultKey(commandName)));
  assertEquals(2,container.getModel().size());
}
