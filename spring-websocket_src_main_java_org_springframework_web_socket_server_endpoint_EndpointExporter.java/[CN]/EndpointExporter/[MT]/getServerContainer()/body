{
  if (isServletApiPresent) {
    try {
      Method getter=ReflectionUtils.findMethod(this.applicationContext.getClass(),"getServletContext");
      Object servletContext=getter.invoke(this.applicationContext);
      Method attrMethod=ReflectionUtils.findMethod(servletContext.getClass(),"getAttribute",String.class);
      return (ServerContainer)attrMethod.invoke(servletContext,"javax.websocket.server.ServerContainer");
    }
 catch (    Exception ex) {
      throw new IllegalStateException("Failed to get javax.websocket.server.ServerContainer via ServletContext attribute",ex);
    }
  }
  return null;
}
