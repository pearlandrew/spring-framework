{
  JobFactory jobFactory=new AdaptableJobFactory();
  TestBean tb=new TestBean("tb",99);
  JobDetail jobDetail0=new JobDetail();
  jobDetail0.setJobClass(Job.class);
  jobDetail0.setName("myJob0");
  jobDetail0.setGroup(Scheduler.DEFAULT_GROUP);
  jobDetail0.getJobDataMap().put("testBean",tb);
  assertEquals(tb,jobDetail0.getJobDataMap().get("testBean"));
  CronTrigger trigger0=new CronTrigger();
  trigger0.setName("myTrigger0");
  trigger0.setGroup(Scheduler.DEFAULT_GROUP);
  trigger0.setJobName("myJob0");
  trigger0.setJobGroup(Scheduler.DEFAULT_GROUP);
  trigger0.setStartTime(new Date());
  trigger0.setCronExpression("0/1 * * * * ?");
  TestMethodInvokingTask task1=new TestMethodInvokingTask();
  MethodInvokingJobDetailFactoryBean mijdfb=new MethodInvokingJobDetailFactoryBean();
  mijdfb.setName("myJob1");
  mijdfb.setGroup(Scheduler.DEFAULT_GROUP);
  mijdfb.setTargetObject(task1);
  mijdfb.setTargetMethod("doSomething");
  mijdfb.afterPropertiesSet();
  JobDetail jobDetail1=(JobDetail)mijdfb.getObject();
  SimpleTrigger trigger1=new SimpleTrigger();
  trigger1.setName("myTrigger1");
  trigger1.setGroup(Scheduler.DEFAULT_GROUP);
  trigger1.setJobName("myJob1");
  trigger1.setJobGroup(Scheduler.DEFAULT_GROUP);
  trigger1.setStartTime(new Date());
  trigger1.setRepeatCount(SimpleTrigger.REPEAT_INDEFINITELY);
  trigger1.setRepeatInterval(20);
  MockControl schedulerControl=MockControl.createControl(Scheduler.class);
  final Scheduler scheduler=(Scheduler)schedulerControl.getMock();
  scheduler.setJobFactory(jobFactory);
  schedulerControl.setVoidCallable();
  scheduler.getJobDetail("myJob0",Scheduler.DEFAULT_GROUP);
  schedulerControl.setReturnValue(null);
  scheduler.getJobDetail("myJob1",Scheduler.DEFAULT_GROUP);
  schedulerControl.setReturnValue(null);
  scheduler.getTrigger("myTrigger0",Scheduler.DEFAULT_GROUP);
  schedulerControl.setReturnValue(null);
  scheduler.getTrigger("myTrigger1",Scheduler.DEFAULT_GROUP);
  schedulerControl.setReturnValue(null);
  scheduler.addJob(jobDetail0,true);
  schedulerControl.setVoidCallable();
  scheduler.addJob(jobDetail1,true);
  schedulerControl.setVoidCallable();
  scheduler.scheduleJob(trigger0);
  schedulerControl.setReturnValue(new Date());
  scheduler.scheduleJob(trigger1);
  schedulerControl.setReturnValue(new Date());
  scheduler.start();
  schedulerControl.setVoidCallable();
  scheduler.shutdown(false);
  schedulerControl.setVoidCallable();
  schedulerControl.replay();
  SchedulerFactoryBean schedulerFactoryBean=new SchedulerFactoryBean(){
    protected Scheduler createScheduler(    SchedulerFactory schedulerFactory,    String schedulerName){
      return scheduler;
    }
  }
;
  schedulerFactoryBean.setJobFactory(jobFactory);
  schedulerFactoryBean.setJobDetails(new JobDetail[]{jobDetail0,jobDetail1});
  schedulerFactoryBean.setTriggers(new Trigger[]{trigger0,trigger1});
  try {
    schedulerFactoryBean.afterPropertiesSet();
    schedulerFactoryBean.start();
  }
  finally {
    schedulerFactoryBean.destroy();
  }
  schedulerControl.verify();
}
