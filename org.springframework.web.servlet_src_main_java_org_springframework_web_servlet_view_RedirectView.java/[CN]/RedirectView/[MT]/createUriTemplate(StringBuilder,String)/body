{
  return new UriTemplate(targetUrl.toString()){
    @Override protected URI encodeUri(    String uri){
      try {
        String encoded=UriUtils.encodeUri(uri,encoding);
        return new URI(encoded);
      }
 catch (      UnsupportedEncodingException ex) {
        throw new IllegalStateException(ex);
      }
catch (      URISyntaxException ex) {
        throw new IllegalArgumentException("Could not create URI from [" + uri + "]: "+ ex,ex);
      }
    }
  }
;
}
