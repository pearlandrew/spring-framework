{
  String encoding=getEncoding(request);
  StringBuilder targetUrl=new StringBuilder();
  if (this.contextRelative && getUrl().startsWith("/")) {
    targetUrl.append(UriUtils.encodePath(request.getContextPath(),encoding));
    targetUrl.append(UriUtils.encodeUri(getUrl(),encoding));
  }
 else {
    targetUrl.append(UriUtils.encodeUri(getUrl(),encoding));
  }
  if (this.exposeModelAttributes) {
    appendQueryProperties(targetUrl,model,encoding);
  }
  sendRedirect(request,response,targetUrl.toString(),this.http10Compatible);
}
