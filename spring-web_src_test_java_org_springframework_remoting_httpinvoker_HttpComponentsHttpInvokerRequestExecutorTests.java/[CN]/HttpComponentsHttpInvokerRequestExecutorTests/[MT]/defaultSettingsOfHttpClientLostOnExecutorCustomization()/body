{
  CloseableHttpClient client=HttpClientBuilder.create().setDefaultRequestConfig(RequestConfig.custom().setConnectTimeout(1234).build()).build();
  HttpComponentsHttpInvokerRequestExecutor executor=new HttpComponentsHttpInvokerRequestExecutor(client);
  HttpInvokerClientConfiguration config=mockHttpInvokerClientConfiguration("http://fake-service");
  HttpPost httpPost=executor.createHttpPost(config);
  assertNull("No custom config should be set with a custom HttpClient",httpPost.getConfig());
  executor.setConnectionRequestTimeout(4567);
  HttpPost httpPost2=executor.createHttpPost(config);
  assertNotNull(httpPost2.getConfig());
  assertEquals(4567,httpPost2.getConfig().getConnectionRequestTimeout());
  assertEquals(-1,httpPost2.getConfig().getConnectTimeout());
}
