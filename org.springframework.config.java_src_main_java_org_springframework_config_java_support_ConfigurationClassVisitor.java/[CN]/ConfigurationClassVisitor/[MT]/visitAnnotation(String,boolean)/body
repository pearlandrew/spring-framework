{
  String annoTypeName=AsmUtils.convertTypeDescriptorToClassName(annoTypeDesc);
  if (Configuration.class.getName().equals(annoTypeName)) {
    Configuration mutableConfiguration=createMutableAnnotation(Configuration.class);
    configClass.setMetadata(mutableConfiguration);
    return new MutableAnnotationVisitor(mutableConfiguration,classLoader);
  }
  if (Import.class.getName().equals(annoTypeName)) {
    ImportStack importStack=ImportStackHolder.getImportStack();
    if (importStack.contains(configClass))     throw new CircularImportException(configClass,importStack);
    importStack.push(configClass);
    return new ImportAnnotationVisitor(model,classLoader);
  }
  Class<? extends Annotation> annoType=loadToolingSafeClass(annoTypeName,classLoader);
  if (annoType == null)   return super.visitAnnotation(annoTypeDesc,visible);
  Annotation pluginAnno=createMutableAnnotation(annoType);
  configClass.addPluginAnnotation(pluginAnno);
  return new MutableAnnotationVisitor(pluginAnno,classLoader);
}
