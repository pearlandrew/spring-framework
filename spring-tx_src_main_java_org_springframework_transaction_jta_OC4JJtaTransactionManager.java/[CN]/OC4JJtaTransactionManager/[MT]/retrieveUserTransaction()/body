{
  try {
    Class transactionUtilityClass=getClass().getClassLoader().loadClass(TRANSACTION_UTILITY_CLASS_NAME);
    Method getInstanceMethod=transactionUtilityClass.getMethod("getInstance");
    Object transactionUtility=getInstanceMethod.invoke(null);
    logger.debug("Retrieving JTA UserTransaction from OC4J TransactionUtility");
    Method getUserTransactionMethod=transactionUtility.getClass().getMethod("getOC4JUserTransaction");
    return (UserTransaction)getUserTransactionMethod.invoke(transactionUtility);
  }
 catch (  ClassNotFoundException ex) {
    logger.debug("Could not find OC4J 10.1.3.2 TransactionUtility: " + ex);
    return null;
  }
catch (  InvocationTargetException ex) {
    throw new TransactionSystemException("OC4J's TransactionUtility.getOC4JUserTransaction() method failed",ex.getTargetException());
  }
catch (  Exception ex) {
    throw new TransactionSystemException("Could not invoke OC4J's TransactionUtility.getOC4JUserTransaction() method",ex);
  }
}
