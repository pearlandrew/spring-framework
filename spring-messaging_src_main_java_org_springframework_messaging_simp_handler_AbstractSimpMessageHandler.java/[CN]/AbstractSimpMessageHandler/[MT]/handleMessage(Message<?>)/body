{
  SimpMessageHeaderAccessor headers=SimpMessageHeaderAccessor.wrap(message);
  SimpMessageType messageType=headers.getMessageType();
  if (!canHandle(message,messageType)) {
    return;
  }
  if (SimpMessageType.MESSAGE.equals(messageType)) {
    handlePublish(message);
  }
 else   if (SimpMessageType.SUBSCRIBE.equals(messageType)) {
    handleSubscribe(message);
  }
 else   if (SimpMessageType.UNSUBSCRIBE.equals(messageType)) {
    handleUnsubscribe(message);
  }
 else   if (SimpMessageType.CONNECT.equals(messageType)) {
    handleConnect(message);
  }
 else   if (SimpMessageType.DISCONNECT.equals(messageType)) {
    handleDisconnect(message);
  }
 else {
    handleOther(message);
  }
}
