{
  HttpHeaders headers=exchange.getResponse().getHeaders();
  long length=resource.contentLength();
  headers.setContentLength(length);
  if (mediaType != null) {
    headers.setContentType(mediaType);
  }
  if (resource instanceof EncodedResource) {
    headers.set(HttpHeaders.CONTENT_ENCODING,((EncodedResource)resource).getContentEncoding());
  }
  if (resource instanceof VersionedResource) {
    headers.setETag("\"" + ((VersionedResource)resource).getVersion() + "\"");
  }
  headers.set(HttpHeaders.ACCEPT_RANGES,"bytes");
}
