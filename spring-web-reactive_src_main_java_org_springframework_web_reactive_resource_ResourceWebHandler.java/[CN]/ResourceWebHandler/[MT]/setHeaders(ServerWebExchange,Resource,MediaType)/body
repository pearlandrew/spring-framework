{
  HttpHeaders headers=exchange.getResponse().getHeaders();
  long length=resource.contentLength();
  headers.setContentLength(length);
  if (mediaType != null) {
    headers.setContentType(mediaType);
  }
  if (resource instanceof ResolvedResource) {
    HttpHeaders resourceHeaders=((ResolvedResource)resource).getResponseHeaders();
    exchange.getResponse().getHeaders().putAll(resourceHeaders);
  }
  headers.set(HttpHeaders.ACCEPT_RANGES,"bytes");
}
