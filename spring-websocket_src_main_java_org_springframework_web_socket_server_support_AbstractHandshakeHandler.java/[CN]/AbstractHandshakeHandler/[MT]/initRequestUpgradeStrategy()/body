{
  String className;
  if (tomcatWsPresent) {
    className="org.springframework.web.socket.server.standard.TomcatRequestUpgradeStrategy";
  }
 else   if (jettyWsPresent) {
    className="org.springframework.web.socket.server.jetty.JettyRequestUpgradeStrategy";
  }
 else   if (undertowWsPresent) {
    className="org.springframework.web.socket.server.standard.UndertowRequestUpgradeStrategy";
  }
 else   if (glassFishWsPresent) {
    className="org.springframework.web.socket.server.standard.GlassFishRequestUpgradeStrategy";
  }
 else   if (webLogicWsPresent) {
    className="org.springframework.web.socket.server.standard.WebLogicRequestUpgradeStrategy";
  }
 else {
    throw new IllegalStateException("No suitable default RequestUpgradeStrategy found");
  }
  try {
    Class<?> clazz=ClassUtils.forName(className,AbstractHandshakeHandler.class.getClassLoader());
    return (RequestUpgradeStrategy)clazz.newInstance();
  }
 catch (  Throwable ex) {
    throw new IllegalStateException("Failed to instantiate RequestUpgradeStrategy: " + className,ex);
  }
}
