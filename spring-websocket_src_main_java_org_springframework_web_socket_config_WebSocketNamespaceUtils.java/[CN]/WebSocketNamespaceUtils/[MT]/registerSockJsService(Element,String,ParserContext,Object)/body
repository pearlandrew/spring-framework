{
  Element sockJsElement=DomUtils.getChildElementByTagName(element,"sockjs");
  if (sockJsElement != null) {
    Element handshakeHandlerElement=DomUtils.getChildElementByTagName(element,"handshake-handler");
    RootBeanDefinition sockJsServiceDef=new RootBeanDefinition(DefaultSockJsService.class);
    sockJsServiceDef.setSource(source);
    Object scheduler;
    String customTaskSchedulerName=sockJsElement.getAttribute("scheduler");
    if (!customTaskSchedulerName.isEmpty()) {
      scheduler=new RuntimeBeanReference(customTaskSchedulerName);
    }
 else {
      scheduler=registerSockJsTaskScheduler(sockJsSchedulerName,parserContext,source);
    }
    sockJsServiceDef.getConstructorArgumentValues().addIndexedArgumentValue(0,scheduler);
    Element transportHandlersElement=DomUtils.getChildElementByTagName(sockJsElement,"transport-handlers");
    if (transportHandlersElement != null) {
      String registerDefaultsAttribute=transportHandlersElement.getAttribute("register-defaults");
      if (registerDefaultsAttribute.equals("false")) {
        sockJsServiceDef.setBeanClass(TransportHandlingSockJsService.class);
      }
      ManagedList<?> transportHandlersList=parseBeanSubElements(transportHandlersElement,parserContext);
      sockJsServiceDef.getConstructorArgumentValues().addIndexedArgumentValue(1,transportHandlersList);
    }
 else     if (handshakeHandlerElement != null) {
      RuntimeBeanReference handshakeHandlerRef=new RuntimeBeanReference(handshakeHandlerElement.getAttribute("ref"));
      RootBeanDefinition wsTransportHandler=new RootBeanDefinition(WebSocketTransportHandler.class);
      wsTransportHandler.setSource(source);
      wsTransportHandler.getConstructorArgumentValues().addIndexedArgumentValue(0,handshakeHandlerRef);
      sockJsServiceDef.getConstructorArgumentValues().addIndexedArgumentValue(1,wsTransportHandler);
    }
    String attrValue=sockJsElement.getAttribute("name");
    if (!attrValue.isEmpty()) {
      sockJsServiceDef.getPropertyValues().add("name",attrValue);
    }
    attrValue=sockJsElement.getAttribute("websocket-enabled");
    if (!attrValue.isEmpty()) {
      sockJsServiceDef.getPropertyValues().add("webSocketEnabled",Boolean.valueOf(attrValue));
    }
    attrValue=sockJsElement.getAttribute("session-cookie-needed");
    if (!attrValue.isEmpty()) {
      sockJsServiceDef.getPropertyValues().add("sessionCookieNeeded",Boolean.valueOf(attrValue));
    }
    attrValue=sockJsElement.getAttribute("stream-bytes-limit");
    if (!attrValue.isEmpty()) {
      sockJsServiceDef.getPropertyValues().add("streamBytesLimit",Integer.valueOf(attrValue));
    }
    attrValue=sockJsElement.getAttribute("disconnect-delay");
    if (!attrValue.isEmpty()) {
      sockJsServiceDef.getPropertyValues().add("disconnectDelay",Long.valueOf(attrValue));
    }
    attrValue=sockJsElement.getAttribute("message-cache-size");
    if (!attrValue.isEmpty()) {
      sockJsServiceDef.getPropertyValues().add("httpMessageCacheSize",Integer.valueOf(attrValue));
    }
    attrValue=sockJsElement.getAttribute("heartbeat-time");
    if (!attrValue.isEmpty()) {
      sockJsServiceDef.getPropertyValues().add("heartbeatTime",Long.valueOf(attrValue));
    }
    sockJsServiceDef.setRole(BeanDefinition.ROLE_INFRASTRUCTURE);
    String sockJsServiceName=parserContext.getReaderContext().registerWithGeneratedName(sockJsServiceDef);
    return new RuntimeBeanReference(sockJsServiceName);
  }
  return null;
}
