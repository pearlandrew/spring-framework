{
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.setScheme("http");
  request.setServerName("localhost");
  request.setServerPort(80);
  request.setRequestURI("/mvc-showcase");
  request.addHeader("X-Forwarded-Proto","https");
  request.addHeader("X-Forwarded-Host","84.198.58.199");
  request.addHeader("X-Forwarded-Port","443");
  request.addHeader("foo","bar");
  MockFilterChain chain=new MockFilterChain(new HttpServlet(){
  }
);
  this.filter.doFilter(request,new MockHttpServletResponse(),chain);
  HttpServletRequest actual=(HttpServletRequest)chain.getRequest();
  assertEquals("https://84.198.58.199/mvc-showcase",actual.getRequestURL().toString());
  assertEquals("https",actual.getScheme());
  assertEquals("84.198.58.199",actual.getServerName());
  assertEquals(443,actual.getServerPort());
  assertTrue(actual.isSecure());
  assertNull(actual.getHeader("X-Forwarded-Proto"));
  assertNull(actual.getHeader("X-Forwarded-Host"));
  assertNull(actual.getHeader("X-Forwarded-Port"));
  assertEquals("bar",actual.getHeader("foo"));
}
