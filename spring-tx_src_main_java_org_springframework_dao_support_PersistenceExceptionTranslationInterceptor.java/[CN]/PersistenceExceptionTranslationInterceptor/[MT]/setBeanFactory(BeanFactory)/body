{
  if (this.persistenceExceptionTranslator == null) {
    if (!(beanFactory instanceof ListableBeanFactory)) {
      throw new IllegalArgumentException("Cannot use PersistenceExceptionTranslator autodetection without ListableBeanFactory");
    }
    this.persistenceExceptionTranslator=detectPersistenceExceptionTranslators((ListableBeanFactory)beanFactory);
  }
}
