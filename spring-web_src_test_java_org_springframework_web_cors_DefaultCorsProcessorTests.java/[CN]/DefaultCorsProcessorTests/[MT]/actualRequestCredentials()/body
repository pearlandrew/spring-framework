{
  this.request.setMethod(HttpMethod.GET.name());
  this.request.addHeader(HttpHeaders.ORIGIN,"http://domain2.com");
  this.conf.addAllowedOrigin("http://domain1.com");
  this.conf.addAllowedOrigin("http://domain2.com");
  this.conf.addAllowedOrigin("http://domain3.com");
  this.conf.setAllowCredentials(true);
  this.processor.processRequest(this.conf,request,response);
  assertTrue(this.response.containsHeader(HttpHeaders.ACCESS_CONTROL_ALLOW_ORIGIN));
  assertEquals("http://domain2.com",response.getHeader(HttpHeaders.ACCESS_CONTROL_ALLOW_ORIGIN));
  assertTrue(this.response.containsHeader(HttpHeaders.ACCESS_CONTROL_ALLOW_CREDENTIALS));
  assertEquals("true",response.getHeader(HttpHeaders.ACCESS_CONTROL_ALLOW_CREDENTIALS));
  assertEquals(HttpServletResponse.SC_OK,response.getStatus());
}
