{
synchronized (classCache) {
    for (Iterator<Class> it=classCache.keySet().iterator(); it.hasNext(); ) {
      Class beanClass=it.next();
      if (isUnderneathClassLoader(beanClass.getClassLoader(),classLoader)) {
        it.remove();
      }
    }
  }
synchronized (acceptedClassLoaders) {
    for (Iterator<ClassLoader> it=acceptedClassLoaders.iterator(); it.hasNext(); ) {
      ClassLoader registeredLoader=it.next();
      if (isUnderneathClassLoader(registeredLoader,classLoader)) {
        it.remove();
      }
    }
  }
}
