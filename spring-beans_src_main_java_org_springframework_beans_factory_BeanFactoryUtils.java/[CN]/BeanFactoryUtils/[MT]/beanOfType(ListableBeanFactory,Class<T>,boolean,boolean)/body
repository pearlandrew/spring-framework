{
  Assert.notNull(lbf,"ListableBeanFactory must not be null");
  Map<String,T> beansOfType=lbf.getBeansOfType(type,includeNonSingletons,allowEagerInit);
  if (beansOfType.size() == 1) {
    return beansOfType.values().iterator().next();
  }
 else {
    throw new NoSuchBeanDefinitionException(type,"expected single bean but found " + beansOfType.size());
  }
}
