{
  MediaType mediaType=getMediaType(resource);
  if (mediaType != null) {
    response.setContentType(mediaType.toString());
  }
  long length=resource.contentLength();
  if (length > Integer.MAX_VALUE) {
    throw new IOException("Resource content too long (beyond Integer.MAX_VALUE): " + resource);
  }
  response.setContentLength((int)length);
  FileCopyUtils.copy(resource.getInputStream(),response.getOutputStream());
}
