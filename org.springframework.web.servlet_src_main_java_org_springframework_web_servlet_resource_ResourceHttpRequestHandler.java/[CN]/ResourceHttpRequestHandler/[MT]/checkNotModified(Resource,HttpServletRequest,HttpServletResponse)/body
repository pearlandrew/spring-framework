{
  long ifModifiedSince=request.getDateHeader("If-Modified-Since");
  long lastModified=resource.lastModified();
  boolean notModified=ifModifiedSince >= (lastModified / 1000 * 1000);
  if (notModified) {
    response.setStatus(HttpServletResponse.SC_NOT_MODIFIED);
  }
 else {
    response.setDateHeader("Last-Modified",lastModified);
  }
  return notModified;
}
