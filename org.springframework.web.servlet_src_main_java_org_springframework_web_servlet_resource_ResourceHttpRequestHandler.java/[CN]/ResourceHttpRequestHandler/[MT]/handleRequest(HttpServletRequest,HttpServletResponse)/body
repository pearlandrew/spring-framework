{
  checkAndPrepare(request,response,true);
  Resource resource=getResource(request);
  if (resource == null) {
    response.sendError(HttpServletResponse.SC_NOT_FOUND);
    return;
  }
  setHeaders(resource,response);
  if (new ServletWebRequest(request,response).checkNotModified(resource.lastModified()) || METHOD_HEAD.equals(request.getMethod())) {
    return;
  }
  writeContent(resource,response);
}
