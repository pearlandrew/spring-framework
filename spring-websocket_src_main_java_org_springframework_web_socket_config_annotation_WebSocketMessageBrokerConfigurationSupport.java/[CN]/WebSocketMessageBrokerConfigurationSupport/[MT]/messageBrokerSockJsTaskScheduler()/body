{
  @SuppressWarnings("serial") ThreadPoolTaskScheduler scheduler=new ThreadPoolTaskScheduler(){
    @Override protected ExecutorService initializeExecutor(    ThreadFactory factory,    RejectedExecutionHandler handler){
      ExecutorService service=super.initializeExecutor(factory,handler);
      ((ScheduledThreadPoolExecutor)service).setRemoveOnCancelPolicy(true);
      return service;
    }
  }
;
  scheduler.setPoolSize(Runtime.getRuntime().availableProcessors());
  scheduler.setThreadNamePrefix("MessageBrokerSockJS-");
  return scheduler;
}
