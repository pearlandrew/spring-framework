{
  FlashMap[] flashMapArray=new FlashMap[5];
  flashMapArray[0]=new FlashMap("key0","_flashKey");
  flashMapArray[1]=new FlashMap("key1","_flashKey");
  flashMapArray[2]=new FlashMap("key2","_flashKey");
  flashMapArray[3]=new FlashMap("key3","_flashKey");
  flashMapArray[4]=new FlashMap("key4","_flashKey");
  Map<String,FlashMap> allFlashMaps=new HashMap<String,FlashMap>();
  for (  FlashMap flashMap : flashMapArray) {
    allFlashMaps.put(flashMap.getKey(),flashMap);
  }
  flashMapArray[1].startExpirationPeriod(0);
  flashMapArray[3].startExpirationPeriod(0);
  Thread.currentThread().sleep(5);
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.getSession().setAttribute(DefaultFlashMapManager.FLASH_MAPS_SESSION_ATTRIBUTE,allFlashMaps);
  request.setParameter("_flashKey","key0");
  this.flashMapManager.requestStarted(request);
  assertEquals(2,allFlashMaps.size());
  assertNotNull(allFlashMaps.get("key2"));
  assertNotNull(allFlashMaps.get("key4"));
}
