{
  String acceptHeader=request.getHeaders().getFirst(HttpHeaders.CONTENT_TYPE);
  List<MediaType> mediaTypes=MediaType.parseMediaTypes(acceptHeader);
  MediaType.sortBySpecificityAndQuality(mediaTypes);
  return (mediaTypes.size() > 0 ? mediaTypes.get(0) : MediaType.TEXT_PLAIN);
}
