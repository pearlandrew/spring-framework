{
  PubSubHeaderAccesssor headers=PubSubHeaderAccesssor.wrap(message);
  Assert.notNull(headers.getSubscriptionId(),"No subscription id: " + message);
  PubSubHeaderAccesssor returnHeaders=PubSubHeaderAccesssor.wrap(returnMessage);
  returnHeaders.setSessionId(headers.getSessionId());
  returnHeaders.setSubscriptionId(headers.getSubscriptionId());
  if (returnHeaders.getDestination() == null) {
    returnHeaders.setDestination(headers.getDestination());
  }
  return createMessage(returnMessage.getPayload(),returnHeaders.toHeaders());
}
