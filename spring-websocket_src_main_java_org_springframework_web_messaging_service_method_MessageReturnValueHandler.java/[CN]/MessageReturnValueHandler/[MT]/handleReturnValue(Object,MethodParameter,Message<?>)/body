{
  Message<?> returnMessage=(Message<?>)returnValue;
  if (returnMessage == null) {
    return;
  }
  PubSubHeaders inHeaders=new PubSubHeaders(message.getHeaders(),true);
  String sessionId=inHeaders.getSessionId();
  String subscriptionId=inHeaders.getSubscriptionId();
  Assert.notNull(subscriptionId,"No subscription id: " + message);
  PubSubHeaders outHeaders=new PubSubHeaders(returnMessage.getHeaders(),false);
  outHeaders.setSessionId(sessionId);
  outHeaders.setSubscriptionId(subscriptionId);
  returnMessage=new GenericMessage<Object>(returnMessage.getPayload(),outHeaders.getMessageHeaders());
  this.eventBus.send(AbstractMessageService.SERVER_TO_CLIENT_MESSAGE_KEY,returnMessage);
}
