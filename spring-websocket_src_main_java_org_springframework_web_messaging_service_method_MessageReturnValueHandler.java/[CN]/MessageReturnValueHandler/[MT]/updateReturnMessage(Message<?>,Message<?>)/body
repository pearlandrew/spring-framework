{
  PubSubHeaders headers=PubSubHeaders.fromMessageHeaders(message.getHeaders());
  String sessionId=headers.getSessionId();
  String subscriptionId=headers.getSubscriptionId();
  Assert.notNull(subscriptionId,"No subscription id: " + message);
  PubSubHeaders returnHeaders=PubSubHeaders.fromMessageHeaders(returnMessage.getHeaders());
  returnHeaders.setSessionId(sessionId);
  returnHeaders.setSubscriptionId(subscriptionId);
  Object payload=returnMessage.getPayload();
  return MessageBuilder.fromPayloadAndHeaders(payload,returnHeaders.toMessageHeaders()).build();
}
