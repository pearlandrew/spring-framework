{
  PubSubHeaders headers=PubSubHeaders.fromMessageHeaders(message.getHeaders());
  String sessionId=headers.getSessionId();
  String subscriptionId=headers.getSubscriptionId();
  Assert.notNull(subscriptionId,"No subscription id: " + message);
  PubSubHeaders returnHeaders=PubSubHeaders.fromMessageHeaders(returnMessage.getHeaders());
  returnHeaders.setSessionId(sessionId);
  returnHeaders.setSubscriptionId(subscriptionId);
  if (returnHeaders.getDestination() == null) {
    returnHeaders.setDestination(headers.getDestination());
  }
  Object payload=returnMessage.getPayload();
  return createMessage(returnHeaders,payload);
}
