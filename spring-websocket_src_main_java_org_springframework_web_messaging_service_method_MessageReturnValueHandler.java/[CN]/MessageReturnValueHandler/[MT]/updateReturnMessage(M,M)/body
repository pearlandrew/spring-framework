{
  PubSubHeaderAccesssor headers=PubSubHeaderAccesssor.wrap(message);
  String sessionId=headers.getSessionId();
  String subscriptionId=headers.getSubscriptionId();
  Assert.notNull(subscriptionId,"No subscription id: " + message);
  PubSubHeaderAccesssor returnHeaders=PubSubHeaderAccesssor.wrap(returnMessage);
  returnHeaders.setSessionId(sessionId);
  returnHeaders.setSubscriptionId(subscriptionId);
  if (returnHeaders.getDestination() == null) {
    returnHeaders.setDestination(headers.getDestination());
  }
  return createMessage(returnHeaders,returnMessage.getPayload());
}
