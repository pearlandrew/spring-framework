{
  this.complete=!this.isRollback();
  if (this.transactionManager == null) {
    this.logger.info("No transaction manager set: test will NOT run within a transaction");
  }
 else   if (this.transactionDefinition == null) {
    this.logger.info("No transaction definition set: test will NOT run within a transaction");
  }
 else {
    onSetUpBeforeTransaction();
    startNewTransaction();
    try {
      onSetUpInTransaction();
    }
 catch (    final Exception ex) {
      endTransaction();
      throw ex;
    }
  }
}
