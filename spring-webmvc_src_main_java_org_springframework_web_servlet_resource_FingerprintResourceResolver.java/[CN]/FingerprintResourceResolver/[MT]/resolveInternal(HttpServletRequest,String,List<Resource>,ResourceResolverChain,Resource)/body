{
  if (resolved != null) {
    return resolved;
  }
  String hash=extractHash(path);
  if (StringUtils.isEmpty(hash)) {
    return null;
  }
  String simplePath=StringUtils.delete(path,"-" + hash);
  Resource baseResource=chain.next(this).resolve(request,simplePath,locations,chain);
  if (baseResource == null) {
    logger.debug("Failed to find resource after removing fingerprint: " + simplePath);
    return null;
  }
  String candidateHash=calculateHash(baseResource);
  if (candidateHash.equals(hash)) {
    logger.debug("Fingerprint match succeeded.");
    return baseResource;
  }
 else {
    logger.debug("Potential resource found, but fingerprint doesn't match.");
    return null;
  }
}
