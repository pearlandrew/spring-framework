{
  String baseUrl=chain.resolveUrlPath(resourceUrlPath,locations);
  if (StringUtils.hasText(baseUrl)) {
    if (logger.isTraceEnabled()) {
      logger.trace("Getting the original resource to calculate hash");
    }
    Resource original=chain.resolveResource(null,resourceUrlPath,locations);
    String hash=calculateHash(original);
    if (logger.isTraceEnabled()) {
      logger.trace("Calculated hash=" + hash);
    }
    String baseFilename=StringUtils.stripFilenameExtension(baseUrl);
    String extension=StringUtils.getFilenameExtension(baseUrl);
    return baseFilename + "-" + hash+ "."+ extension;
  }
  return baseUrl;
}
