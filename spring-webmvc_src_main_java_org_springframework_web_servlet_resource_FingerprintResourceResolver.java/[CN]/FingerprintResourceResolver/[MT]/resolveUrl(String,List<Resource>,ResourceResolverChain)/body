{
  String baseUrl=chain.next(this).resolveUrl(resourcePath,locations,chain);
  if (StringUtils.hasText(baseUrl)) {
    Resource original=chain.next(this).resolve(null,resourcePath,locations,chain);
    String hash=calculateHash(original);
    return StringUtils.stripFilenameExtension(baseUrl) + "-" + hash+ "."+ StringUtils.getFilenameExtension(baseUrl);
  }
  return baseUrl;
}
