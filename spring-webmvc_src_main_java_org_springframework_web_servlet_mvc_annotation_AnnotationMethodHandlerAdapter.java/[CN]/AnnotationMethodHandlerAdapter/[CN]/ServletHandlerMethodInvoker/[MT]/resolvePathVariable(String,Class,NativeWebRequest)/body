{
  HttpServletRequest servletRequest=webRequest.getNativeRequest(HttpServletRequest.class);
  Map<String,String> uriTemplateVariables=(Map<String,String>)servletRequest.getAttribute(HandlerMapping.URI_TEMPLATE_VARIABLES_ATTRIBUTE);
  if (uriTemplateVariables == null || !uriTemplateVariables.containsKey(pathVarName)) {
    throw new IllegalStateException("Could not find @PathVariable [" + pathVarName + "] in @RequestMapping");
  }
  return uriTemplateVariables.get(pathVarName);
}
