{
  Assert.notNull(type,"The Class of the object to format is required");
  Formatter formatter=findFormatter(type);
  if (formatter != null) {
    Class<?> formattedObjectType=getFormattedObjectType(formatter.getClass());
    if (type.isAssignableFrom(formattedObjectType)) {
      return formatter;
    }
 else {
      return new ConvertingFormatter(type,formattedObjectType,formatter);
    }
  }
 else {
    return getDefaultFormatter(type);
  }
}
