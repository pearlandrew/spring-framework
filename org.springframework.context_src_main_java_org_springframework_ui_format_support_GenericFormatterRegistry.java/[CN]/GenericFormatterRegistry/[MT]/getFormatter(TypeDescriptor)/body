{
  Assert.notNull(type,"TypeDescriptor is required");
  FormatterHolder holder=findFormatterHolderForAnnotatedProperty(type.getAnnotations());
  if (holder == null) {
    holder=findFormatterHolderForType(type.getType());
  }
  if (holder == null) {
    holder=getDefaultFormatterHolder(type);
  }
  if (holder == null) {
    return null;
  }
  Class formattedObjectType=holder.getFormattedObjectType();
  if (formattedObjectType != null && !type.getType().isAssignableFrom(formattedObjectType)) {
    if (this.conversionService != null) {
      return new ConvertingFormatter(type,holder);
    }
 else {
      return null;
    }
  }
 else {
    return holder.getFormatter();
  }
}
