{
  Class<?>[] typeArgs=GenericTypeResolver.resolveTypeArguments(factory.getClass(),AnnotationFormatterFactory.class);
  if (typeArgs == null || typeArgs.length != 2) {
    throw new IllegalArgumentException("Unable to extract parameterized type arguments from AnnotationFormatterFactory [" + factory.getClass().getName() + "]; does the factory parameterize the <A> and <T> generic types?");
  }
  this.annotationFormatters.put(typeArgs[0],new AnnotationFormatterFactoryHolder(typeArgs[1],factory));
}
