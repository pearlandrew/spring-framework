{
  try {
    EntityManagerFactoryUtils.doGetTransactionalEntityManager(null,null);
    fail("expected exception");
  }
 catch (  IllegalArgumentException ex) {
  }
  MockControl mockControl=MockControl.createControl(EntityManagerFactory.class);
  EntityManagerFactory factory=(EntityManagerFactory)mockControl.getMock();
  mockControl.replay();
  assertNull(EntityManagerFactoryUtils.doGetTransactionalEntityManager(factory,null));
  mockControl.verify();
  assertTrue(TransactionSynchronizationManager.getResourceMap().isEmpty());
}
