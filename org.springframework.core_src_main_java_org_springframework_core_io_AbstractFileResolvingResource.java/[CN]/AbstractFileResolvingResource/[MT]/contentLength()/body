{
  URL url=getURL();
  if (ResourceUtils.isFileURL(url)) {
    return getFile().length();
  }
 else {
    URLConnection con=url.openConnection();
    ResourceUtils.useCachesIfNecessary(con);
    if (con instanceof HttpURLConnection) {
      ((HttpURLConnection)con).setRequestMethod("HEAD");
    }
    return con.getContentLength();
  }
}
