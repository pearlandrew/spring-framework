{
  VelocityView vv=new VelocityView(){
    @Override protected void mergeTemplate(    Template template,    Context context,    HttpServletResponse response){
      assertTrue(context.get(VelocityView.SPRING_MACRO_REQUEST_CONTEXT_ATTRIBUTE) instanceof RequestContext);
      RequestContext rc=(RequestContext)context.get(VelocityView.SPRING_MACRO_REQUEST_CONTEXT_ATTRIBUTE);
      BindStatus status=rc.getBindStatus("tb.name");
      assertEquals("name",status.getExpression());
      assertEquals("juergen",status.getValue());
    }
  }
;
  vv.setUrl(TEMPLATE_FILE);
  vv.setApplicationContext(wac);
  vv.setExposeSpringMacroHelpers(true);
  Map<String,Object> model=new HashMap<String,Object>();
  model.put("tb",new TestBean("juergen",99));
  vv.render(model,request,response);
}
