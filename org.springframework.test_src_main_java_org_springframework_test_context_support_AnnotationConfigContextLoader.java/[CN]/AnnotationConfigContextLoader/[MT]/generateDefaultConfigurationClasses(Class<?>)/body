{
  Assert.notNull(declaringClass,"Declaring class must not be null");
  String suffix=getConfigurationClassNameSuffix();
  Assert.hasText(suffix,"Configuration class name suffix must not be empty");
  String className=declaringClass.getName() + suffix;
  List<Class<?>> configClasses=new ArrayList<Class<?>>();
  try {
    Class<?> configClass=(Class<?>)getClass().getClassLoader().loadClass(className);
    if (configClass.isAnnotationPresent(Configuration.class)) {
      configClasses.add(configClass);
    }
 else {
      logger.warn(String.format("Found candidate configuration class [%s], but it is not annotated with @Configuration.",className));
    }
  }
 catch (  ClassNotFoundException e) {
    logger.warn(String.format("Cannot load @Configuration class with generated class name [%s]: class not found",className));
  }
  return configClasses.toArray(new Class<?>[configClasses.size()]);
}
