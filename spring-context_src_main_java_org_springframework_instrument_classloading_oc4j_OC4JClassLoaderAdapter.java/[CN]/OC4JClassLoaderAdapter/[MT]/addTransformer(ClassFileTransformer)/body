{
  Assert.notNull(transformer,"ClassFileTransformer must not be null");
  try {
    OC4JClassPreprocessorAdapter adapter=new OC4JClassPreprocessorAdapter(transformer);
    Object adapterInstance=Proxy.newProxyInstance(this.processorClass.getClassLoader(),new Class[]{this.processorClass},adapter);
    this.addTransformer.invoke(null,new Object[]{this.classLoader,adapterInstance});
  }
 catch (  InvocationTargetException ex) {
    throw new IllegalStateException("OC4J addPreprocessor method threw exception",ex.getCause());
  }
catch (  Exception ex) {
    throw new IllegalStateException("Could not invoke OC4J addPreprocessor method",ex);
  }
}
