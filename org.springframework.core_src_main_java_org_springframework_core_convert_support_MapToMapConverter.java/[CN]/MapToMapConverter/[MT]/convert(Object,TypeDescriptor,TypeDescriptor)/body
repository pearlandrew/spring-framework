{
  if (source == null) {
    return null;
  }
  Map<Object,Object> sourceMap=(Map<Object,Object>)source;
  Map<Object,Object> targetMap=CollectionFactory.createMap(targetType.getType(),sourceMap.size());
  TypeDescriptor targetKeyType=targetType.getMapKeyTypeDescriptor();
  TypeDescriptor targetValueType=targetType.getMapValueTypeDescriptor();
  if (Object.class.equals(targetKeyType.getType()) && Object.class.equals(targetValueType.getType())) {
    for (    Map.Entry<Object,Object> entry : sourceMap.entrySet()) {
      targetMap.put(entry.getKey(),entry.getValue());
    }
  }
 else {
    for (    Map.Entry<Object,Object> entry : sourceMap.entrySet()) {
      Object sourceKey=entry.getKey();
      Object sourceValue=entry.getValue();
      Object targetKey=this.conversionService.convert(sourceKey,sourceType.getMapKeyTypeDescriptor().applyIndexedObject(sourceKey),targetType.getMapKeyTypeDescriptor());
      Object targetValue=this.conversionService.convert(sourceValue,sourceType.getMapValueTypeDescriptor().applyIndexedObject(sourceValue),targetType.getMapValueTypeDescriptor());
      targetMap.put(targetKey,targetValue);
    }
  }
  return targetMap;
}
