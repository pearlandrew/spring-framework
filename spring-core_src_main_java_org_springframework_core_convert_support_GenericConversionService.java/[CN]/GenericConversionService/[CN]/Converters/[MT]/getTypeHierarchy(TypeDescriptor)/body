{
  if (type.isPrimitive()) {
    type=TypeDescriptor.valueOf(type.getObjectType());
  }
  Set<TypeDescriptor> typeHierarchy=new LinkedHashSet<TypeDescriptor>();
  collectTypeHierarchy(typeHierarchy,type);
  if (type.isArray()) {
    typeHierarchy.add(TypeDescriptor.valueOf(Object[].class));
  }
  typeHierarchy.add(TypeDescriptor.valueOf(Object.class));
  return new ArrayList<TypeDescriptor>(typeHierarchy);
}
