{
  String[] tokenized=tokenizePath(pattern);
  int specialCharIdx=-1;
  specialCharIdx=firstSpecialCharIdx(pattern.indexOf('*'),specialCharIdx);
  specialCharIdx=firstSpecialCharIdx(pattern.indexOf('?'),specialCharIdx);
  specialCharIdx=firstSpecialCharIdx(pattern.indexOf('{'),specialCharIdx);
  final String prefix;
  if (specialCharIdx != -1) {
    prefix=pattern.substring(0,specialCharIdx);
  }
 else {
    prefix=pattern;
  }
  return new PreprocessedPattern(tokenized,prefix.isEmpty() ? null : prefix);
}
