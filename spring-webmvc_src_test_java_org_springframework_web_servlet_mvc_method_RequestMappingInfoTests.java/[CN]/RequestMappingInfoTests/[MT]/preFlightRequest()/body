{
  MockHttpServletRequest request=new MockHttpServletRequest("OPTIONS","/foo");
  request.addHeader(HttpHeaders.ORIGIN,"http://domain.com");
  request.addHeader(HttpHeaders.ACCESS_CONTROL_REQUEST_METHOD,"POST");
  RequestMappingInfo info=new RequestMappingInfo(new PatternsRequestCondition("/foo"),new RequestMethodsRequestCondition(RequestMethod.POST),null,null,null,null,null);
  RequestMappingInfo match=info.getMatchingCondition(request);
  assertNotNull(match);
  info=new RequestMappingInfo(new PatternsRequestCondition("/foo"),new RequestMethodsRequestCondition(RequestMethod.OPTIONS),null,null,null,null,null);
  match=info.getMatchingCondition(request);
  assertNull("Pre-flight should match the ACCESS_CONTROL_REQUEST_METHOD",match);
}
