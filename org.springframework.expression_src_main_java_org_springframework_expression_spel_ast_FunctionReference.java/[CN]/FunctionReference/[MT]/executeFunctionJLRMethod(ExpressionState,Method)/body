{
  Object[] functionArgs=getArguments(state);
  if (!method.isVarArgs() && method.getParameterTypes().length != functionArgs.length) {
    throw new SpelEvaluationException(SpelMessage.INCORRECT_NUMBER_OF_ARGUMENTS_TO_FUNCTION,functionArgs.length,method.getParameterTypes().length);
  }
  if (!Modifier.isStatic(method.getModifiers())) {
    throw new SpelEvaluationException(getStartPosition(),SpelMessage.FUNCTION_MUST_BE_STATIC,method.getDeclaringClass().getName() + "." + method.getName(),name);
  }
  if (functionArgs != null) {
    TypeConverter converter=state.getEvaluationContext().getTypeConverter();
    ReflectionHelper.convertAllArguments(converter,functionArgs,method);
  }
  if (method.isVarArgs()) {
    functionArgs=ReflectionHelper.setupArgumentsForVarargsInvocation(method.getParameterTypes(),functionArgs);
  }
  try {
    ReflectionUtils.makeAccessible(method);
    Object result=method.invoke(method.getClass(),functionArgs);
    return new TypedValue(result,new TypeDescriptor(new MethodParameter(method,-1)));
  }
 catch (  Exception ex) {
    throw new SpelEvaluationException(getStartPosition(),ex,SpelMessage.EXCEPTION_DURING_FUNCTION_CALL,this.name,ex.getMessage());
  }
}
