{
  Object[] functionArgs=getArguments(state);
  if (!m.isVarArgs() && m.getParameterTypes().length != functionArgs.length) {
    throw new SpelException(SpelMessages.INCORRECT_NUMBER_OF_ARGUMENTS_TO_FUNCTION,functionArgs.length,m.getParameterTypes().length);
  }
  if (!Modifier.isStatic(m.getModifiers())) {
    throw new SpelException(getCharPositionInLine(),SpelMessages.FUNCTION_MUST_BE_STATIC,m.getDeclaringClass().getName() + "." + m.getName(),name);
  }
  if (functionArgs != null) {
    EvaluationContext ctx=state.getEvaluationContext();
    TypeConverter converter=null;
    if (ctx.getTypeUtils() != null) {
      converter=ctx.getTypeUtils().getTypeConverter();
    }
    ReflectionUtils.convertArguments(m.getParameterTypes(),m.isVarArgs(),converter,functionArgs);
  }
  if (m.isVarArgs()) {
    functionArgs=ReflectionUtils.setupArgumentsForVarargsInvocation(m.getParameterTypes(),functionArgs);
  }
  try {
    return m.invoke(m.getClass(),functionArgs);
  }
 catch (  IllegalArgumentException e) {
    throw new SpelException(getCharPositionInLine(),e,SpelMessages.EXCEPTION_DURING_FUNCTION_CALL,name,e.getMessage());
  }
catch (  IllegalAccessException e) {
    throw new SpelException(getCharPositionInLine(),e,SpelMessages.EXCEPTION_DURING_FUNCTION_CALL,name,e.getMessage());
  }
catch (  InvocationTargetException e) {
    throw new SpelException(getCharPositionInLine(),e,SpelMessages.EXCEPTION_DURING_FUNCTION_CALL,name,e.getMessage());
  }
}
