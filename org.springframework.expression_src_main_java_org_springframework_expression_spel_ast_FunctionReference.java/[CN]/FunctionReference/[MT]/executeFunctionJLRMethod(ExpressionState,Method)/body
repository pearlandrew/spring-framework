{
  Object[] functionArgs=getArguments(state);
  if (!m.isVarArgs() && m.getParameterTypes().length != functionArgs.length) {
    throw new SpelEvaluationException(SpelMessages.INCORRECT_NUMBER_OF_ARGUMENTS_TO_FUNCTION,functionArgs.length,m.getParameterTypes().length);
  }
  if (!Modifier.isStatic(m.getModifiers())) {
    throw new SpelEvaluationException(getStartPosition(),SpelMessages.FUNCTION_MUST_BE_STATIC,m.getDeclaringClass().getName() + "." + m.getName(),name);
  }
  if (functionArgs != null) {
    TypeConverter converter=state.getEvaluationContext().getTypeConverter();
    ReflectionHelper.convertAllArguments(m.getParameterTypes(),m.isVarArgs(),converter,functionArgs);
  }
  if (m.isVarArgs()) {
    functionArgs=ReflectionHelper.setupArgumentsForVarargsInvocation(m.getParameterTypes(),functionArgs);
  }
  try {
    ReflectionUtils.makeAccessible(m);
    Object result=m.invoke(m.getClass(),functionArgs);
    return new TypedValue(result,new TypeDescriptor(new MethodParameter(m,-1)));
  }
 catch (  IllegalArgumentException e) {
    throw new SpelEvaluationException(getStartPosition(),e,SpelMessages.EXCEPTION_DURING_FUNCTION_CALL,name,e.getMessage());
  }
catch (  IllegalAccessException e) {
    throw new SpelEvaluationException(getStartPosition(),e,SpelMessages.EXCEPTION_DURING_FUNCTION_CALL,name,e.getMessage());
  }
catch (  InvocationTargetException e) {
    throw new SpelEvaluationException(getStartPosition(),e,SpelMessages.EXCEPTION_DURING_FUNCTION_CALL,name,e.getMessage());
  }
}
