{
  Object o=state.lookupVariable(name);
  if (o == null) {
    throw new SpelException(SpelMessages.FUNCTION_NOT_DEFINED,name);
  }
  if (!(o instanceof Lambda || o instanceof Method)) {
    throw new SpelException(SpelMessages.FUNCTION_REFERENCE_CANNOT_BE_INVOKED,name,o.getClass());
  }
  if (o instanceof Lambda) {
    return executeLambdaFunction(state,(Lambda)o);
  }
 else {
    return executeFunctionJLRMethod(state,(Method)o);
  }
}
