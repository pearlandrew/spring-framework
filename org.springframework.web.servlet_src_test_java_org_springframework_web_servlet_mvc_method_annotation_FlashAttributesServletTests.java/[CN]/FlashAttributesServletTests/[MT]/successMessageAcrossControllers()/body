{
  initServletWithModelExposingViewResolver(MessageController.class,SecondMessageController.class);
  MockHttpServletRequest req=new MockHttpServletRequest("POST","/message");
  MockHttpServletResponse res=new MockHttpServletResponse();
  getServlet().service(req,res);
  req.setParameter("another","true");
  getServlet().service(req,res);
  assertEquals(200,res.getStatus());
  assertEquals("Nay!",((Message)getModelAttribute(req,MESSAGE_KEY)).getText());
  assertEquals("Nay!",((Message)getFlashAttribute(req,MESSAGE_KEY)).getText());
  req.setMethod("GET");
  req.setRequestURI("/second/message");
  getServlet().service(req,res);
  assertEquals(200,res.getStatus());
  assertEquals("Nay!",((Message)getModelAttribute(req,MESSAGE_KEY)).getText());
  assertNull(getFlashAttribute(req,MESSAGE_KEY));
}
