{
  HttpStatus statusCode=getStatusCode(response);
  HttpHeaders headers=response.getHeaders();
  MediaType contentType=headers.getContentType();
  Charset charset=contentType != null ? contentType.getCharSet() : null;
  byte[] body=getResponseBody(response);
switch (statusCode.series()) {
case CLIENT_ERROR:
    throw new HttpClientErrorException(statusCode,response.getStatusText(),headers,body,charset);
case SERVER_ERROR:
  throw new HttpServerErrorException(statusCode,response.getStatusText(),headers,body,charset);
default :
throw new RestClientException("Unknown status code [" + statusCode + "]");
}
}
