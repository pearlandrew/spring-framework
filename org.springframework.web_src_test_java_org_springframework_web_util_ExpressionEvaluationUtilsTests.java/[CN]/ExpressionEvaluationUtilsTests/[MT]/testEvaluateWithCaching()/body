{
  PageContext ctx=new CountingMockPageContext();
  CountingMockExpressionEvaluator eval=(CountingMockExpressionEvaluator)ctx.getExpressionEvaluator();
  ctx.setAttribute("bla","blie");
  ctx.setAttribute("blo","blue");
  MockServletContext sc=(MockServletContext)ctx.getServletContext();
  sc.addInitParameter(ExpressionEvaluationUtils.EXPRESSION_CACHE_CONTEXT_PARAM,"true");
  assertEquals("blie",ExpressionEvaluationUtils.evaluate("test","${bla}",String.class,ctx));
  assertEquals(1,eval.parseExpressionCount);
  assertEquals("blue",ExpressionEvaluationUtils.evaluate("test","${blo}",String.class,ctx));
  assertEquals(2,eval.parseExpressionCount);
  assertEquals("blie",ExpressionEvaluationUtils.evaluate("test","${bla}",String.class,ctx));
  assertEquals(2,eval.parseExpressionCount);
  assertEquals("blue",ExpressionEvaluationUtils.evaluate("test","${blo}",String.class,ctx));
  assertEquals(2,eval.parseExpressionCount);
}
