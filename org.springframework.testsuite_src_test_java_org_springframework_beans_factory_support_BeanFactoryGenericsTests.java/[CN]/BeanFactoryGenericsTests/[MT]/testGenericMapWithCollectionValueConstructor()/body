{
  DefaultListableBeanFactory bf=new DefaultListableBeanFactory();
  bf.registerCustomEditor(Number.class,new CustomNumberEditor(Integer.class,false));
  RootBeanDefinition rbd=new RootBeanDefinition(GenericBean.class);
  Map input=new HashMap();
  HashSet value1=new HashSet();
  value1.add(new Integer(1));
  input.put("1",value1);
  ArrayList value2=new ArrayList();
  value2.add(Boolean.TRUE);
  input.put("2",value2);
  rbd.getConstructorArgumentValues().addGenericArgumentValue(Boolean.TRUE);
  rbd.getConstructorArgumentValues().addGenericArgumentValue(input);
  bf.registerBeanDefinition("genericBean",rbd);
  GenericBean gb=(GenericBean)bf.getBean("genericBean");
  assertTrue(gb.getCollectionMap().get(new Integer(1)) instanceof HashSet);
  assertTrue(gb.getCollectionMap().get(new Integer(2)) instanceof ArrayList);
}
