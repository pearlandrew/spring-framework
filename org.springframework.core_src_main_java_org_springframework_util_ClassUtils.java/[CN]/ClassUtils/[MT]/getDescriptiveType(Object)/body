{
  if (value == null) {
    return null;
  }
  Class clazz=value.getClass();
  if (Proxy.isProxyClass(clazz)) {
    StringBuffer buf=new StringBuffer(clazz.getName());
    buf.append(" implementing ");
    Class[] ifcs=clazz.getInterfaces();
    for (int i=0; i < ifcs.length; i++) {
      buf.append(ifcs[i].getName());
      if (i < ifcs.length - 1) {
        buf.append(',');
      }
    }
    return buf.toString();
  }
 else   if (clazz.isArray()) {
    return getQualifiedNameForArray(clazz);
  }
 else {
    return clazz.getName();
  }
}
