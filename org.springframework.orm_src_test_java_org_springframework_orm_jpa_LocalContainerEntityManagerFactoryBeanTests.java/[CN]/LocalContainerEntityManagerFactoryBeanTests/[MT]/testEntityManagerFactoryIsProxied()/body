{
  LocalContainerEntityManagerFactoryBean cefb=parseValidPersistenceUnit();
  EntityManagerFactory emf=cefb.getObject();
  assertSame("EntityManagerFactory reference must be cached after init",emf,cefb.getObject());
  assertNotSame("EMF must be proxied",mockEmf,emf);
  assertTrue(emf.equals(emf));
}
