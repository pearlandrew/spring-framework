{
  if (logger.isDebugEnabled()) {
    logger.debug("Message received: " + message);
  }
  try {
    PubSubHeaders inHeaders=PubSubHeaders.fromMessageHeaders(message.getHeaders());
    byte[] payload=payloadConverter.convertToPayload(message.getPayload(),inHeaders.getContentType());
    message=new GenericMessage<byte[]>(payload,message.getHeaders());
    getEventBus().send(getPublishKey(inHeaders.getDestination()),message);
  }
 catch (  Exception ex) {
    logger.error("Failed to publish " + message,ex);
  }
}
