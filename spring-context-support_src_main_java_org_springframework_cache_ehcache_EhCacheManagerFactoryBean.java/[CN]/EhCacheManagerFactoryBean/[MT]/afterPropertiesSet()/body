{
  logger.info("Initializing EhCache CacheManager");
  InputStream is=(this.configLocation != null ? this.configLocation.getInputStream() : null);
  try {
    Configuration configuration=(is != null ? ConfigurationFactory.parseConfiguration(is) : ConfigurationFactory.parseConfiguration());
    if (this.cacheManagerName != null) {
      configuration.setName(this.cacheManagerName);
    }
    this.cacheManager=(this.shared ? CacheManager.create(configuration) : new CacheManager(configuration));
  }
  finally {
    if (is != null) {
      is.close();
    }
  }
}
