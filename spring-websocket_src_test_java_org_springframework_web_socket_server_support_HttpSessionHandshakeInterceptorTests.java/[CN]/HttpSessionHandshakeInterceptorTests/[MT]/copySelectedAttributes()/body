{
  Map<String,Object> attributes=new HashMap<String,Object>();
  WebSocketHandler wsHandler=Mockito.mock(WebSocketHandler.class);
  this.servletRequest.getSession().setAttribute("foo","bar");
  this.servletRequest.getSession().setAttribute("bar","baz");
  Set<String> names=Collections.singleton("foo");
  HttpSessionHandshakeInterceptor interceptor=new HttpSessionHandshakeInterceptor(names);
  interceptor.beforeHandshake(this.request,this.response,wsHandler,attributes);
  assertEquals(1,attributes.size());
  assertEquals("bar",attributes.get("foo"));
}
