{
  Map<String,Object> attributes=new HashMap<String,Object>();
  WebSocketHandler wsHandler=Mockito.mock(WebSocketHandler.class);
  this.servletRequest.setSession(new MockHttpSession(null,"foo"));
  HttpSessionHandshakeInterceptor interceptor=new HttpSessionHandshakeInterceptor();
  interceptor.setCopyHttpSessionId(true);
  interceptor.beforeHandshake(this.request,this.response,wsHandler,attributes);
  assertEquals(1,attributes.size());
  assertEquals("foo",attributes.get(HttpSessionHandshakeInterceptor.HTTP_SESSION_ID_ATTR_NAME));
}
