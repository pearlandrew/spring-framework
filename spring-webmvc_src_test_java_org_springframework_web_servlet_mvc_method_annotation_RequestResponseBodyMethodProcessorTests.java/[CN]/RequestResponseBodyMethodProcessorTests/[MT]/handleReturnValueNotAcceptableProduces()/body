{
  MediaType accepted=MediaType.TEXT_PLAIN;
  servletRequest.addHeader("Accept",accepted.toString());
  expect(messageConverter.canWrite(String.class,null)).andReturn(true);
  expect(messageConverter.getSupportedMediaTypes()).andReturn(Collections.singletonList(MediaType.TEXT_PLAIN));
  expect(messageConverter.canWrite(String.class,accepted)).andReturn(false);
  replay(messageConverter);
  processor.handleReturnValue("Foo",returnTypeStringProduces,mavContainer,webRequest);
  fail("Expected exception");
}
