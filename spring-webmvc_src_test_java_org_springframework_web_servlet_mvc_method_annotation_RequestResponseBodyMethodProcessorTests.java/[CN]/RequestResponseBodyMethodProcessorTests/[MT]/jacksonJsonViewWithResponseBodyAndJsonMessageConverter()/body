{
  Method method=JacksonViewController.class.getMethod("handleResponseBody");
  HandlerMethod handlerMethod=new HandlerMethod(new JacksonViewController(),method);
  MethodParameter methodReturnType=handlerMethod.getReturnType();
  List<HttpMessageConverter<?>> converters=new ArrayList<HttpMessageConverter<?>>();
  converters.add(new MappingJackson2HttpMessageConverter());
  RequestResponseBodyMethodProcessor processor=new RequestResponseBodyMethodProcessor(converters,null,Collections.singletonList(new JsonViewResponseBodyAdvice()));
  Object returnValue=new JacksonViewController().handleResponseBody();
  processor.handleReturnValue(returnValue,methodReturnType,this.mavContainer,this.webRequest);
  String content=this.servletResponse.getContentAsString();
  assertFalse(content.contains("\"withView1\":\"with\""));
  assertTrue(content.contains("\"withView2\":\"with\""));
  assertFalse(content.contains("\"withoutView\":\"without\""));
}
