{
  if (descriptor.containerFactory != null) {
    return descriptor.containerFactory;
  }
 else   if (this.containerFactory != null) {
    return this.containerFactory;
  }
 else   if (this.containerFactoryBeanName != null) {
    this.containerFactory=this.applicationContext.getBean(this.containerFactoryBeanName,JmsListenerContainerFactory.class);
    return this.containerFactory;
  }
 else {
    throw new IllegalStateException("Could not resolve the " + JmsListenerContainerFactory.class.getSimpleName() + " to use for ["+ descriptor.endpoint+ "] no factory was given and no default is set.");
  }
}
