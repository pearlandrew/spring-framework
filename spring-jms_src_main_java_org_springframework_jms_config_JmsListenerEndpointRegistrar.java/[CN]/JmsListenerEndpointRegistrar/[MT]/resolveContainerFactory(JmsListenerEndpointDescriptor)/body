{
  if (descriptor.containerFactory != null) {
    return descriptor.containerFactory;
  }
 else   if (defaultContainerFactory != null) {
    return defaultContainerFactory;
  }
 else {
    throw new IllegalStateException("Could not resolve the " + JmsListenerContainerFactory.class.getSimpleName() + " to use for ["+ descriptor.endpoint+ "] no factory was given and no default is set.");
  }
}
