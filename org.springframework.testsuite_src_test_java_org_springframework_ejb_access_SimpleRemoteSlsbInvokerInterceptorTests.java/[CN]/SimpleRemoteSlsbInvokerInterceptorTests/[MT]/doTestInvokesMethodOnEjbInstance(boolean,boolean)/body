{
  Object retVal=new Object();
  MockControl ejbControl=MockControl.createControl(RemoteInterface.class);
  final RemoteInterface ejb=(RemoteInterface)ejbControl.getMock();
  ejb.targetMethod();
  ejbControl.setReturnValue(retVal,2);
  ejb.remove();
  ejbControl.setVoidCallable(2);
  ejbControl.replay();
  int lookupCount=1;
  if (!cacheHome) {
    lookupCount++;
    if (lookupHomeOnStartup) {
      lookupCount++;
    }
  }
  final String jndiName="foobar";
  MockControl contextControl=contextControl(jndiName,ejb,2,lookupCount,lookupCount);
  SimpleRemoteSlsbInvokerInterceptor si=configuredInterceptor(contextControl,jndiName);
  si.setLookupHomeOnStartup(lookupHomeOnStartup);
  si.setCacheHome(cacheHome);
  RemoteInterface target=(RemoteInterface)configuredProxy(si,RemoteInterface.class);
  assertTrue(target.targetMethod() == retVal);
  assertTrue(target.targetMethod() == retVal);
  contextControl.verify();
  ejbControl.verify();
}
