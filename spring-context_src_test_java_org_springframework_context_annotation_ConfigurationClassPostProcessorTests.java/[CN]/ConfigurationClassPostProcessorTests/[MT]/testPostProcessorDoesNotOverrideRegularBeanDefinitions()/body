{
  DefaultListableBeanFactory beanFactory=new DefaultListableBeanFactory();
  RootBeanDefinition rbd=new RootBeanDefinition(TestBean.class);
  rbd.setResource(new DescriptiveResource("XML or something"));
  beanFactory.registerBeanDefinition("bar",rbd);
  beanFactory.registerBeanDefinition("config",new RootBeanDefinition(SingletonBeanConfig.class));
  ConfigurationClassPostProcessor pp=new ConfigurationClassPostProcessor();
  pp.postProcessBeanFactory(beanFactory);
  Foo foo=beanFactory.getBean("foo",Foo.class);
  TestBean bar=beanFactory.getBean("bar",TestBean.class);
}
