{
  ApplicationContext ctx=new AnnotationConfigApplicationContext(BeanArgumentConfigWithSingleton.class);
  ctx.getBean(FooFactory.class).createFoo(new BarArgument());
}
