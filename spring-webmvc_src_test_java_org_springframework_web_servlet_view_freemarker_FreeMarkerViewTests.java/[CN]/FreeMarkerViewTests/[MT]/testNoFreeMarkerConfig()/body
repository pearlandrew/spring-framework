{
  FreeMarkerView fv=new FreeMarkerView();
  WebApplicationContext wac=mock(WebApplicationContext.class);
  given(wac.getBeansOfType(FreeMarkerConfig.class,true,false)).willReturn(new HashMap<String,FreeMarkerConfig>());
  given(wac.getServletContext()).willReturn(new MockServletContext());
  fv.setUrl("anythingButNull");
  try {
    fv.setApplicationContext(wac);
    fv.afterPropertiesSet();
    fail("Should have thrown BeanDefinitionStoreException");
  }
 catch (  ApplicationContextException ex) {
    assertTrue(ex.getMessage().contains("FreeMarkerConfig"));
  }
}
