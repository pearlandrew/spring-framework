{
  ConfigurableApplicationContext ctx=createMock(ConfigurableApplicationContext.class);
  ctx.close();
  replay(ctx);
  ContextBeanFactoryReference bfr=new ContextBeanFactoryReference(ctx);
  assertNotNull(bfr.getFactory());
  bfr.release();
  try {
    bfr.getFactory();
  }
 catch (  IllegalStateException e) {
  }
  verify(ctx);
}
