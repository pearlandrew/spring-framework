{
  if (source == null) {
    return null;
  }
  if (source.indexOf('{') == -1) {
    return source;
  }
  Matcher matcher=NAMES_PATTERN.matcher(source);
  StringBuffer sb=new StringBuffer();
  while (matcher.find()) {
    String match=matcher.group(1);
    String variableName=getVariableName(match);
    Object variableValue=uriVariables.getValue(variableName);
    String variableValueString=getVariableValueAsString(variableValue);
    String replacement=Matcher.quoteReplacement(variableValueString);
    matcher.appendReplacement(sb,replacement);
  }
  matcher.appendTail(sb);
  return sb.toString();
}
