{
  Assert.state(this.targetConnectionFactory != null,"'targetConnectionFactory' is required");
  if (!(this.targetConnectionFactory instanceof QueueConnectionFactory)) {
    throw new javax.jms.IllegalStateException("'targetConnectionFactory' is not a QueueConnectionFactory");
  }
  QueueConnectionFactory queueFactory=(QueueConnectionFactory)this.targetConnectionFactory;
  if (StringUtils.hasLength(username)) {
    return queueFactory.createQueueConnection(username,password);
  }
 else {
    return queueFactory.createQueueConnection();
  }
}
