{
  Assert.notNull(element,"AnnotatedElement must not be null");
  Assert.hasText(annotationType,"annotationType must not be null or empty");
  if (visited.add(element)) {
    try {
      Annotation[] annotations=element.getAnnotations();
      for (      Annotation annotation : annotations) {
        if (!AnnotationUtils.isInJavaLangAnnotationPackage(annotation) && (annotation.annotationType().getName().equals(annotationType) || metaDepth > 0)) {
          T result=processor.process(annotation,metaDepth);
          if (result != null) {
            return result;
          }
        }
      }
      for (      Annotation annotation : annotations) {
        if (!AnnotationUtils.isInJavaLangAnnotationPackage(annotation)) {
          T result=processWithGetSemantics(annotation.annotationType(),annotationType,processor,visited,metaDepth + 1);
          if (result != null) {
            processor.postProcess(annotation,result);
            return result;
          }
        }
      }
    }
 catch (    Exception ex) {
      AnnotationUtils.logIntrospectionFailure(element,ex);
    }
  }
  return null;
}
