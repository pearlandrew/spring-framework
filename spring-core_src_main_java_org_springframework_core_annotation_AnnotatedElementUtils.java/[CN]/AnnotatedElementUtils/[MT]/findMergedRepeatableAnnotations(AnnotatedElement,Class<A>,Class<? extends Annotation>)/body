{
  Assert.notNull(element,"AnnotatedElement must not be null");
  Assert.notNull(annotationType,"annotationType must not be null");
  if (containerType == null) {
    containerType=AnnotationUtils.resolveContainerAnnotationType(annotationType);
    if (containerType == null) {
      throw new IllegalArgumentException("annotationType must be a repeatable annotation: failed to resolve container type for " + annotationType.getName());
    }
  }
 else {
    validateRepeatableContainerType(annotationType,containerType);
  }
  MergedAnnotationAttributesProcessor processor=new MergedAnnotationAttributesProcessor(annotationType,null,false,false,true);
  searchWithFindSemantics(element,annotationType,annotationType.getName(),containerType,processor);
  Set<A> annotations=new LinkedHashSet<A>();
  for (  AnnotationAttributes attributes : processor.getAggregatedResults()) {
    AnnotationUtils.postProcessAnnotationAttributes(element,attributes,false,false);
    annotations.add(AnnotationUtils.synthesizeAnnotation(attributes,annotationType,element));
  }
  return annotations;
}
