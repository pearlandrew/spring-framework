{
  Assert.notNull(element,"AnnotatedElement must not be null");
  Assert.hasText(annotationType,"annotationType must not be null or empty");
  if (visited.add(element)) {
    try {
      List<Annotation> declaredAnnotations=Arrays.asList(element.getDeclaredAnnotations());
      T result=searchWithGetSemanticsInAnnotations(declaredAnnotations,annotationType,processor,visited,metaDepth);
      if (result != null) {
        return result;
      }
      List<Annotation> inheritedAnnotations=new ArrayList<Annotation>();
      for (      Annotation annotation : element.getAnnotations()) {
        if (!declaredAnnotations.contains(annotation)) {
          inheritedAnnotations.add(annotation);
        }
      }
      result=searchWithGetSemanticsInAnnotations(inheritedAnnotations,annotationType,processor,visited,metaDepth);
      if (result != null) {
        return result;
      }
    }
 catch (    Exception ex) {
      AnnotationUtils.logIntrospectionFailure(element,ex);
    }
  }
  return null;
}
