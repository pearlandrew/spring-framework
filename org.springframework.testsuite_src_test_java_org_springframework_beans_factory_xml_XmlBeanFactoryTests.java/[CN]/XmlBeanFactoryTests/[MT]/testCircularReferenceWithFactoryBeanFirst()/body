{
  DefaultListableBeanFactory xbf=new DefaultListableBeanFactory();
  XmlBeanDefinitionReader reader=new XmlBeanDefinitionReader(xbf);
  reader.setValidationMode(XmlBeanDefinitionReader.VALIDATION_NONE);
  reader.loadBeanDefinitions(new ClassPathResource("reftypes.xml",getClass()));
  TestBean egoBridge=(TestBean)xbf.getBean("egoBridge");
  TestBean complexEgo=(TestBean)xbf.getBean("complexEgo");
  assertTrue("Correct circular reference",complexEgo.getSpouse().getSpouse() == complexEgo);
}
