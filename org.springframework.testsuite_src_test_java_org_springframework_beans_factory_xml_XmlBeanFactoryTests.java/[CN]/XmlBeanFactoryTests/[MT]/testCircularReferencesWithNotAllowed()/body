{
  DefaultListableBeanFactory xbf=new DefaultListableBeanFactory();
  xbf.setAllowCircularReferences(false);
  XmlBeanDefinitionReader reader=new XmlBeanDefinitionReader(xbf);
  reader.setValidationMode(XmlBeanDefinitionReader.VALIDATION_NONE);
  reader.loadBeanDefinitions(new ClassPathResource("reftypes.xml",getClass()));
  try {
    xbf.getBean("jenny");
    fail("Should have thrown BeanCreationException");
  }
 catch (  BeanCreationException ex) {
    assertTrue(ex.contains(BeanCurrentlyInCreationException.class));
  }
}
