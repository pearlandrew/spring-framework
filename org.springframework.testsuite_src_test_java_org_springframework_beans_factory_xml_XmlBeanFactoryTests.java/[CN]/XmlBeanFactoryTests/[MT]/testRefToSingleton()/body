{
  DefaultListableBeanFactory xbf=new DefaultListableBeanFactory();
  XmlBeanDefinitionReader reader=new XmlBeanDefinitionReader(xbf);
  reader.setValidationMode(XmlBeanDefinitionReader.VALIDATION_NONE);
  Resource resource=new ClassPathResource("reftypes.xml",getClass());
  reader.loadBeanDefinitions(new EncodedResource(resource,"ISO-8859-1"));
  TestBean jen=(TestBean)xbf.getBean("jenny");
  TestBean dave=(TestBean)xbf.getBean("david");
  TestBean jenks=(TestBean)xbf.getBean("jenks");
  ITestBean davesJen=dave.getSpouse();
  ITestBean jenksJen=jenks.getSpouse();
  assertTrue("1 jen instance",davesJen == jenksJen);
  assertTrue("1 jen instance",davesJen == jen);
}
