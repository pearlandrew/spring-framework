{
  InitAndIB.constructed=false;
  XmlBeanFactory xbf=new XmlBeanFactory(new ClassPathResource("initializers.xml",getClass()));
  assertFalse(InitAndIB.constructed);
  xbf.preInstantiateSingletons();
  assertFalse(InitAndIB.constructed);
  InitAndIB iib=(InitAndIB)xbf.getBean("ib-same-init");
  assertTrue(InitAndIB.constructed);
  assertTrue(iib.afterPropertiesSetInvoked && !iib.initMethodInvoked);
  assertTrue(!iib.destroyed && !iib.customDestroyed);
  xbf.destroySingletons();
  assertTrue(iib.destroyed && !iib.customDestroyed);
  xbf.destroySingletons();
  assertTrue(iib.destroyed && !iib.customDestroyed);
}
