{
  TestBean tb=new TestBean();
  tb.setSpouse(new TestBean());
  DataBinder binder=new DataBinder(tb,"person");
  binder.setRequiredFields(new String[]{"someMap[key1]","someMap[key2]","someMap['key3']","someMap[key4]"});
  MutablePropertyValues pvs=new MutablePropertyValues();
  pvs.addPropertyValue("someMap[key1]","value1");
  pvs.addPropertyValue("someMap['key2']","value2");
  pvs.addPropertyValue("someMap[key3]","value3");
  binder.bind(pvs);
  BindingResult br=binder.getBindingResult();
  assertEquals("Wrong number of errors",1,br.getErrorCount());
  assertEquals("required",br.getFieldError("someMap[key4]").getCode());
}
