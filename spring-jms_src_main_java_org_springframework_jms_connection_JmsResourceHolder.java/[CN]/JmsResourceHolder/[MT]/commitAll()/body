{
  for (  Session session : this.sessions) {
    try {
      session.commit();
    }
 catch (    TransactionInProgressException ex) {
    }
catch (    javax.jms.IllegalStateException ex) {
      if (this.connectionFactory != null) {
        try {
          Method getDataSourceMethod=this.connectionFactory.getClass().getMethod("getDataSource");
          Object ds=ReflectionUtils.invokeMethod(getDataSourceMethod,this.connectionFactory);
          if (ds != null && TransactionSynchronizationManager.hasResource(ds)) {
            return;
          }
        }
 catch (        Throwable ex2) {
          if (logger.isDebugEnabled()) {
            logger.debug("No working getDataSource method found on ConnectionFactory: " + ex2);
          }
        }
      }
      throw ex;
    }
  }
}
