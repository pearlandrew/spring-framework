{
  PathMatcher pathMatcher=new AntPathMatcher();
  MockHttpServletRequest request=new MockHttpServletRequest("GET","/foo");
  String lookupPath=new UrlPathHelper().getLookupPathForRequest(request);
  RequestMappingInfo key=new RequestMappingInfo(asList("/foo*","/bar"),asList(GET,POST));
  RequestMappingInfo match=key.getMatchingRequestMapping(lookupPath,request,pathMatcher);
  RequestMappingInfo expected=new RequestMappingInfo(singleton("/foo*"),singleton(GET));
  assertEquals("Matching RequestKey contains matched patterns and methods only",expected,match);
  key=new RequestMappingInfo(asList("/**","/foo*","/foo"),null);
  match=key.getMatchingRequestMapping(lookupPath,request,pathMatcher);
  expected=new RequestMappingInfo(asList("/foo","/foo*","/**"),null);
  assertEquals("Matched patterns are sorted with best match at the top",expected,match);
}
