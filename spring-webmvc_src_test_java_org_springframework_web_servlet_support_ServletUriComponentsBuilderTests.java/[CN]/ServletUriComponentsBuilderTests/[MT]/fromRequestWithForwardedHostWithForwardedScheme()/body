{
  this.request.setServerPort(10080);
  this.request.addHeader("X-Forwarded-Proto","https");
  this.request.addHeader("X-Forwarded-Host","example.org");
  UriComponents result=ServletUriComponentsBuilder.fromRequest(request).build();
  assertEquals("example.org",result.getHost());
  assertEquals("should have derived scheme from header","https",result.getScheme());
  assertEquals("should have used the default port of the forwarded request",-1,result.getPort());
}
