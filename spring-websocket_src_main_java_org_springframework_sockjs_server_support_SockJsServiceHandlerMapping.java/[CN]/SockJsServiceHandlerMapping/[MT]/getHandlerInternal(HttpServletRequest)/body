{
  String lookupPath=getUrlPathHelper().getLookupPathForRequest(request);
  if (logger.isDebugEnabled()) {
    logger.debug("Looking for SockJS service match to path " + lookupPath);
  }
  for (  AbstractSockJsService service : this.sockJsServices) {
    if (lookupPath.startsWith(service.getPrefix())) {
      if (logger.isDebugEnabled()) {
        logger.debug("Matched to " + service);
      }
      String sockJsPath=lookupPath.substring(service.getPrefix().length());
      return new SockJsServiceHttpRequestHandler(service,sockJsPath);
    }
  }
  if (logger.isDebugEnabled()) {
    logger.debug("Did not find a match");
  }
  return null;
}
