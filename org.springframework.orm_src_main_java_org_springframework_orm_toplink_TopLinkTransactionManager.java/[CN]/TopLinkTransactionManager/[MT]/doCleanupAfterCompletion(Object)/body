{
  TopLinkTransactionObject txObject=(TopLinkTransactionObject)transaction;
  TransactionSynchronizationManager.unbindResource(getSessionFactory());
  if (txObject.hasConnectionHolder()) {
    TransactionSynchronizationManager.unbindResource(getDataSource());
  }
  Session session=txObject.getSessionHolder().getSession();
  if (logger.isDebugEnabled()) {
    logger.debug("Releasing TopLink Session [" + session + "] after transaction");
  }
  try {
    session.release();
  }
 catch (  Throwable ex) {
    logger.debug("Could not release TopLink Session after transaction",ex);
  }
}
