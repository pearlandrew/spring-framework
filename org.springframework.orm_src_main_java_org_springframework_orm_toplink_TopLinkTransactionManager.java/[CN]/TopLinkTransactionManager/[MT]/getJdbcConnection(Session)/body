{
  if (!(session instanceof oracle.toplink.publicinterface.Session)) {
    if (logger.isDebugEnabled()) {
      logger.debug("TopLink Session [" + session + "] does not derive from [oracle.toplink.publicinterface.Session]");
    }
    return null;
  }
  Accessor accessor=((oracle.toplink.publicinterface.Session)session).getAccessor();
  if (!(accessor instanceof DatabaseAccessor)) {
    if (logger.isDebugEnabled()) {
      logger.debug("TopLink Accessor [" + accessor + "] does not derive from [oracle.toplink.internal.databaseaccess.DatabaseAccessor]");
    }
    return null;
  }
  return ((DatabaseAccessor)accessor).getConnection();
}
