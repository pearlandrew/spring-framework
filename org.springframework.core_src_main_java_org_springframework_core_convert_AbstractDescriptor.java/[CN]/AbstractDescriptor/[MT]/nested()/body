{
  if (isCollection()) {
    Class<?> elementType=resolveCollectionElementType();
    return elementType != null ? nested(elementType,0) : null;
  }
 else   if (isArray()) {
    return nested(getType().getComponentType(),0);
  }
 else   if (isMap()) {
    Class<?> mapValueType=resolveMapValueType();
    return mapValueType != null ? nested(mapValueType,1) : null;
  }
 else {
    throw new IllegalStateException("Not a collection, array, or map: cannot resolve nested value types");
  }
}
