{
  Query query=mock(Query.class);
  given(pmf.getPersistenceManager()).willReturn(pm);
  given(pm.newQuery(Query.SQL,"some SQL")).willReturn(query);
  Collection coll=new HashSet();
  given(query.execute()).willReturn(coll);
  JdoTemplate jt=new JdoTemplate(pmf);
  assertEquals(coll,jt.find(Query.SQL,"some SQL"));
  verify(pm).close();
}
