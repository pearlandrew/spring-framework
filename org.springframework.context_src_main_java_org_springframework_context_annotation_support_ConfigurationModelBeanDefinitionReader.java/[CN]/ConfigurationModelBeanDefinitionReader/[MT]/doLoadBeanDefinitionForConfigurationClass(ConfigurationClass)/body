{
  GenericBeanDefinition configBeanDef=new GenericBeanDefinition();
  configBeanDef.setBeanClassName(configClass.getName());
  String configBeanName=configClass.getBeanName();
  if (registry.containsBeanDefinition(configBeanName)) {
    if (log.isInfoEnabled())     log.info(format("Copying property and constructor arg values from existing bean definition for " + "@Configuration class %s to new bean definition",configBeanName));
    AbstractBeanDefinition existing=(AbstractBeanDefinition)registry.getBeanDefinition(configBeanName);
    configBeanDef.setPropertyValues(existing.getPropertyValues());
    configBeanDef.setConstructorArgumentValues(existing.getConstructorArgumentValues());
    configBeanDef.setResource(existing.getResource());
  }
  if (log.isInfoEnabled())   log.info(format("Registering bean definition for @Configuration class %s",configBeanName));
  registry.registerBeanDefinition(configBeanName,configBeanDef);
}
