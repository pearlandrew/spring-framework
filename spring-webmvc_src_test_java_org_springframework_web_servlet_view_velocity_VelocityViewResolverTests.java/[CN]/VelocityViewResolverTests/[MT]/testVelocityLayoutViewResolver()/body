{
  VelocityConfig vc=new VelocityConfig(){
    @Override public VelocityEngine getVelocityEngine(){
      TestVelocityEngine ve=new TestVelocityEngine();
      ve.addTemplate("prefix_test_suffix",new Template());
      ve.addTemplate("myLayoutUrl",new Template());
      return ve;
    }
  }
;
  StaticWebApplicationContext wac=new StaticWebApplicationContext();
  wac.getBeanFactory().registerSingleton("configurer",vc);
  wac.refresh();
  VelocityLayoutViewResolver vr=new VelocityLayoutViewResolver();
  vr.setPrefix("prefix_");
  vr.setSuffix("_suffix");
  vr.setLayoutUrl("myLayoutUrl");
  vr.setLayoutKey("myLayoutKey");
  vr.setScreenContentKey("myScreenContentKey");
  vr.setApplicationContext(wac);
  View view=vr.resolveViewName("test",Locale.CANADA);
  assertEquals("Correct view class",VelocityLayoutView.class,view.getClass());
  assertEquals("Correct URL","prefix_test_suffix",((VelocityView)view).getUrl());
}
