{
  StaticWebApplicationContext wac=new StaticWebApplicationContext();
  wac.registerSingleton("handlerMapping",RequestMappingHandlerMapping.class);
  wac.registerSingleton("handlerAdapter",RequestMappingHandlerAdapter.class);
  wac.getDefaultListableBeanFactory().registerSingleton("responseBodyResultHandler",new ResponseBodyResultHandler(Arrays.asList(new StringEncoder(),new JacksonJsonEncoder()),Arrays.asList(new JsonObjectEncoder())));
  wac.registerSingleton("controller",TestController.class);
  wac.refresh();
  DispatcherHandler dispatcherHandler=new DispatcherHandler();
  dispatcherHandler.setApplicationContext(wac);
  return dispatcherHandler;
}
