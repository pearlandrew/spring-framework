{
  RestTemplate restTemplate=new RestTemplate();
  URI url=new URI("http://localhost:" + port + "/echo");
  List<Person> persons=Arrays.asList(new Person("Robert"),new Person("Marie"));
  RequestEntity<List<Person>> request=RequestEntity.post(url).contentType(MediaType.APPLICATION_JSON).accept(MediaType.APPLICATION_JSON).body(persons);
  List<Person> results=restTemplate.exchange(request,new ParameterizedTypeReference<List<Person>>(){
  }
).getBody();
  assertEquals(2,results.size());
  assertEquals("Robert",results.get(0).getName());
  assertEquals("Marie",results.get(1).getName());
}
