{
  if (logger.isErrorEnabled()) {
    logger.error("TCP connection failure in session " + this.sessionId + ": "+ error,ex);
  }
  try {
    sendStompErrorFrameToClient(error);
  }
  finally {
    try {
      clearConnection();
    }
 catch (    Throwable t) {
      if (logger.isErrorEnabled()) {
        logger.error("Failure while cleaning up state for TCP connection" + " in session " + this.sessionId,t);
      }
    }
  }
}
