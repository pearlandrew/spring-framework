{
  StompHeaderAccessor headers=StompHeaderAccessor.wrap(message);
  if (SimpMessageType.HEARTBEAT.equals(headers.getMessageType())) {
    logger.trace("Received broker heartbeat");
  }
 else   if (logger.isDebugEnabled()) {
    logger.debug("Received message from broker in session '" + this.sessionId + "'");
  }
  if (StompCommand.CONNECTED == headers.getCommand()) {
    afterStompConnected(headers);
  }
  headers.setSessionId(this.sessionId);
  message=MessageBuilder.withPayload(message.getPayload()).setHeaders(headers).build();
  sendMessageToClient(message);
}
