{
  if ((this.applicationEventPublisher != null) && this.brokerAvailable.compareAndSet(true,false)) {
    if (logger.isTraceEnabled()) {
      logger.trace("Publishing BrokerAvailabilityEvent (unavailable)");
    }
    this.applicationEventPublisher.publishEvent(new BrokerAvailabilityEvent(false,this));
  }
}
