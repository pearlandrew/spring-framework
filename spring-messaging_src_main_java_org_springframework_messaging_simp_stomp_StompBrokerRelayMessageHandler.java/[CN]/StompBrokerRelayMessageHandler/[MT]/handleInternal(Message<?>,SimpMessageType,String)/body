{
  if (SimpMessageType.CONNECT.equals(messageType)) {
    RelaySession session=new RelaySession(sessionId);
    this.relaySessions.put(sessionId,session);
    session.open(message);
  }
 else   if (SimpMessageType.DISCONNECT.equals(messageType)) {
    RelaySession session=this.relaySessions.remove(sessionId);
    if (session != null) {
      if (logger.isTraceEnabled()) {
        logger.trace("Session already removed, sessionId=" + sessionId);
      }
      session.forward(message);
    }
  }
 else {
    RelaySession session=this.relaySessions.get(sessionId);
    if (session == null) {
      logger.warn("Session id=" + sessionId + " not found. Ignoring message: "+ message);
      return;
    }
    session.forward(message);
  }
}
