{
  publishBrokerUnavailableEvent();
  this.clientInboundChannel.unsubscribe(this);
  this.brokerChannel.unsubscribe(this);
  try {
    this.tcpClient.shutdown();
  }
 catch (  Throwable t) {
    logger.error("Error while shutting down TCP client",t);
  }
}
