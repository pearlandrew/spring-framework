{
synchronized (this.lifecycleMonitor) {
    if (logger.isDebugEnabled()) {
      logger.debug("Stopping STOMP broker relay");
    }
    this.running=false;
    try {
      this.tcpClient.close().await();
    }
 catch (    Throwable t) {
      logger.error("Failed to close reactor TCP client",t);
    }
    try {
      this.environment.shutdown();
    }
 catch (    Throwable t) {
      logger.error("Failed to shut down reactor Environment",t);
    }
  }
}
