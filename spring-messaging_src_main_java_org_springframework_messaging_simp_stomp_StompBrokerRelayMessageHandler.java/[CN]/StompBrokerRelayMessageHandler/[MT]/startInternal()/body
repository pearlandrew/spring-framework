{
  this.clientInboundChannel.subscribe(this);
  this.brokerChannel.subscribe(this);
  if (this.tcpClient == null) {
    this.tcpClient=new StompTcpClientFactory().create(this.relayHost,this.relayPort);
  }
  if (logger.isDebugEnabled()) {
    logger.debug("Initializing \"system\" connection");
  }
  StompHeaderAccessor headers=StompHeaderAccessor.create(StompCommand.CONNECT);
  headers.setAcceptVersion("1.1,1.2");
  headers.setLogin(this.systemLogin);
  headers.setPasscode(this.systemPasscode);
  headers.setHeartbeat(this.systemHeartbeatSendInterval,this.systemHeartbeatReceiveInterval);
  headers.setHost(getVirtualHost());
  SystemStompConnectionHandler handler=new SystemStompConnectionHandler(headers);
  this.connectionHandlers.put(handler.getSessionId(),handler);
  this.tcpClient.connect(handler,new FixedIntervalReconnectStrategy(5000));
}
