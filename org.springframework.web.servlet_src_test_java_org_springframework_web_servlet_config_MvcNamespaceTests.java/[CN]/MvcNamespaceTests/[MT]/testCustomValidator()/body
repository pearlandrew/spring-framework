{
  XmlBeanDefinitionReader reader=new XmlBeanDefinitionReader(container);
  reader.loadBeanDefinitions(new ClassPathResource("mvc-config-custom-validator.xml",getClass()));
  assertEquals(3,container.getBeanDefinitionCount());
  DefaultAnnotationHandlerMapping mapping=container.getBean(DefaultAnnotationHandlerMapping.class);
  assertNotNull(mapping);
  assertEquals(0,mapping.getOrder());
  AnnotationMethodHandlerAdapter adapter=container.getBean(AnnotationMethodHandlerAdapter.class);
  assertNotNull(adapter);
  TestController handler=new TestController();
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.addParameter("date","2009-10-31");
  MockHttpServletResponse response=new MockHttpServletResponse();
  adapter.handle(request,response,handler);
  assertTrue(container.getBean(TestValidator.class).validatorInvoked);
  assertFalse(handler.recordedValidationError);
}
