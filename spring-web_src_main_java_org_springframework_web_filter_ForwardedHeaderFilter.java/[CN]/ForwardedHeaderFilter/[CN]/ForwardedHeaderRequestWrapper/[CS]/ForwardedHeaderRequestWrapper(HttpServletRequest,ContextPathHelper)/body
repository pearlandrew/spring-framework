{
  super(request);
  HttpRequest httpRequest=new ServletServerHttpRequest(request);
  UriComponents uriComponents=UriComponentsBuilder.fromHttpRequest(httpRequest).build();
  int port=uriComponents.getPort();
  this.scheme=uriComponents.getScheme();
  this.secure="https".equals(scheme);
  this.host=uriComponents.getHost();
  this.port=(port == -1 ? (this.secure ? 443 : 80) : port);
  this.contextPath=(pathHelper != null ? pathHelper.getContextPath(request) : request.getContextPath());
  this.requestUri=(pathHelper != null ? pathHelper.getRequestUri(request) : request.getRequestURI());
  this.requestUrl=initRequestUrl(this.scheme,this.host,port,this.requestUri);
  this.headers=initHeaders(request);
}
