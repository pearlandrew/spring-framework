{
  if (isLink(line) && !hasScheme(line)) {
    ResourceResolverChain resolverChain=transformerChain.getResolverChain();
    Resource appCacheResource=resolverChain.resolveResource(null,line,Arrays.asList(resource));
    String path=resolveUrlPath(line,request,resource,transformerChain);
    builder.appendResource(appCacheResource);
    if (logger.isTraceEnabled()) {
      logger.trace("Link modified: " + path + " (original: "+ line+ ")");
    }
    return path;
  }
  builder.appendString(line);
  return line;
}
