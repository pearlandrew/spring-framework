{
  PropsTester pt=new PropsTester();
  BeanWrapper bw=new BeanWrapperImpl(pt);
  bw.registerCustomEditor(String.class,"stringArray",new PropertyEditorSupport(){
    @Override public void setAsText(    String text){
      setValue(text.substring(1));
    }
  }
);
  bw.setPropertyValue("stringArray",new String[]{"4foo","7fi","6fi","5fum"});
  assertTrue("stringArray length = 4",pt.stringArray.length == 4);
  assertTrue("correct values",pt.stringArray[0].equals("foo") && pt.stringArray[1].equals("fi") && pt.stringArray[2].equals("fi")&& pt.stringArray[3].equals("fum"));
  List<String> list=new ArrayList<String>();
  list.add("4foo");
  list.add("7fi");
  list.add("6fi");
  list.add("5fum");
  bw.setPropertyValue("stringArray",list);
  assertTrue("stringArray length = 4",pt.stringArray.length == 4);
  assertTrue("correct values",pt.stringArray[0].equals("foo") && pt.stringArray[1].equals("fi") && pt.stringArray[2].equals("fi")&& pt.stringArray[3].equals("fum"));
  Set<String> set=new HashSet<String>();
  set.add("4foo");
  set.add("7fi");
  set.add("6fum");
  bw.setPropertyValue("stringArray",set);
  assertTrue("stringArray length = 3",pt.stringArray.length == 3);
  List<String> result=Arrays.asList(pt.stringArray);
  assertTrue("correct values",result.contains("foo") && result.contains("fi") && result.contains("fum"));
  bw.setPropertyValue("stringArray","8one");
  assertTrue("stringArray length = 1",pt.stringArray.length == 1);
  assertTrue("correct values",pt.stringArray[0].equals("one"));
}
