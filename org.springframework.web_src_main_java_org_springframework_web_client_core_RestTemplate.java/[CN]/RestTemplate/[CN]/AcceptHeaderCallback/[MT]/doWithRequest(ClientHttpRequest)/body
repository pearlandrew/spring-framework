{
  List<MediaType> allSupportedMediaTypes=new ArrayList<MediaType>();
  for (  HttpMessageConverter<?> entityConverter : getMessageConverters()) {
    List<MediaType> supportedMediaTypes=entityConverter.getSupportedMediaTypes();
    for (    MediaType supportedMediaType : supportedMediaTypes) {
      if (supportedMediaType.getCharSet() != null) {
        supportedMediaType=new MediaType(supportedMediaType.getType(),supportedMediaType.getSubtype());
      }
      allSupportedMediaTypes.add(supportedMediaType);
    }
  }
  Collections.sort(allSupportedMediaTypes);
  request.getHeaders().setAccept(allSupportedMediaTypes);
}
