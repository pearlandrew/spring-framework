{
  try {
    Expression e=parser.parseExpression(expression);
    if (e == null) {
      Assert.fail("Parser returned null for expression");
    }
    if (DEBUG) {
      SpelUtilities.printAbstractSyntaxTree(System.out,e);
    }
    StandardEvaluationContext lContext=TestScenarioCreator.getTestEvaluationContext();
    Assert.assertTrue("Expression is not writeable but should be",e.isWritable(lContext));
    e.setValue(lContext,value);
    Object a=expectedValue;
    Object b=e.getValue(lContext);
    if (!a.equals(b)) {
      Assert.fail("Not the same: [" + a + "] type="+ a.getClass()+ "  ["+ b+ "] type="+ b.getClass());
    }
  }
 catch (  EvaluationException ee) {
    ee.printStackTrace();
    Assert.fail("Unexpected Exception: " + ee.getMessage());
  }
catch (  ParseException pe) {
    pe.printStackTrace();
    Assert.fail("Unexpected Exception: " + pe.getMessage());
  }
}
