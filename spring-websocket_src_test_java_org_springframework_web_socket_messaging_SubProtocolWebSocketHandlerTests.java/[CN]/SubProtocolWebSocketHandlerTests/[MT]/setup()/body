{
  MockitoAnnotations.initMocks(this);
  this.webSocketHandler=new SubProtocolWebSocketHandler(this.inClientChannel,this.outClientChannel);
  when(stompHandler.getSupportedProtocols()).thenReturn(Arrays.asList("v10.stomp","v11.stomp","v12.stomp"));
  when(mqttHandler.getSupportedProtocols()).thenReturn(Arrays.asList("MQTT"));
  this.session=new TestWebSocketSession();
  this.session.setId("1");
}
