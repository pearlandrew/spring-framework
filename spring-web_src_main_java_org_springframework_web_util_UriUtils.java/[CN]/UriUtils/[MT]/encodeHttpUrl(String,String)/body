{
  Assert.notNull(httpUrl,"HTTP URL must not be null");
  Assert.hasLength(encoding,"Encoding must not be empty");
  Matcher matcher=HTTP_URL_PATTERN.matcher(httpUrl);
  if (matcher.matches()) {
    String scheme=matcher.group(1);
    String authority=matcher.group(2);
    String userinfo=matcher.group(4);
    String host=matcher.group(5);
    String portString=matcher.group(7);
    String path=matcher.group(8);
    String query=matcher.group(10);
    return encodeUriComponents(scheme,authority,userinfo,host,portString,path,query,null,encoding);
  }
 else {
    throw new IllegalArgumentException("[" + httpUrl + "] is not a valid HTTP URL");
  }
}
