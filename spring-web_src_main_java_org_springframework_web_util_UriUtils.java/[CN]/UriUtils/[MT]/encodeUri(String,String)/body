{
  Assert.notNull(uri,"'uri' must not be null");
  Assert.hasLength(encoding,"'encoding' must not be empty");
  Matcher m=URI_PATTERN.matcher(uri);
  if (m.matches()) {
    String scheme=m.group(2);
    String authority=m.group(3);
    String userinfo=m.group(5);
    String host=m.group(6);
    String port=m.group(8);
    String path=m.group(9);
    String query=m.group(11);
    String fragment=m.group(13);
    return encodeUriComponents(scheme,authority,userinfo,host,port,path,query,fragment,encoding);
  }
 else {
    throw new IllegalArgumentException("[" + uri + "] is not a valid URI");
  }
}
