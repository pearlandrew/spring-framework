{
  CountingTaskExecutor taskExecutor=new CountingTaskExecutor();
  DummyJob.count=0;
  JobDetail jobDetail=new JobDetail();
  jobDetail.setJobClass(DummyJob.class);
  jobDetail.setName("myJob");
  SimpleTriggerBean trigger=new SimpleTriggerBean();
  trigger.setName("myTrigger");
  trigger.setJobDetail(jobDetail);
  trigger.setStartDelay(1);
  trigger.setRepeatInterval(500);
  trigger.setRepeatCount(1);
  trigger.afterPropertiesSet();
  SchedulerFactoryBean bean=new SchedulerFactoryBean();
  bean.setTaskExecutor(taskExecutor);
  bean.setTriggers(new Trigger[]{trigger});
  bean.setJobDetails(new JobDetail[]{jobDetail});
  bean.afterPropertiesSet();
  Thread.sleep(500);
  assertTrue(DummyJob.count > 0);
  assertEquals(DummyJob.count,taskExecutor.count);
  bean.destroy();
}
