{
  Object target;
  boolean quartz2;
  try {
    Method getListenerManager=Scheduler.class.getMethod("getListenerManager");
    target=ReflectionUtils.invokeMethod(getListenerManager,getScheduler());
    quartz2=true;
  }
 catch (  NoSuchMethodException ex) {
    target=getScheduler();
    quartz2=false;
  }
  try {
    if (this.schedulerListeners != null) {
      Method addSchedulerListener=target.getClass().getMethod("addSchedulerListener",SchedulerListener.class);
      for (      SchedulerListener listener : this.schedulerListeners) {
        ReflectionUtils.invokeMethod(addSchedulerListener,target,listener);
      }
    }
    if (this.globalJobListeners != null) {
      Method addJobListener=target.getClass().getMethod((quartz2 ? "addJobListener" : "addGlobalJobListener"),JobListener.class);
      for (      JobListener listener : this.globalJobListeners) {
        ReflectionUtils.invokeMethod(addJobListener,target,listener);
      }
    }
    if (this.jobListeners != null) {
      for (      JobListener listener : this.jobListeners) {
        if (quartz2) {
          throw new IllegalStateException("Non-global JobListeners not supported on Quartz 2 - " + "manually register a Matcher against the Quartz ListenerManager instead");
        }
        getScheduler().addJobListener(listener);
      }
    }
    if (this.globalTriggerListeners != null) {
      Method addTriggerListener=target.getClass().getMethod((quartz2 ? "addTriggerListener" : "addGlobalTriggerListener"),TriggerListener.class);
      for (      TriggerListener listener : this.globalTriggerListeners) {
        ReflectionUtils.invokeMethod(addTriggerListener,target,listener);
      }
    }
    if (this.triggerListeners != null) {
      for (      TriggerListener listener : this.triggerListeners) {
        if (quartz2) {
          throw new IllegalStateException("Non-global TriggerListeners not supported on Quartz 2 - " + "manually register a Matcher against the Quartz ListenerManager instead");
        }
        getScheduler().addTriggerListener(listener);
      }
    }
  }
 catch (  NoSuchMethodException ex) {
    throw new IllegalStateException("Expected Quartz API not present: " + ex);
  }
}
