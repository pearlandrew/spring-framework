{
  if (value == null || value.getClass() == targetType)   return value;
  Class sourceType=value.getClass();
  Map<Class<?>,StandardIndividualTypeConverter> possibleConvertersToTheTargetType=converters.get(targetType);
  if (possibleConvertersToTheTargetType == null && targetType.isPrimitive()) {
    if (targetType == Integer.TYPE) {
      if (sourceType == Integer.class) {
        return value;
      }
      possibleConvertersToTheTargetType=converters.get(Integer.class);
    }
 else     if (targetType == Boolean.TYPE) {
      if (sourceType == Boolean.class) {
        return value;
      }
      possibleConvertersToTheTargetType=converters.get(Boolean.class);
    }
 else     if (targetType == Short.TYPE) {
      if (sourceType == Short.class) {
        return value;
      }
      possibleConvertersToTheTargetType=converters.get(Short.class);
    }
 else     if (targetType == Long.TYPE) {
      if (sourceType == Long.class) {
        return value;
      }
      possibleConvertersToTheTargetType=converters.get(Long.class);
    }
 else     if (targetType == Character.TYPE) {
      if (sourceType == Character.class) {
        return value;
      }
      possibleConvertersToTheTargetType=converters.get(Character.class);
    }
 else     if (targetType == Double.TYPE) {
      if (sourceType == Double.class) {
        return value;
      }
      possibleConvertersToTheTargetType=converters.get(Double.class);
    }
 else     if (targetType == Float.TYPE) {
      if (sourceType == Float.class) {
        return value;
      }
      possibleConvertersToTheTargetType=converters.get(Float.class);
    }
 else     if (targetType == Byte.TYPE) {
      if (sourceType == Byte.class) {
        return value;
      }
      possibleConvertersToTheTargetType=converters.get(Byte.class);
    }
  }
  Object result=null;
  if (possibleConvertersToTheTargetType != null) {
    StandardIndividualTypeConverter aConverter=possibleConvertersToTheTargetType.get(value.getClass());
    if (aConverter != null) {
      try {
        result=aConverter.convert(value);
      }
 catch (      EvaluationException ee) {
        if (ee instanceof SpelException) {
          throw (SpelException)ee;
        }
 else {
          throw new SpelException(SpelMessages.PROBLEM_DURING_TYPE_CONVERSION,ee.getMessage());
        }
      }
    }
  }
  if (result != null)   return result;
  throw new SpelException(SpelMessages.TYPE_CONVERSION_ERROR,value.getClass(),targetType);
}
