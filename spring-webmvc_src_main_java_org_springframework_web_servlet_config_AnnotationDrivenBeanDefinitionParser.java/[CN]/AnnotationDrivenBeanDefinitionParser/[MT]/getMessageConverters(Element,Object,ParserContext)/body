{
  Element convertersElement=DomUtils.getChildElementByTagName(element,"message-converters");
  ManagedList<? super Object> messageConverters=new ManagedList<Object>();
  if (convertersElement != null) {
    messageConverters.setSource(source);
    for (    Element converter : DomUtils.getChildElementsByTagName(convertersElement,"bean")) {
      BeanDefinitionHolder beanDef=parserContext.getDelegate().parseBeanDefinitionElement(converter);
      beanDef=parserContext.getDelegate().decorateBeanDefinitionIfRequired(converter,beanDef);
      messageConverters.add(beanDef);
    }
  }
  if (convertersElement == null || Boolean.valueOf(convertersElement.getAttribute("register-defaults"))) {
    messageConverters.setSource(source);
    messageConverters.add(createConverterBeanDefinition(ByteArrayHttpMessageConverter.class,source));
    RootBeanDefinition stringConverterDef=createConverterBeanDefinition(StringHttpMessageConverter.class,source);
    stringConverterDef.getPropertyValues().add("writeAcceptCharset",false);
    messageConverters.add(stringConverterDef);
    messageConverters.add(createConverterBeanDefinition(ResourceHttpMessageConverter.class,source));
    messageConverters.add(createConverterBeanDefinition(SourceHttpMessageConverter.class,source));
    messageConverters.add(createConverterBeanDefinition(XmlAwareFormHttpMessageConverter.class,source));
    if (jaxb2Present) {
      messageConverters.add(createConverterBeanDefinition(Jaxb2RootElementHttpMessageConverter.class,source));
    }
    if (jackson2Present) {
      messageConverters.add(createConverterBeanDefinition(MappingJackson2HttpMessageConverter.class,source));
    }
 else     if (jacksonPresent) {
      messageConverters.add(createConverterBeanDefinition(MappingJacksonHttpMessageConverter.class,source));
    }
    if (romePresent) {
      messageConverters.add(createConverterBeanDefinition(AtomFeedHttpMessageConverter.class,source));
      messageConverters.add(createConverterBeanDefinition(RssChannelHttpMessageConverter.class,source));
    }
  }
  return messageConverters;
}
