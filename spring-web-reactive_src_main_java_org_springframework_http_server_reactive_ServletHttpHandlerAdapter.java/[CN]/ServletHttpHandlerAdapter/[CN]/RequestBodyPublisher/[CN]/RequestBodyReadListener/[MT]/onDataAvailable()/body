{
  if (isSubscriptionCancelled()) {
    return;
  }
  logger.trace("onDataAvailable");
  ServletInputStream input=synchronizer.getRequest().getInputStream();
  while (true) {
    if (!checkSubscriptionForDemand()) {
      break;
    }
    boolean ready=input.isReady();
    logger.trace("Input ready: " + ready + " finished: "+ input.isFinished());
    if (!ready) {
      break;
    }
    int read=input.read(buffer);
    logger.trace("Input read:" + read);
    if (read == -1) {
      break;
    }
 else     if (read > 0) {
      DataBuffer dataBuffer=dataBufferFactory.allocateBuffer(read);
      dataBuffer.write(buffer,0,read);
      publishOnNext(dataBuffer);
    }
  }
}
