{
  ServletOutputStream output=this.synchronizer.getOutputStream();
  boolean ready=output.isReady();
  logger.debug("Output: " + ready + " buffer: "+ (buffer == null));
  if (ready) {
    if (this.buffer != null) {
      byte[] bytes=new byte[this.buffer.readableByteCount()];
      this.buffer.read(bytes);
      this.buffer=null;
      output.write(bytes);
      if (!subscriberComplete) {
        this.subscription.request(1);
      }
 else {
        this.synchronizer.writeComplete();
      }
    }
 else {
      this.subscription.request(1);
    }
  }
}
