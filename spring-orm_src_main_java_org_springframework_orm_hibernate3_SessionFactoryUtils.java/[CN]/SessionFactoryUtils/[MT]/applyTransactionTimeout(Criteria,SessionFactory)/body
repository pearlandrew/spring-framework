{
  Assert.notNull(criteria,"No Criteria object specified");
  if (sessionFactory != null) {
    SessionHolder sessionHolder=(SessionHolder)TransactionSynchronizationManager.getResource(sessionFactory);
    if (sessionHolder != null && sessionHolder.hasTimeout()) {
      criteria.setTimeout(sessionHolder.getTimeToLiveInSeconds());
    }
  }
}
