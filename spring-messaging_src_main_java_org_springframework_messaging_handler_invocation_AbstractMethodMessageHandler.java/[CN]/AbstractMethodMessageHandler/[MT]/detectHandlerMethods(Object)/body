{
  Class<?> handlerType=(handler instanceof String ? this.applicationContext.getType((String)handler) : handler.getClass());
  final Class<?> userType=ClassUtils.getUserClass(handlerType);
  Set<Method> methods=HandlerMethodSelector.selectMethods(userType,new ReflectionUtils.MethodFilter(){
    @Override public boolean matches(    Method method){
      return getMappingForMethod(method,userType) != null;
    }
  }
);
  for (  Method method : methods) {
    T mapping=getMappingForMethod(method,userType);
    registerHandlerMethod(handler,method,mapping);
  }
}
