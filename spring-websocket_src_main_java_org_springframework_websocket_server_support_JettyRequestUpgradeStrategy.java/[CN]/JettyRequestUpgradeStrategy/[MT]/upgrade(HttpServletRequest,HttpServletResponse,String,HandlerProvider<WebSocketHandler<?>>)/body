{
  Assert.state(this.factory.isUpgradeRequest(request,response),"Not a suitable WebSocket upgrade request");
  Assert.state(this.factory.acceptWebSocket(request,response),"Unable to accept WebSocket");
  request.setAttribute(HANDLER_PROVIDER_ATTR_NAME,handlerProvider);
}
