{
  request.setAttribute(HANDLER_PROVIDER,handlerProvider);
  Assert.state(factory.isUpgradeRequest(request,response),"Not a suitable WebSocket upgrade request");
  Assert.state(factory.acceptWebSocket(request,response),"Unable to accept WebSocket");
}
