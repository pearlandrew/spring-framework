{
  if (this.transactionHelperClass == null) {
    try {
      try {
        this.transactionHelperClass=getClass().getClassLoader().loadClass(TRANSACTION_HELPER_CLASS_NAME);
        Method getTransactionHelperMethod=this.transactionHelperClass.getMethod("getTransactionHelper",new Class[0]);
        this.transactionHelper=getTransactionHelperMethod.invoke(null,new Object[0]);
        logger.debug("WebLogic 8.1+ TransactionHelper found");
      }
 catch (      ClassNotFoundException ex) {
        this.transactionHelperClass=getClass().getClassLoader().loadClass(TX_HELPER_CLASS_NAME);
        logger.debug("WebLogic 7.0 TxHelper found");
      }
    }
 catch (    InvocationTargetException ex) {
      throw new TransactionSystemException("WebLogic's TransactionHelper.getTransactionHelper() method failed",ex.getTargetException());
    }
catch (    Exception ex) {
      throw new TransactionSystemException("Could not initialize WebLogicJtaTransactionManager because WebLogic API classes are not available",ex);
    }
  }
}
