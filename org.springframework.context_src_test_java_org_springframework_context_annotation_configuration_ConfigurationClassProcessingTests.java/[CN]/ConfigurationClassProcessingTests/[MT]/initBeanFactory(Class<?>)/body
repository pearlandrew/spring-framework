{
  DefaultListableBeanFactory factory=new DefaultListableBeanFactory();
  for (  Class<?> configClass : configClasses) {
    String configBeanName=configClass.getName();
    factory.registerBeanDefinition(configBeanName,new RootBeanDefinition(configClass));
  }
  ConfigurationClassPostProcessor ccpp=new ConfigurationClassPostProcessor();
  ccpp.postProcessBeanFactory(factory);
  RequiredAnnotationBeanPostProcessor rapp=new RequiredAnnotationBeanPostProcessor();
  rapp.setBeanFactory(factory);
  factory.addBeanPostProcessor(rapp);
  return factory;
}
