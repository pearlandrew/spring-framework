{
  try {
    XMLReader reader=XMLReaderFactory.createXMLReader();
    reader.setFeature("http://apache.org/xml/features/disallow-doctype-decl",!isSupportDtd());
    reader.setFeature("http://xml.org/sax/features/external-general-entities",isProcessExternalEntities());
    if (!isProcessExternalEntities()) {
      reader.setEntityResolver(NO_OP_ENTITY_RESOLVER);
    }
    byte[] bytes=StreamUtils.copyToByteArray(body);
    return new SAXSource(reader,new InputSource(new ByteArrayInputStream(bytes)));
  }
 catch (  SAXException ex) {
    throw new HttpMessageNotReadableException("Could not parse document: " + ex.getMessage(),ex);
  }
}
