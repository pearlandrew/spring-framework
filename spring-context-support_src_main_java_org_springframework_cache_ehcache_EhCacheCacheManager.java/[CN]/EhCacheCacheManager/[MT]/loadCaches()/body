{
  net.sf.ehcache.CacheManager cacheManager=getCacheManager();
  Assert.notNull(cacheManager,"A backing EhCache CacheManager is required");
  Status status=cacheManager.getStatus();
  Assert.isTrue(Status.STATUS_ALIVE.equals(status),"An 'alive' EhCache CacheManager is required - current cache is " + status.toString());
  String[] names=cacheManager.getCacheNames();
  Collection<Cache> caches=new LinkedHashSet<Cache>(names.length);
  for (  String name : names) {
    caches.add(new EhCacheCache(cacheManager.getEhcache(name)));
  }
  return caches;
}
