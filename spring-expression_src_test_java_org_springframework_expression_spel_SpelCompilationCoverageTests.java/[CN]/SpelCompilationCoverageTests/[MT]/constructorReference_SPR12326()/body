{
  String type=this.getClass().getName();
  String prefix="new " + type + ".Obj";
  expression=parser.parseExpression(prefix + "([0])");
  assertEquals("test",((Obj)expression.getValue(new Object[]{"test"})).param1);
  assertCanCompile(expression);
  assertEquals("test",((Obj)expression.getValue(new Object[]{"test"})).param1);
  expression=parser.parseExpression(prefix + "2('foo','bar').output");
  assertEquals("foobar",expression.getValue(String.class));
  assertCanCompile(expression);
  assertEquals("foobar",expression.getValue(String.class));
  expression=parser.parseExpression(prefix + "2('foo').output");
  assertEquals("foo",expression.getValue(String.class));
  assertCanCompile(expression);
  assertEquals("foo",expression.getValue(String.class));
  expression=parser.parseExpression(prefix + "2().output");
  assertEquals("",expression.getValue(String.class));
  assertCanCompile(expression);
  assertEquals("",expression.getValue(String.class));
  expression=parser.parseExpression(prefix + "3(1,2,3).output");
  assertEquals("123",expression.getValue(String.class));
  assertCanCompile(expression);
  assertEquals("123",expression.getValue(String.class));
  expression=parser.parseExpression(prefix + "3(1).output");
  assertEquals("1",expression.getValue(String.class));
  assertCanCompile(expression);
  assertEquals("1",expression.getValue(String.class));
  expression=parser.parseExpression(prefix + "3().output");
  assertEquals("",expression.getValue(String.class));
  assertCanCompile(expression);
  assertEquals("",expression.getValue(String.class));
  expression=parser.parseExpression(prefix + "3('abc',5.0f,1,2,3).output");
  assertEquals("abc:5.0:123",expression.getValue(String.class));
  assertCanCompile(expression);
  assertEquals("abc:5.0:123",expression.getValue(String.class));
  expression=parser.parseExpression(prefix + "3('abc',5.0f,1).output");
  assertEquals("abc:5.0:1",expression.getValue(String.class));
  assertCanCompile(expression);
  assertEquals("abc:5.0:1",expression.getValue(String.class));
  expression=parser.parseExpression(prefix + "3('abc',5.0f).output");
  assertEquals("abc:5.0:",expression.getValue(String.class));
  assertCanCompile(expression);
  assertEquals("abc:5.0:",expression.getValue(String.class));
  expression=parser.parseExpression(prefix + "4(#root).output");
  assertEquals("123",expression.getValue(new int[]{1,2,3},String.class));
  assertCanCompile(expression);
  assertEquals("123",expression.getValue(new int[]{1,2,3},String.class));
}
