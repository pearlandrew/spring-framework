{
  ConversationManager manager=createConversationManager();
  Conversation conversation=manager.getCurrentConversation();
  manager.endCurrentConversation(true);
  Conversation conversation2=manager.getCurrentConversation();
  assertNotSame("an ended conversation must not be reused",conversation,conversation2);
  manager.endCurrentConversation(true);
  conversation=manager.getCurrentConversation(false);
  assertNull("Requesting the current conversation without implicit creation must not create one",conversation);
}
