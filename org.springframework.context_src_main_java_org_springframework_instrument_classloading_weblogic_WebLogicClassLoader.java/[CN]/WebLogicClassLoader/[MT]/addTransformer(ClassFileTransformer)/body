{
  Assert.notNull(transformer,"ClassFileTransformer must not be null");
  try {
    InvocationHandler adapter=new WebLogicClassPreProcessorAdapter(transformer,this.internalClassLoader);
    Object adapterInstance=Proxy.newProxyInstance(this.wlPreProcessorClass.getClassLoader(),new Class[]{this.wlPreProcessorClass},adapter);
    this.addPreProcessorMethod.invoke(this.internalClassLoader,adapterInstance);
  }
 catch (  InvocationTargetException ex) {
    throw new IllegalStateException("WebLogic addInstanceClassPreProcessor method threw exception",ex.getCause());
  }
catch (  Exception ex) {
    throw new IllegalStateException("Could not invoke WebLogic addInstanceClassPreProcessor method",ex);
  }
}
