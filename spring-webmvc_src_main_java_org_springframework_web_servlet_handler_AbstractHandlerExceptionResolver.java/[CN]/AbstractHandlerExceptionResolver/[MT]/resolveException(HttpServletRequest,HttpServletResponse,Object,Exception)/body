{
  if (shouldApplyTo(request,handler)) {
    if (this.logger.isDebugEnabled()) {
      this.logger.debug("Resolving exception from handler [" + handler + "]: "+ ex);
    }
    prepareResponse(ex,response);
    ModelAndView mav=doResolveException(request,response,handler,ex);
    if (mav != null) {
      logException(ex,request);
    }
    return mav;
  }
 else {
    return null;
  }
}
