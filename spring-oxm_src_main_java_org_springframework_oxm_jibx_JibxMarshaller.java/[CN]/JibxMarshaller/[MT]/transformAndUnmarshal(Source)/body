{
  try {
    Transformer transformer=transformerFactory.newTransformer();
    ByteArrayOutputStream os=new ByteArrayOutputStream();
    transformer.transform(source,new StreamResult(os));
    ByteArrayInputStream is=new ByteArrayInputStream(os.toByteArray());
    return unmarshalInputStream(is);
  }
 catch (  TransformerException ex) {
    throw new MarshallingFailureException("Could not transform from [" + ClassUtils.getShortName(source.getClass()) + "]");
  }
}
