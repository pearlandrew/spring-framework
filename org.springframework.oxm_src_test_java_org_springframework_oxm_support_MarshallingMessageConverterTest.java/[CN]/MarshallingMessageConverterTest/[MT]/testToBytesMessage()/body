{
  MockControl bytesMessageControl=MockControl.createControl(BytesMessage.class);
  BytesMessage bytesMessageMock=(BytesMessage)bytesMessageControl.getMock();
  Object toBeMarshalled=new Object();
  sessionControl.expectAndReturn(sessionMock.createBytesMessage(),bytesMessageMock);
  marshallerMock.marshal(toBeMarshalled,new StringResult());
  marshallerControl.setMatcher(MockControl.ALWAYS_MATCHER);
  bytesMessageMock.writeBytes(new byte[0]);
  bytesMessageControl.setMatcher(MockControl.ALWAYS_MATCHER);
  marshallerControl.replay();
  unmarshallerControl.replay();
  sessionControl.replay();
  bytesMessageControl.replay();
  converter.toMessage(toBeMarshalled,sessionMock);
  marshallerControl.verify();
  unmarshallerControl.verify();
  sessionControl.verify();
  bytesMessageControl.verify();
}
