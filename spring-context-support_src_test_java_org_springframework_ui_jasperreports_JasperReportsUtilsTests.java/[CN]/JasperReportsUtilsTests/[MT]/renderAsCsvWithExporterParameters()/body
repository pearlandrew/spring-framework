{
  StringWriter writer=new StringWriter();
  Map<JRExporterParameter,Object> exporterParameters=new HashMap<JRExporterParameter,Object>();
  exporterParameters.put(JRCsvExporterParameter.FIELD_DELIMITER,"~");
  JasperReportsUtils.renderAsCsv(getReport(),getParameters(),getData(),writer,exporterParameters);
  String output=writer.getBuffer().toString();
  assertCsvOutputCorrect(output);
  assertTrue("Delimiter is incorrect",output.contains("~"));
}
