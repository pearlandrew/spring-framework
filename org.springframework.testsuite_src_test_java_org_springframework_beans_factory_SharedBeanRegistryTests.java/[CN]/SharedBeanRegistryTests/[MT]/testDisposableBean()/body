{
  DefaultSingletonBeanRegistry beanRegistry=new DefaultSingletonBeanRegistry();
  DerivedTestBean tb=new DerivedTestBean();
  beanRegistry.registerSingleton("tb",tb);
  beanRegistry.registerDisposableBean("tb",tb);
  assertSame(tb,beanRegistry.getSingleton("tb"));
  assertSame(tb,beanRegistry.getSingleton("tb"));
  assertEquals(1,beanRegistry.getSingletonCount());
  assertEquals(1,beanRegistry.getSingletonNames().length);
  assertTrue(Arrays.asList(beanRegistry.getSingletonNames()).contains("tb"));
  assertFalse(tb.wasDestroyed());
  beanRegistry.destroySingletons();
  assertEquals(0,beanRegistry.getSingletonCount());
  assertEquals(0,beanRegistry.getSingletonNames().length);
  assertTrue(tb.wasDestroyed());
}
