{
  @SuppressWarnings("serial") DispatcherServlet servlet=new DispatcherServlet(){
    protected WebApplicationContext createWebApplicationContext(    WebApplicationContext parent){
      GenericWebApplicationContext wac=new GenericWebApplicationContext();
      wac.registerBeanDefinition("controller",new RootBeanDefinition(ChildController.class));
      wac.refresh();
      return wac;
    }
  }
;
  servlet.init(new MockServletConfig());
  MockHttpServletRequest request=new MockHttpServletRequest("GET","/child/test");
  request.addParameter("childId","100");
  MockHttpServletResponse response=new MockHttpServletResponse();
  try {
    servlet.service(request,response);
  }
 catch (  NestedServletException ex) {
    assertTrue(ex.getCause() instanceof IllegalStateException);
    assertTrue(ex.getCause().getMessage().contains("doGet"));
  }
}
