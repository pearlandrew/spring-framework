{
  PersonDto source=new PersonDto();
  NestedDto nested=new NestedDto();
  nested.foo="bar";
  source.setNested(nested);
  Person target=new Person();
  Mapper<NestedDto,Nested> nestedMapper=new Mapper<NestedDto,Nested>(){
    public Nested map(    NestedDto source,    Nested target){
      target.setFoo(source.getFoo() + " and baz");
      return target;
    }
  }
;
  Mapper<PersonDto,Person> mapper=MapperFactory.mapperBuilder(PersonDto.class,Person.class).setAutoMappingEnabled(false).addMapping("nested").addNestedMapper(nestedMapper).getMapper();
  mapper.map(source,target);
  assertEquals("bar and baz",target.nested.foo);
}
