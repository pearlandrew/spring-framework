{
  JndiObjectFactoryBean jof=new JndiObjectFactoryBean();
  TestBean tb=new TestBean();
  final Context mockCtx=createMock(Context.class);
  expect(mockCtx.lookup("foo")).andReturn(tb);
  mockCtx.close();
  expectLastCall().times(2);
  replay(mockCtx);
  jof.setJndiTemplate(new JndiTemplate(){
    protected Context createInitialContext(){
      return mockCtx;
    }
  }
);
  jof.setJndiName("foo");
  jof.setProxyInterface(ITestBean.class);
  jof.setExposeAccessContext(true);
  jof.afterPropertiesSet();
  assertTrue(jof.getObject() instanceof ITestBean);
  ITestBean proxy=(ITestBean)jof.getObject();
  assertEquals(0,tb.getAge());
  proxy.setAge(99);
  assertEquals(99,tb.getAge());
  proxy.equals(proxy);
  proxy.hashCode();
  proxy.toString();
  verify(mockCtx);
}
