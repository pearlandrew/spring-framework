{
  Map<String,Object> original=new HashMap<>();
  original.put("foo","bar");
  original.put("bar","baz");
  GenericMessage<String> message=new GenericMessage<>("p",original);
  MessageHeaderAccessor headers=new MessageHeaderAccessor(message);
  headers.setHeader("foo","BAR");
  Map<String,Object> actual=headers.toMap();
  assertEquals(4,actual.size());
  assertNotNull(actual.get(MessageHeaders.ID));
  assertNotNull(actual.get(MessageHeaders.TIMESTAMP));
  assertEquals("BAR",actual.get("foo"));
  assertEquals("baz",actual.get("bar"));
}
