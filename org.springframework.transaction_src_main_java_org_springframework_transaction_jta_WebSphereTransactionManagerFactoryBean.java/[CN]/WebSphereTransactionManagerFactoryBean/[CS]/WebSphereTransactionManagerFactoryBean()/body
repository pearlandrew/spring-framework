{
  try {
    Class clazz=Thread.currentThread().getContextClassLoader().loadClass(FACTORY_CLASS_5_1);
    Method method=clazz.getMethod("getTransactionManager",(Class[])null);
    this.transactionManager=(TransactionManager)method.invoke(null,(Object[])null);
  }
 catch (  ClassNotFoundException ex) {
    throw new TransactionSystemException("Could not find WebSphere 5.1/6.0/6.1 TransactionManager factory class",ex);
  }
catch (  InvocationTargetException ex) {
    throw new TransactionSystemException("WebSphere's TransactionManagerFactory.getTransactionManager method failed",ex.getTargetException());
  }
catch (  Exception ex) {
    throw new TransactionSystemException("Could not access WebSphere's TransactionManagerFactory.getTransactionManager method",ex);
  }
}
