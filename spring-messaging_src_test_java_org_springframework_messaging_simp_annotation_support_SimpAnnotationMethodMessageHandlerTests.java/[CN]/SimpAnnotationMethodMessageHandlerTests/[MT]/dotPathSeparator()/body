{
  DotPathSeparatorController controller=new DotPathSeparatorController();
  this.messageHandler.setPathMatcher(new AntPathMatcher("."));
  this.messageHandler.registerHandler(controller);
  this.messageHandler.setDestinationPrefixes(Arrays.asList("/app1","/app2/"));
  SimpMessageHeaderAccessor headers=SimpMessageHeaderAccessor.create();
  headers.setSessionId("session1");
  headers.setSessionAttributes(new HashMap<>());
  headers.setDestination("/app1/pre.foo");
  Message<?> message=MessageBuilder.withPayload(new byte[0]).setHeaders(headers).build();
  this.messageHandler.handleMessage(message);
  assertEquals("handleFoo",controller.method);
  headers=SimpMessageHeaderAccessor.create();
  headers.setSessionId("session1");
  headers.setSessionAttributes(new HashMap<>());
  headers.setDestination("/app2/pre.foo");
  message=MessageBuilder.withPayload(new byte[0]).setHeaders(headers).build();
  this.messageHandler.handleMessage(message);
  assertEquals("handleFoo",controller.method);
}
