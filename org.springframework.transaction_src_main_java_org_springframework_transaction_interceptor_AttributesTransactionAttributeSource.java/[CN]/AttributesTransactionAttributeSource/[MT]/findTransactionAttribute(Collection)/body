{
  if (atts == null) {
    return null;
  }
  TransactionAttribute txAttribute=null;
  for (Iterator it=atts.iterator(); it.hasNext() && txAttribute == null; ) {
    Object att=it.next();
    if (att instanceof TransactionAttribute) {
      txAttribute=(TransactionAttribute)att;
    }
  }
  if (txAttribute instanceof RuleBasedTransactionAttribute) {
    RuleBasedTransactionAttribute rbta=(RuleBasedTransactionAttribute)txAttribute;
    List rollbackRules=new LinkedList();
    for (Iterator it=atts.iterator(); it.hasNext(); ) {
      Object att=it.next();
      if (att instanceof RollbackRuleAttribute) {
        rollbackRules.add(att);
      }
    }
    rbta.setRollbackRules(rollbackRules);
  }
  return txAttribute;
}
