{
  final boolean commit=this.complete || !isRollback();
  if (this.transactionStatus != null) {
    try {
      if (commit) {
        this.transactionManager.commit(this.transactionStatus);
        this.logger.debug("Committed transaction after execution of test [" + getName() + "].");
      }
 else {
        this.transactionManager.rollback(this.transactionStatus);
        this.logger.debug("Rolled back transaction after execution of test [" + getName() + "].");
      }
    }
  finally {
      this.transactionStatus=null;
    }
  }
}
