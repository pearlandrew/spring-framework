{
  RedirectView rv=new RedirectView();
  rv.setUrl("http://url.somewhere.com/path");
  rv.setHttp10Compatible(false);
  MockHttpServletRequest request=new MockHttpServletRequest();
  MockHttpServletResponse response=new MockHttpServletResponse();
  FlashMap flashMap=new FlashMap();
  flashMap.put("successMessage","yay!");
  request.setAttribute(FlashMapManager.CURRENT_FLASH_MAP_ATTRIBUTE,flashMap);
  rv.render(new ModelMap("id","1"),request,response);
  assertEquals(303,response.getStatus());
  assertEquals("http://url.somewhere.com/path?id=1",response.getHeader("Location"));
  MockHttpServletRequest nextRequest=new MockHttpServletRequest("GET","/path");
  nextRequest.addParameter("id","1");
  assertTrue(flashMap.matches(nextRequest));
}
