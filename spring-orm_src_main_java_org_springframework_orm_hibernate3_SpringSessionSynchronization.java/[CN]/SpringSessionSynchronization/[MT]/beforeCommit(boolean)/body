{
  if (!readOnly) {
    Session session=getCurrentSession();
    if (!session.getFlushMode().lessThan(FlushMode.COMMIT)) {
      try {
        SessionFactoryUtils.logger.debug("Flushing Hibernate Session on transaction synchronization");
        session.flush();
      }
 catch (      HibernateException ex) {
        throw translateException(ex);
      }
    }
  }
}
