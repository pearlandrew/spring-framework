{
  Query query=mock(Query.class);
  given(session.createQuery("some query string")).willReturn(query);
  given(query.setParameter(0,"myvalue")).willReturn(query);
  given(query.executeUpdate()).willReturn(5);
  int result=hibernateTemplate.bulkUpdate("some query string","myvalue");
  assertTrue("Correct list",result == 5);
  verify(query).setParameter(0,"myvalue");
  verify(session).flush();
  verify(session).close();
}
