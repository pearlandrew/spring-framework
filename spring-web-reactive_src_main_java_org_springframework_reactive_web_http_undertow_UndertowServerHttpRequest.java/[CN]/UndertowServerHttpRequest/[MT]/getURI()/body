{
  try {
    StringBuilder uri=new StringBuilder(exchange.getRequestPath());
    if (StringUtils.hasLength(exchange.getQueryString())) {
      uri.append('?').append(exchange.getQueryString());
    }
    return new URI(uri.toString());
  }
 catch (  URISyntaxException ex) {
    throw new IllegalStateException("Could not get URI: " + ex.getMessage(),ex);
  }
}
