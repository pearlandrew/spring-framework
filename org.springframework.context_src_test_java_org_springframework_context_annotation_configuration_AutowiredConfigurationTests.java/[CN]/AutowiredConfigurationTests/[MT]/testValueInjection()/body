{
  ClassPathXmlApplicationContext factory=new ClassPathXmlApplicationContext("ValueInjectionTests.xml",AutowiredConfigurationTests.class);
  System.clearProperty("myProp");
  TestBean testBean=factory.getBean("testBean",TestBean.class);
  assertNull(testBean.getName());
  testBean=factory.getBean("testBean2",TestBean.class);
  assertNull(testBean.getName());
  System.setProperty("myProp","foo");
  testBean=factory.getBean("testBean",TestBean.class);
  assertThat(testBean.getName(),equalTo("foo"));
  testBean=factory.getBean("testBean2",TestBean.class);
  assertThat(testBean.getName(),equalTo("foo"));
  System.clearProperty("myProp");
  testBean=factory.getBean("testBean",TestBean.class);
  assertNull(testBean.getName());
  testBean=factory.getBean("testBean2",TestBean.class);
  assertNull(testBean.getName());
}
