{
  DefaultListableBeanFactory lbf=new DefaultListableBeanFactory();
  RootBeanDefinition bd=new RootBeanDefinition(TestBean.class,new MutablePropertyValues());
  lbf.registerBeanDefinition("test",bd);
  DependenciesBean bean=(DependenciesBean)lbf.autowire(DependenciesBean.class,AutowireCapableBeanFactory.AUTOWIRE_BY_TYPE,true);
  TestBean test=(TestBean)lbf.getBean("test");
  assertEquals(test,bean.getSpouse());
}
