{
  DefaultListableBeanFactory lbf=new DefaultListableBeanFactory();
  MutablePropertyValues pvs=new MutablePropertyValues();
  pvs.add("name","Rod");
  RootBeanDefinition bd=new RootBeanDefinition(TestBean.class,pvs);
  lbf.registerBeanDefinition("rod",bd);
  assertEquals(1,lbf.getBeanDefinitionCount());
  Object registered=lbf.autowire(DependenciesBean.class,AutowireCapableBeanFactory.AUTOWIRE_AUTODETECT,true);
  assertEquals(1,lbf.getBeanDefinitionCount());
  DependenciesBean kerry=(DependenciesBean)registered;
  TestBean rod=(TestBean)lbf.getBean("rod");
  assertSame(rod,kerry.getSpouse());
}
