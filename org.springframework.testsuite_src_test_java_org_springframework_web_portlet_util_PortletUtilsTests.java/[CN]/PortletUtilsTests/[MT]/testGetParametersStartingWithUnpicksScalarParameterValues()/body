{
  final String targetPrefix="francisan_";
  final String badKey="dominican_Bernard";
  MockPortletRequest request=new MockPortletRequest();
  request.setParameter(targetPrefix + "William","Baskerville");
  request.setParameter(targetPrefix + "Adso",new String[]{"Melk","Of Melk"});
  request.setParameter(badKey,"Gui");
  Map actualParameters=PortletUtils.getParametersStartingWith(request,targetPrefix);
  assertNotNull("PortletUtils.getParametersStartingWith(..) must never return a null Map",actualParameters);
  assertEquals("Obviously not finding all of the correct parameters",2,actualParameters.size());
  assertTrue("Obviously not finding all of the correct parameters",actualParameters.containsKey("William"));
  assertEquals("Not picking scalar parameter value out correctly","Baskerville",actualParameters.get("William"));
  assertTrue("Obviously not finding all of the correct parameters",actualParameters.containsKey("Adso"));
  assertFalse("Obviously not finding all of the correct parameters (is returning a parameter whose name does not start with the desired prefix",actualParameters.containsKey(badKey));
}
