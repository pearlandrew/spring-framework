{
  MockControl mockSession=MockControl.createControl(PortletSession.class);
  PortletSession session=(PortletSession)mockSession.getMock();
  MockControl mockRequest=MockControl.createControl(PortletRequest.class);
  PortletRequest request=(PortletRequest)mockRequest.getMock();
  request.getPortletSession();
  mockRequest.setReturnValue(session);
  session.setAttribute("foo","foo",PortletSession.APPLICATION_SCOPE);
  mockSession.setVoidCallable();
  mockRequest.replay();
  mockSession.replay();
  PortletUtils.setSessionAttribute(request,"foo","foo",PortletSession.APPLICATION_SCOPE);
  mockRequest.verify();
  mockSession.verify();
}
