{
  Map optionMap=(Map)this.optionSource;
  for (Iterator iterator=optionMap.entrySet().iterator(); iterator.hasNext(); ) {
    Map.Entry entry=(Map.Entry)iterator.next();
    Object mapKey=entry.getKey();
    Object mapValue=entry.getValue();
    BeanWrapper mapKeyWrapper=PropertyAccessorFactory.forBeanPropertyAccess(mapKey);
    BeanWrapper mapValueWrapper=PropertyAccessorFactory.forBeanPropertyAccess(mapValue);
    Object renderValue=(this.valueProperty != null ? mapKeyWrapper.getPropertyValue(this.valueProperty) : mapKey.toString());
    Object renderLabel=(this.labelProperty != null ? mapValueWrapper.getPropertyValue(this.labelProperty) : mapValue.toString());
    renderOption(tagWriter,mapKey,renderValue,renderLabel);
  }
}
