{
  CorsConfiguration config=new CorsConfiguration();
  config.addAllowedOrigin("*");
  this.handlerMapping.registerCorsConfiguration("/foo",config);
  this.request.setMethod(RequestMethod.GET.name());
  this.request.setRequestURI("/foo");
  this.request.addHeader(HttpHeaders.ORIGIN,"http://domain2.com/test.html");
  this.request.addHeader(HttpHeaders.ACCESS_CONTROL_REQUEST_METHOD,"GET");
  HandlerExecutionChain chain=handlerMapping.getHandler(this.request);
  assertTrue(chain.getHandler() instanceof SimpleHandler);
  config=getCorsConfiguration(chain,false);
  assertNotNull(config);
  assertArrayEquals(config.getAllowedOrigins().toArray(),new String[]{"*"});
}
