{
  Assert.notNull(mergedConfig,"mergedConfig must not be null");
  List<SmartContextLoader> candidates=Arrays.asList(getXmlLoader(),getAnnotationConfigLoader());
  if (mergedConfig.hasLocations() && mergedConfig.hasClasses()) {
    throw new IllegalStateException(String.format("Neither %s nor %s supports loading an ApplicationContext from %s: " + "declare either 'locations' or 'classes' but not both.",name(getXmlLoader()),name(getAnnotationConfigLoader()),mergedConfig));
  }
  for (  SmartContextLoader loader : candidates) {
    if (supports(loader,mergedConfig)) {
      return delegateLoading(loader,mergedConfig);
    }
  }
  if (!mergedConfig.getContextInitializerClasses().isEmpty() || !mergedConfig.getContextCustomizers().isEmpty()) {
    return delegateLoading(getAnnotationConfigLoader(),mergedConfig);
  }
  throw new IllegalStateException(String.format("Neither %s nor %s was able to load an ApplicationContext from %s.",name(getXmlLoader()),name(getAnnotationConfigLoader()),mergedConfig));
}
