{
  if (!isClosed()) {
    logger.debug("Closing session");
    if (isActive()) {
      writeFrame(SockJsFrame.closeFrameGoAway());
    }
    super.close();
    cancelHeartbeat();
    closeInternal();
  }
}
