{
  if (!isClosed()) {
    logger.debug("Closing session");
    super.close();
    if (isActive()) {
      writeFrame(SockJsFrame.closeFrameGoAway());
    }
    cancelHeartbeat();
    closeInternal();
    getSockJsHandler().sessionClosed(this);
  }
}
