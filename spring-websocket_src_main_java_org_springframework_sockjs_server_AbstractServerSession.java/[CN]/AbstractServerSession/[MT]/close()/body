{
  if (!isClosed()) {
    logger.debug("Closing session");
    if (isActive()) {
      try {
        writeFrame(SockJsFrame.closeFrameGoAway());
      }
 catch (      Exception e) {
      }
    }
    super.close();
    cancelHeartbeat();
    closeInternal();
  }
}
