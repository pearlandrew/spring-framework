{
  return new ServletFileUpload(){
    public List parseRequest(    HttpServletRequest request){
      if (request instanceof MultipartHttpServletRequest) {
        throw new IllegalStateException("Already a multipart request");
      }
      List fileItems=new ArrayList();
      MockFileItem fileItem1=new MockFileItem("field1","type1",empty ? "" : "field1.txt",empty ? "" : "text1");
      MockFileItem fileItem2=new MockFileItem("field2","type2",empty ? "" : "C:/field2.txt",empty ? "" : "text2");
      MockFileItem fileItem2x=new MockFileItem("field2x","type2",empty ? "" : "C:\\field2x.txt",empty ? "" : "text2");
      MockFileItem fileItem3=new MockFileItem("field3",null,null,"value3");
      MockFileItem fileItem4=new MockFileItem("field4",null,null,"value4");
      MockFileItem fileItem5=new MockFileItem("field4",null,null,"value5");
      fileItems.add(fileItem1);
      fileItems.add(fileItem2);
      fileItems.add(fileItem2x);
      fileItems.add(fileItem3);
      fileItems.add(fileItem4);
      fileItems.add(fileItem5);
      return fileItems;
    }
  }
;
}
