{
  SQLException sex=new SQLException("bad update");
  final String sql="UPDATE NOSUCHTABLE SET DATE_DISPATCHED = SYSDATE WHERE ID = 4";
  MockControl ctrlStatement=MockControl.createControl(Statement.class);
  Statement mockStatement=(Statement)ctrlStatement.getMock();
  mockStatement.executeUpdate(sql);
  ctrlStatement.setThrowable(sex);
  mockStatement.close();
  ctrlStatement.setVoidCallable();
  mockConnection.createStatement();
  ctrlConnection.setReturnValue(mockStatement);
  ctrlStatement.replay();
  replay();
  JdbcTemplate template=new JdbcTemplate(mockDataSource);
  try {
    template.update(sql);
  }
 catch (  DataAccessException ex) {
    assertTrue("root cause is correct",ex.getCause() == sex);
  }
  ctrlStatement.verify();
}
