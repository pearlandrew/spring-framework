{
  Advisor[] advisors=getAdvisors();
  List freshAdvisors=new ArrayList(advisors.length);
  for (int i=0; i < advisors.length; i++) {
    if (advisors[i] instanceof PrototypePlaceholderAdvisor) {
      PrototypePlaceholderAdvisor pa=(PrototypePlaceholderAdvisor)advisors[i];
      if (logger.isDebugEnabled()) {
        logger.debug("Refreshing bean named '" + pa.getBeanName() + "'");
      }
      if (this.beanFactory == null) {
        throw new IllegalStateException("No BeanFactory available anymore (probably due to serialization) " + "- cannot resolve prototype advisor '" + pa.getBeanName() + "'");
      }
      Object bean=this.beanFactory.getBean(pa.getBeanName());
      Advisor refreshedAdvisor=namedBeanToAdvisor(bean);
      freshAdvisors.add(refreshedAdvisor);
    }
 else {
      freshAdvisors.add(advisors[i]);
    }
  }
  return freshAdvisors;
}
