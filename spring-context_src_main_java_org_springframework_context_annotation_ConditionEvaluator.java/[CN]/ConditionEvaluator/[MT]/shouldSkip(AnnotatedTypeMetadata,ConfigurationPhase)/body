{
  if (metadata == null || !metadata.isAnnotated(Conditional.class.getName())) {
    return false;
  }
  if (phase == null) {
    if (metadata instanceof AnnotationMetadata && ConfigurationClassUtils.isConfigurationCandidate((AnnotationMetadata)metadata)) {
      return shouldSkip(metadata,ConfigurationPhase.PARSE_CONFIGURATION);
    }
    return shouldSkip(metadata,ConfigurationPhase.REGISTER_BEAN);
  }
  for (  String[] conditionClasses : getConditionClasses(metadata)) {
    for (    String conditionClass : conditionClasses) {
      Condition condition=getCondition(conditionClass,this.context.getClassLoader());
      ConfigurationPhase requiredPhase=null;
      if (condition instanceof ConfigurationCondition) {
        requiredPhase=((ConfigurationCondition)condition).getConfigurationPhase();
      }
      if (requiredPhase == null || requiredPhase == phase) {
        if (!condition.matches(this.context,metadata)) {
          return true;
        }
      }
    }
  }
  return false;
}
