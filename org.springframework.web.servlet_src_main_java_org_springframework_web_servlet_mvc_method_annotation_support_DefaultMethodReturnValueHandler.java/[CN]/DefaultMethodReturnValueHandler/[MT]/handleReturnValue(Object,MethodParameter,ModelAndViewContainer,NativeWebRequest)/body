{
  if (mavResolvers != null) {
    for (    ModelAndViewResolver resolver : mavResolvers) {
      Class<?> handlerType=returnType.getDeclaringClass();
      Method method=returnType.getMethod();
      ExtendedModelMap model=(ExtendedModelMap)mavContainer.getModel();
      ModelAndView mav=resolver.resolveModelAndView(method,handlerType,returnValue,model,request);
      if (mav != ModelAndViewResolver.UNRESOLVED) {
        mavContainer.addAllAttributes(mav.getModel());
        mavContainer.setViewName(mav.getViewName());
        if (!mav.isReference()) {
          mavContainer.setView(mav.getView());
        }
        return;
      }
    }
  }
  if (returnValue == null) {
    return;
  }
 else   if (!BeanUtils.isSimpleProperty(returnValue.getClass())) {
    String name=ModelFactory.getNameForReturnValue(returnValue,returnType);
    mavContainer.addAttribute(name,returnValue);
    return;
  }
 else {
    Method method=returnType.getMethod();
    String returnTypeName=returnType.getParameterType().getName();
    throw new UnsupportedOperationException("Unknown return type: " + returnTypeName + " in method: "+ method);
  }
}
