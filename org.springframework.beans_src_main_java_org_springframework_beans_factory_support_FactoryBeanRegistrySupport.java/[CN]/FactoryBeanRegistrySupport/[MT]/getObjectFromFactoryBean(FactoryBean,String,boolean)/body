{
  if (factory.isSingleton() && containsSingleton(beanName)) {
synchronized (getSingletonMutex()) {
      Object object=this.factoryBeanObjectCache.get(beanName);
      if (object == null) {
        object=doGetObjectFromFactoryBean(factory,beanName,shouldPostProcess);
        this.factoryBeanObjectCache.put(beanName,(object != null ? object : NULL_OBJECT));
      }
      return (object != NULL_OBJECT ? object : null);
    }
  }
 else {
    return doGetObjectFromFactoryBean(factory,beanName,shouldPostProcess);
  }
}
