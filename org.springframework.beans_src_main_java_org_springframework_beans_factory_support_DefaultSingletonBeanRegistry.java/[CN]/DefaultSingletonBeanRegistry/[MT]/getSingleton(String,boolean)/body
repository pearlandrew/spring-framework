{
  Object singletonObject=this.singletonObjects.get(beanName);
  if (singletonObject == null) {
synchronized (this.singletonObjects) {
      singletonObject=this.earlySingletonObjects.get(beanName);
      if (singletonObject == null && allowEarlyReference) {
        ObjectFactory singletonFactory=(ObjectFactory)this.singletonFactories.get(beanName);
        if (singletonFactory != null) {
          singletonObject=singletonFactory.getObject();
          this.earlySingletonObjects.put(beanName,singletonObject);
          this.singletonFactories.remove(beanName);
        }
      }
    }
  }
  return (singletonObject != NULL_OBJECT ? singletonObject : null);
}
