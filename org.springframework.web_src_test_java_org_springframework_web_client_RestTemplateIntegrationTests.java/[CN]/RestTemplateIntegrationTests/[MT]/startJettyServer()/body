{
  int port=FreePortScanner.getFreePort();
  jettyServer=new Server(port);
  baseUrl="http://localhost:" + port;
  Context jettyContext=new Context(jettyServer,"/");
  byte[] bytes=helloWorld.getBytes("UTF-8");
  contentType=new MediaType("text","plain",Collections.singletonMap("charset","utf-8"));
  jettyContext.addServlet(new ServletHolder(new GetServlet(bytes,contentType)),"/get");
  jettyContext.addServlet(new ServletHolder(new GetServlet(new byte[0],contentType)),"/get/nothing");
  jettyContext.addServlet(new ServletHolder(new GetServlet(bytes,null)),"/get/nocontenttype");
  jettyContext.addServlet(new ServletHolder(new PostServlet(helloWorld,baseUrl + "/post/1",bytes,contentType)),"/post");
  jettyContext.addServlet(new ServletHolder(new StatusCodeServlet(204)),"/status/nocontent");
  jettyContext.addServlet(new ServletHolder(new StatusCodeServlet(304)),"/status/notmodified");
  jettyContext.addServlet(new ServletHolder(new ErrorServlet(404)),"/status/notfound");
  jettyContext.addServlet(new ServletHolder(new ErrorServlet(500)),"/status/server");
  jettyContext.addServlet(new ServletHolder(new UriServlet()),"/uri/*");
  jettyContext.addServlet(new ServletHolder(new MultipartServlet()),"/multipart");
  jettyServer.start();
}
