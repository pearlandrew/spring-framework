{
  Message message;
  try {
switch (this.targetType) {
case TEXT:
      message=mapToTextMessage(object,session,this.objectMapper);
    break;
case BYTES:
  message=mapToBytesMessage(object,session,this.objectMapper);
break;
default :
message=mapToMessage(object,session,this.objectMapper,this.targetType);
}
}
 catch (IOException ex) {
throw new MessageConversionException("Could not map JSON object [" + object + "]",ex);
}
setTypeIdOnMessage(object,message);
return message;
}
