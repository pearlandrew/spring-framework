{
  MockPortletContext portletContext=new MockPortletContext();
  ApplicationContext ac=PortletApplicationContextUtils.getWebApplicationContext(portletContext);
  assertNull(ac);
  try {
    ac=PortletApplicationContextUtils.getRequiredWebApplicationContext(portletContext);
    fail("Should have thrown IllegalStateException");
  }
 catch (  IllegalStateException ex) {
  }
  portletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE,new StaticWebApplicationContext());
  try {
    ac=PortletApplicationContextUtils.getRequiredWebApplicationContext(portletContext);
    assertNotNull(ac);
  }
 catch (  IllegalStateException ex) {
    fail("Should not have thrown IllegalStateException: " + ex.getMessage());
  }
}
