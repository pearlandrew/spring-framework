{
  SpelExpressionParser parser=new SpelExpressionParser();
  StandardEvaluationContext ctx=new StandardEvaluationContext();
  TestClass tc=new TestClass();
  tc.setProperty(42);
  tc.str="wibble";
  ctx.setRootObject(tc);
  Expression expr=parser.parseExpression("str");
  Object value=expr.getValue(ctx);
  assertEquals("wibble",value);
  expr=parser.parseExpression("str");
  expr.setValue(ctx,"wobble");
  expr=parser.parseExpression("str");
  value=expr.getValue(ctx);
  assertEquals("wobble",value);
  expr=parser.parseExpression("str='wabble'");
  value=expr.getValue(ctx);
  expr=parser.parseExpression("str");
  value=expr.getValue(ctx);
  assertEquals("wabble",value);
  expr=parser.parseExpression("property");
  value=expr.getValue(ctx);
  assertEquals(42,value);
  expr=parser.parseExpression("property=4");
  value=expr.getValue(ctx);
  expr=parser.parseExpression("property");
  value=expr.getValue(ctx);
  assertEquals(4,value);
}
