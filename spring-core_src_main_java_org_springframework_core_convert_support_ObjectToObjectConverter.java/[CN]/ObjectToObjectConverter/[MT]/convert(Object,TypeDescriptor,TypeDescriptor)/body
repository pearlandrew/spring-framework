{
  if (source == null) {
    return null;
  }
  Class<?> sourceClass=sourceType.getType();
  Class<?> targetClass=targetType.getType();
  try {
    if (!String.class.equals(targetClass)) {
      Method method=getToMethod(targetClass,sourceClass);
      if (method != null) {
        ReflectionUtils.makeAccessible(method);
        return method.invoke(source);
      }
      method=getOfMethod(targetClass,sourceClass);
      if (method != null) {
        ReflectionUtils.makeAccessible(method);
        return method.invoke(null,source);
      }
    }
    Constructor<?> constructor=ClassUtils.getConstructorIfAvailable(targetClass,sourceClass);
    if (constructor != null) {
      return constructor.newInstance(source);
    }
  }
 catch (  InvocationTargetException ex) {
    throw new ConversionFailedException(sourceType,targetType,source,ex.getTargetException());
  }
catch (  Throwable ex) {
    throw new ConversionFailedException(sourceType,targetType,source,ex);
  }
  throw new IllegalStateException("No static valueOf/of/from(" + sourceClass.getName() + ") method or Constructor("+ sourceClass.getName()+ ") exists on "+ targetClass.getName());
}
