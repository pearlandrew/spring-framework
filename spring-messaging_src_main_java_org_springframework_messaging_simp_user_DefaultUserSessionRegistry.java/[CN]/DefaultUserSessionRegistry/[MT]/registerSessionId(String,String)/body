{
  Assert.notNull(user,"User must not be null");
  Assert.notNull(sessionId,"Session ID must not be null");
synchronized (this.lock) {
    Set<String> set=this.userSessionIds.get(user);
    if (set == null) {
      set=new CopyOnWriteArraySet<String>();
      this.userSessionIds.put(user,set);
    }
    set.add(sessionId);
  }
}
