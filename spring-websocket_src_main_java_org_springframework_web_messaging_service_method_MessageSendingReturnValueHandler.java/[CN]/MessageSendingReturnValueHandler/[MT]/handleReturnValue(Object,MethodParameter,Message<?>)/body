{
  if (returnValue == null) {
    return;
  }
  WebMessageHeaderAccesssor inputHeaders=WebMessageHeaderAccesssor.wrap(message);
  Message<?> returnMessage=(returnValue instanceof Message) ? (Message<?>)returnValue : null;
  Object returnPayload=(returnMessage != null) ? returnMessage.getPayload() : returnValue;
  WebMessageHeaderAccesssor returnHeaders=(returnMessage != null) ? WebMessageHeaderAccesssor.wrap(returnMessage) : WebMessageHeaderAccesssor.create();
  returnHeaders.setSessionId(inputHeaders.getSessionId());
  returnHeaders.setSubscriptionId(inputHeaders.getSubscriptionId());
  if (returnHeaders.getDestination() == null) {
    returnHeaders.setDestination(inputHeaders.getDestination());
  }
  returnMessage=this.converter.toMessage(returnPayload);
  returnMessage=MessageBuilder.fromMessage(returnMessage).copyHeaders(returnHeaders.toMap()).build();
  this.outboundChannel.send(returnMessage);
}
