{
  Properties mergedProps=new Properties();
  Iterator<PropertySource<?>> descendingIterator=getPropertySources().descendingIterator();
  while (descendingIterator.hasNext()) {
    PropertySource<?> propertySource=descendingIterator.next();
    Object object=propertySource.getSource();
    if (object instanceof Map) {
      for (      Entry<?,?> entry : ((Map<?,?>)object).entrySet()) {
        mergedProps.put(entry.getKey(),entry.getValue());
      }
    }
 else {
      throw new IllegalArgumentException("unknown PropertySource source type: " + object.getClass().getName());
    }
  }
  return mergedProps;
}
