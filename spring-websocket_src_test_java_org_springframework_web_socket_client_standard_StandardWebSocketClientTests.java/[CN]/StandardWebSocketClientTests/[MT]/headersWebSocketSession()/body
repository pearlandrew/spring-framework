{
  URI uri=new URI("ws://example.com/abc");
  List<String> protocols=Arrays.asList("abc");
  this.headers.setSecWebSocketProtocol(protocols);
  this.headers.add("foo","bar");
  WebSocketSession session=this.wsClient.doHandshake(this.wsHandler,this.headers,uri).get();
  assertEquals(Collections.singletonMap("foo",Arrays.asList("bar")),session.getHandshakeHeaders());
}
