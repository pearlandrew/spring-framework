{
  if (value == null || toType == null || toType.isAssignableFrom(value.getClass())) {
    return value;
  }
  if (context != null) {
    TypeUtils typeUtils=context.getTypeUtils();
    if (typeUtils != null) {
      TypeConverter typeConverter=typeUtils.getTypeConverter();
      return typeConverter.convertValue(value,toType);
    }
  }
  throw new EvaluationException("Cannot convert value '" + value + "' to type '"+ toType.getName()+ "'");
}
