{
  if (!readOnly) {
    Session session=getCurrentSession();
    if (!FlushMode.MANUAL.equals(SessionFactoryUtils.getFlushMode(session))) {
      try {
        SessionFactoryUtils.logger.debug("Flushing Hibernate Session on transaction synchronization");
        session.flush();
      }
 catch (      HibernateException ex) {
        throw SessionFactoryUtils.convertHibernateAccessException(ex);
      }
    }
  }
}
