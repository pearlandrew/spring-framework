{
  if (!decrementParticipateCount(request)) {
    if (isSingleSession()) {
      SessionHolder sessionHolder=(SessionHolder)TransactionSynchronizationManager.unbindResource(getSessionFactory());
      logger.debug("Closing single Hibernate Session in OpenSessionInViewInterceptor");
      SessionFactoryUtils.closeSession(sessionHolder.getSession());
    }
 else {
      SessionFactoryUtils.processDeferredClose(getSessionFactory());
    }
  }
}
