{
  if (!decrementParticipateCount(request)) {
    if (isSingleSession()) {
      org.springframework.orm.hibernate3.SessionHolder sessionHolder=(org.springframework.orm.hibernate3.SessionHolder)TransactionSynchronizationManager.unbindResource(getSessionFactory());
      logger.debug("Closing single Hibernate Session in OpenSessionInViewInterceptor");
      org.springframework.orm.hibernate3.SessionFactoryUtils.closeSession(sessionHolder.getSession());
    }
 else {
      org.springframework.orm.hibernate3.SessionFactoryUtils.processDeferredClose(getSessionFactory());
    }
  }
}
