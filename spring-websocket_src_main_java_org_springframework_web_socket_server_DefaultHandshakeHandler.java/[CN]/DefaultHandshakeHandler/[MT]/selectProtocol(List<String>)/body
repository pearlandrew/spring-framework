{
  if (requestedProtocols != null) {
    for (    String protocol : requestedProtocols) {
      if (this.supportedProtocols.contains(protocol.toLowerCase())) {
        if (logger.isDebugEnabled()) {
          logger.debug("Selected sub-protocol '" + protocol + "'");
        }
        return protocol;
      }
    }
  }
  return null;
}
