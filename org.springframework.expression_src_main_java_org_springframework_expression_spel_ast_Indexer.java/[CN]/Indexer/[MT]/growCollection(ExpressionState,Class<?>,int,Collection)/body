{
  if (state.getConfiguration().isAutoGrowCollections()) {
    Object newCollectionElement=null;
    try {
      int newElements=index - collection.size();
      if (elementType == null) {
        throw new SpelEvaluationException(getStartPosition(),SpelMessage.UNABLE_TO_GROW_COLLECTION_UNKNOWN_ELEMENT_TYPE);
      }
      while (newElements > 0) {
        collection.add(elementType.newInstance());
        newElements--;
      }
      newCollectionElement=elementType.newInstance();
    }
 catch (    Exception ex) {
      throw new SpelEvaluationException(getStartPosition(),ex,SpelMessage.UNABLE_TO_GROW_COLLECTION);
    }
    collection.add(newCollectionElement);
    return true;
  }
  return false;
}
