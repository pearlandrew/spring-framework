{
  Iterator it=collection.iterator();
  if (!it.hasNext()) {
    throw new IllegalStateException("Unable to peek ahead in non-empty collection - no element found");
  }
  Object value=it.next();
  if (value == null) {
    throw new IllegalStateException("Unable to peek ahead in non-empty collection - only null element found");
  }
  return value;
}
