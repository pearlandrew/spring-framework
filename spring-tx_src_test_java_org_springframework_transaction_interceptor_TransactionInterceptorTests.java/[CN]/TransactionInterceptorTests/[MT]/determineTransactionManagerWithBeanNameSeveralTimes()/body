{
  BeanFactory beanFactory=mock(BeanFactory.class);
  TransactionInterceptor ti=createTestTransactionInterceptor(beanFactory);
  ti.setTransactionManagerBeanName("fooTransactionManager");
  PlatformTransactionManager txManager=mock(PlatformTransactionManager.class);
  given(beanFactory.getBean("fooTransactionManager",PlatformTransactionManager.class)).willReturn(txManager);
  DefaultTransactionAttribute attribute=new DefaultTransactionAttribute();
  PlatformTransactionManager actual=ti.determineTransactionManager(attribute);
  assertSame(txManager,actual);
  PlatformTransactionManager actual2=ti.determineTransactionManager(attribute);
  assertSame(txManager,actual2);
  verify(beanFactory,times(1)).getBean("fooTransactionManager",PlatformTransactionManager.class);
}
