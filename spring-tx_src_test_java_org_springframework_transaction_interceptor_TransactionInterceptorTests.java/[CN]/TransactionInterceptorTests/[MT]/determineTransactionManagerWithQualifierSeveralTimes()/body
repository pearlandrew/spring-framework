{
  BeanFactory beanFactory=mock(BeanFactory.class);
  TransactionInterceptor ti=createTestTransactionInterceptor(beanFactory);
  PlatformTransactionManager txManager=associateTransactionManager(beanFactory,"fooTransactionManager");
  DefaultTransactionAttribute attribute=new DefaultTransactionAttribute();
  attribute.setQualifier("fooTransactionManager");
  PlatformTransactionManager actual=ti.determineTransactionManager(attribute);
  assertSame(txManager,actual);
  PlatformTransactionManager actual2=ti.determineTransactionManager(attribute);
  assertSame(txManager,actual2);
  verify(beanFactory,times(1)).containsBean("fooTransactionManager");
  verify(beanFactory,times(1)).getBean("fooTransactionManager",PlatformTransactionManager.class);
}
