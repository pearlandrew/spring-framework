{
  Lifecycle bean=lifecycleBeans.get(beanName);
  if (bean != null && !this.equals(bean)) {
    String[] dependentBeans=this.beanFactory.getDependentBeans(beanName);
    for (    String dependentBean : dependentBeans) {
      doStop(lifecycleBeans,dependentBean);
    }
    if (bean.isRunning()) {
      bean.stop();
    }
    lifecycleBeans.remove(beanName);
  }
}
