{
  String[] beanNames=beanFactory.getSingletonNames();
  Map<String,SmartLifecycle> beans=new LinkedHashMap<String,SmartLifecycle>();
  for (  String beanName : beanNames) {
    Object bean=beanFactory.getSingleton(beanName);
    if (bean instanceof SmartLifecycle) {
      beans.put(beanName,(SmartLifecycle)bean);
    }
  }
  return beans;
}
