{
  String[] beanNames=this.beanFactory.getBeanNamesForType(Lifecycle.class,false,false);
  Map<String,Lifecycle> beans=new LinkedHashMap<String,Lifecycle>();
  for (  String beanName : beanNames) {
    if (this.beanFactory.containsSingleton(beanName) || SmartLifecycle.class.isAssignableFrom(this.beanFactory.getType(beanName))) {
      Object bean=this.beanFactory.getBean(beanName);
      if (!this.equals(bean)) {
        beans.put(beanName,(Lifecycle)bean);
      }
    }
  }
  return beans;
}
