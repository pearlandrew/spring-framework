{
  BeanDefinitionBuilder builder=BeanDefinitionBuilder.rootBeanDefinition(TestBean.class);
  AbstractBeanDefinition beanDefinition=builder.getBeanDefinition();
  beanDefinition.setScope("he put himself so low could hardly look me in the face");
  final DefaultListableBeanFactory factory=new DefaultListableBeanFactory();
  factory.registerBeanDefinition("testBean",beanDefinition);
  new AssertThrows(IllegalStateException.class){
    public void test() throws Exception {
      factory.getBean("testBean");
    }
  }
.runTest();
}
