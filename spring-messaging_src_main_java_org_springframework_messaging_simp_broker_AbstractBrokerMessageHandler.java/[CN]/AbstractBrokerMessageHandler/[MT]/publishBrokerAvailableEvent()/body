{
  boolean shouldPublish=this.brokerAvailable.compareAndSet(false,true);
  if (this.eventPublisher != null && shouldPublish) {
    if (logger.isDebugEnabled()) {
      logger.debug("Publishing BrokerAvailabilityEvent (available)");
    }
    this.eventPublisher.publishEvent(new BrokerAvailabilityEvent(true,this));
  }
}
