{
  Object retVal=new Object();
  MockControl ejbControl=MockControl.createControl(LocalInterface.class);
  final LocalInterface ejb=(LocalInterface)ejbControl.getMock();
  ejb.targetMethod();
  ejbControl.setReturnValue(retVal,1);
  ejb.remove();
  ejbControl.setVoidCallable(1);
  ejbControl.replay();
  final String jndiName="foobar";
  MockControl contextControl=contextControl(jndiName,ejb);
  LocalSlsbInvokerInterceptor si=configuredInterceptor(contextControl,jndiName);
  ProxyFactory pf=new ProxyFactory(new Class[]{BusinessMethods.class});
  pf.addAdvice(si);
  BusinessMethods target=(BusinessMethods)pf.getProxy();
  assertTrue(target.targetMethod() == retVal);
  contextControl.verify();
  ejbControl.verify();
}
