{
  PortletSession session=request.getPortletSession(false);
  if (session == null) {
    throw new PortletSessionRequiredException("Could not obtain portlet session");
  }
  Object command=session.getAttribute(getRenderCommandSessionAttributeName());
  if (command == null) {
    throw new PortletSessionRequiredException("Could not obtain command object from portlet session");
  }
  return command;
}
