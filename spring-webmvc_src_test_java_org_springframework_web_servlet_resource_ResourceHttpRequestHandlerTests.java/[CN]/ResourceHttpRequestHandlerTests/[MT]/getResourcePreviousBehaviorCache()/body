{
  this.request.setAttribute(HandlerMapping.PATH_WITHIN_HANDLER_MAPPING_ATTRIBUTE,"foo.css");
  this.handler.setCacheSeconds(3600);
  this.handler.setUseExpiresHeader(true);
  this.handler.setUseCacheControlHeader(true);
  this.handler.setAlwaysMustRevalidate(true);
  this.handler.handleRequest(this.request,this.response);
  assertEquals("max-age=3600, must-revalidate",this.response.getHeader("Cache-Control"));
  assertTrue(headerAsLong("Expires") >= System.currentTimeMillis() - 1000 + (3600 * 1000));
  assertTrue(this.response.containsHeader("Last-Modified"));
  assertEquals(headerAsLong("Last-Modified") / 1000,resourceLastModified("test/foo.css") / 1000);
}
