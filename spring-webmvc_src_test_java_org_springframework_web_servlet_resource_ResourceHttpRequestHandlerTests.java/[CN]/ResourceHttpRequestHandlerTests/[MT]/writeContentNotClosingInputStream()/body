{
  Resource resource=mock(Resource.class);
  InputStream inputStream=mock(InputStream.class);
  given(resource.getInputStream()).willReturn(inputStream);
  given(inputStream.read(any())).willReturn(-1);
  doThrow(new NullPointerException()).when(inputStream).close();
  this.handler.writeContent(this.response,resource);
  assertEquals(200,this.response.getStatus());
  assertEquals(0,this.response.getContentLength());
}
