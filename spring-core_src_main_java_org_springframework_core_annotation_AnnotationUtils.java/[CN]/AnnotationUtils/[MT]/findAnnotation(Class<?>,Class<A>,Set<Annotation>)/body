{
  Assert.notNull(clazz,"Class must not be null");
  if (isAnnotationDeclaredLocally(annotationType,clazz)) {
    try {
      return clazz.getAnnotation(annotationType);
    }
 catch (    Exception ex) {
      return null;
    }
  }
  for (  Class<?> ifc : clazz.getInterfaces()) {
    A annotation=findAnnotation(ifc,annotationType,visited);
    if (annotation != null) {
      return annotation;
    }
  }
  for (  Annotation ann : clazz.getDeclaredAnnotations()) {
    if (!isInJavaLangAnnotationPackage(ann) && visited.add(ann)) {
      A annotation=findAnnotation(ann.annotationType(),annotationType,visited);
      if (annotation != null) {
        return annotation;
      }
    }
  }
  Class<?> superclass=clazz.getSuperclass();
  if (superclass == null || superclass.equals(Object.class)) {
    return null;
  }
  return findAnnotation(superclass,annotationType,visited);
}
