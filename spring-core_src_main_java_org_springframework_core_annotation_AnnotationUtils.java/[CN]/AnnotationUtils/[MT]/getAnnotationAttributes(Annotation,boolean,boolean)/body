{
  AnnotationAttributes attrs=new AnnotationAttributes();
  Method[] methods=annotation.annotationType().getDeclaredMethods();
  for (  Method method : methods) {
    if (method.getParameterTypes().length == 0 && method.getReturnType() != void.class) {
      try {
        ReflectionUtils.makeAccessible(method);
        Object value=method.invoke(annotation);
        attrs.put(method.getName(),adaptValue(value,classValuesAsString,nestedAnnotationsAsMap));
      }
 catch (      Exception ex) {
        throw new IllegalStateException("Could not obtain annotation attribute values",ex);
      }
    }
  }
  return attrs;
}
