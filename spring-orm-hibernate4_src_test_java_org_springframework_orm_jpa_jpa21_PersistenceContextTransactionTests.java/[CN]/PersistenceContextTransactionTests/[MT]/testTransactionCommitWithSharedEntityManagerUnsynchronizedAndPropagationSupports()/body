{
  given(manager.isOpen()).willReturn(true);
  tt.setPropagationBehavior(TransactionDefinition.PROPAGATION_SUPPORTS);
  tt.execute(new TransactionCallback(){
    @Override public Object doInTransaction(    TransactionStatus status){
      bean.sharedEntityManagerUnsynchronized.flush();
      return null;
    }
  }
);
  verify(manager).flush();
  verify(manager).close();
}
