{
  new ConfigurableListableBeanFactoryMockTemplate(){
    protected void doTest(    final ConfigurableListableBeanFactory factory){
      new AssertThrows(ClassCastException.class){
        public void test() throws Exception {
          Map scopes=new HashMap();
          scopes.put(this,new NoOpScope());
          CustomScopeConfigurer figurer=new CustomScopeConfigurer();
          figurer.setScopes(scopes);
          figurer.postProcessBeanFactory(factory);
        }
      }
.runTest();
    }
  }
.test();
}
