{
  Principal principal=SimpMessageHeaderAccessor.getUser(headers);
  if (principal == null) {
    throw new MissingSessionUserException(message);
  }
  if (principal instanceof DestinationUserNameProvider) {
    return ((DestinationUserNameProvider)principal).getDestinationUserName();
  }
  return principal.getName();
}
