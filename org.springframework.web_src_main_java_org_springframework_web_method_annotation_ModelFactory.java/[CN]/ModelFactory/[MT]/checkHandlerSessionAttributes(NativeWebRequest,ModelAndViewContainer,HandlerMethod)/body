{
  for (  MethodParameter parameter : handlerMethod.getMethodParameters()) {
    if (parameter.hasParameterAnnotation(ModelAttribute.class)) {
      String attrName=getNameForParameter(parameter);
      if (!mavContainer.containsAttribute(attrName)) {
        if (sessionAttributesHandler.isHandlerSessionAttribute(attrName,parameter.getParameterType())) {
          Object attrValue=sessionAttributesHandler.retrieveAttribute(request,attrName);
          if (attrValue == null) {
            throw new HttpSessionRequiredException("Session attribute '" + attrName + "' not found in session: "+ handlerMethod);
          }
          mavContainer.addAttribute(attrName,attrValue);
        }
      }
    }
  }
}
