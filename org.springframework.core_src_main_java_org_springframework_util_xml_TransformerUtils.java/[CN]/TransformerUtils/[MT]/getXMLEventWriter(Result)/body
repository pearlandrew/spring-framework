{
  if (result instanceof StaxResult) {
    return ((StaxResult)result).getXMLEventWriter();
  }
 else   if (JaxpVersion.isAtLeastJaxp14()) {
    return Jaxp14StaxHandler.getXMLEventWriter(result);
  }
 else {
    throw new IllegalArgumentException("Result '" + result + "' is neither StaxResult nor StAXResult");
  }
}
