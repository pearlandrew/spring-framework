{
  MediaType contentType=request.getHeaders().getContentType();
  Optional<HttpMessageConverter<?>> converter=resolveConverter(messageConverters,requestType,contentType);
  if (!converter.isPresent()) {
    return Mono.error(new IllegalStateException("Could not encode request body of type '" + contentType + "' with target type '"+ requestType.toString()+ "'"));
  }
  return converter.get().write((Publisher)content,requestType,contentType,request);
}
