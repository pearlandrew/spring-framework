{
  ByteBuffer fooBuffer=Buffer.wrap("foo").byteBuffer();
  ByteBuffer barBuffer=Buffer.wrap("bar").byteBuffer();
  Flux<ByteBuffer> source=Flux.just(fooBuffer,barBuffer);
  Flux<ByteBuffer> output=encoder.encode(source,ResolvableType.forClassWithGenerics(Publisher.class,ByteBuffer.class),null);
  List<ByteBuffer> results=StreamSupport.stream(output.toIterable().spliterator(),false).collect(toList());
  assertEquals(2,results.size());
  assertEquals(fooBuffer,results.get(0));
  assertEquals(barBuffer,results.get(1));
}
