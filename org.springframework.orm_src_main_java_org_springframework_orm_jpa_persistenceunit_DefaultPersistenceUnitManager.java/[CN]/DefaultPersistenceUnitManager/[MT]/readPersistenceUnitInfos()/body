{
  PersistenceUnitReader reader=new PersistenceUnitReader(this.resourcePatternResolver,this.dataSourceLookup);
  List<SpringPersistenceUnitInfo> infos=new LinkedList<SpringPersistenceUnitInfo>();
  infos.addAll(Arrays.asList(reader.readPersistenceUnitInfos(this.persistenceXmlLocations)));
  if (this.packagesToScan != null || this.mappingResources != null) {
    infos.add(buildDefaultPersistenceUnitInfo());
  }
  return infos;
}
