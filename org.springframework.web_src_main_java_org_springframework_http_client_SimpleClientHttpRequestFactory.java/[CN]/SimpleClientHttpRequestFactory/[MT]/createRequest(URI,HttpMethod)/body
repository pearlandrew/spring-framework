{
  HttpURLConnection connection=openConnection(uri.toURL(),proxy);
  prepareConnection(connection,httpMethod.name());
  if (bufferRequestBody) {
    return new BufferingSimpleClientHttpRequest(connection);
  }
 else {
    return new StreamingSimpleClientHttpRequest(connection,chunkSize);
  }
}
