{
  PageContext pc=createPageContext();
  final StringBuffer message=new StringBuffer();
  MessageTag tag=new MessageTag(){
    @Override protected void writeMessage(    String msg){
      message.append(msg);
    }
  }
;
  tag.setPageContext(pc);
  tag.setText("test {0} message {1,number,#.##} X");
  tag.setArguments("${arg1},${arg2}");
  pc.setAttribute("arg1","my,value");
  pc.setAttribute("arg2",new Float(5.145));
  assertTrue("Correct doStartTag return value",tag.doStartTag() == Tag.EVAL_BODY_INCLUDE);
  assertEquals("Correct message","test my,value message 5.14 X",message.toString());
}
