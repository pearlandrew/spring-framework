{
  MethodInvocation invocation=EasyMock.createMock(MethodInvocation.class);
  ApplicationContext ctx=EasyMock.createMock(ApplicationContext.class);
  EventPublicationInterceptor interceptor=new EventPublicationInterceptor();
  interceptor.setApplicationEventClass(MyEvent.class);
  interceptor.setApplicationEventPublisher(ctx);
  interceptor.afterPropertiesSet();
  expect(invocation.proceed()).andReturn(new Object());
  expect(invocation.getThis()).andReturn(new Object());
  ctx.publishEvent(isA(MyEvent.class));
  replay(invocation,ctx);
  interceptor.invoke(invocation);
  verify(invocation,ctx);
}
