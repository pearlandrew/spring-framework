{
  if (txObject.isNewPersistenceManagerHolder()) {
    PersistenceManager pm=txObject.getPersistenceManagerHolder().getPersistenceManager();
    try {
      if (pm.currentTransaction().isActive()) {
        pm.currentTransaction().rollback();
      }
    }
 catch (    Throwable ex) {
      logger.debug("Could not rollback PersistenceManager after failed transaction begin",ex);
    }
 finally {
      PersistenceManagerFactoryUtils.releasePersistenceManager(pm,getPersistenceManagerFactory());
    }
    txObject.setPersistenceManagerHolder(null,false);
  }
}
