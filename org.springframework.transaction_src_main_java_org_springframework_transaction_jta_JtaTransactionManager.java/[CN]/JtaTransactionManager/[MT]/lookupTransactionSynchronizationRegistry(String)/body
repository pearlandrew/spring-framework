{
  try {
    if (logger.isDebugEnabled()) {
      logger.debug("Retrieving JTA TransactionSynchronizationRegistry from JNDI location [" + registryName + "]");
    }
    Class registryClass=ClassUtils.forName(TRANSACTION_SYNCHRONIZATION_REGISTRY_CLASS_NAME,JtaTransactionManager.class.getClassLoader());
    return getJndiTemplate().lookup(registryName,registryClass);
  }
 catch (  ClassNotFoundException ex) {
    throw new TransactionSystemException("JTA 1.1 [" + TRANSACTION_SYNCHRONIZATION_REGISTRY_CLASS_NAME + "] not available");
  }
catch (  NamingException ex) {
    throw new TransactionSystemException("JTA TransactionSynchronizationRegistry is not available at JNDI location [" + registryName + "]",ex);
  }
}
