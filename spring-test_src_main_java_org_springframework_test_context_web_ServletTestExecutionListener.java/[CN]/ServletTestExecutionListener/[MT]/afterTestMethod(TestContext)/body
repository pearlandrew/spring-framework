{
  if (Boolean.TRUE.equals(testContext.getAttribute(RESET_REQUEST_CONTEXT_HOLDER_ATTRIBUTE))) {
    if (logger.isDebugEnabled()) {
      logger.debug(String.format("Resetting RequestContextHolder for test context %s.",testContext));
    }
    RequestContextHolder.resetRequestAttributes();
  }
  testContext.removeAttribute(POPULATED_REQUEST_CONTEXT_HOLDER_ATTRIBUTE);
  testContext.removeAttribute(RESET_REQUEST_CONTEXT_HOLDER_ATTRIBUTE);
}
