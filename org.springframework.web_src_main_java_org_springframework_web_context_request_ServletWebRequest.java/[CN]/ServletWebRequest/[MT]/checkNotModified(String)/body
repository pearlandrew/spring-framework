{
  if (StringUtils.hasLength(eTag) && !this.notModified && (this.response == null || !this.response.containsHeader(HEADER_ETAG))) {
    if (!eTag.startsWith("\"")) {
      eTag="\"" + eTag;
    }
    if (!eTag.endsWith("\"")) {
      eTag=eTag + "\"";
    }
    String ifNoneMatch=getRequest().getHeader(HEADER_IF_NONE_MATCH);
    this.notModified=eTag.equals(ifNoneMatch);
    if (this.response != null) {
      if (this.notModified && METHOD_GET.equals(getRequest().getMethod())) {
        this.response.setStatus(HttpServletResponse.SC_NOT_MODIFIED);
      }
 else {
        this.response.setHeader(HEADER_ETAG,eTag);
      }
    }
  }
  return this.notModified;
}
