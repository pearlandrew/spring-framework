{
  try {
    new EmbeddedDriver().connect(String.format(URL_TEMPLATE,databaseName,SHUTDOWN_COMMAND),new Properties());
  }
 catch (  SQLException ex) {
    if (!SHUTDOWN_CODE.equals(ex.getSQLState())) {
      logger.warn("Could not shutdown in-memory Derby database",ex);
      return;
    }
    if (!IS_AT_LEAST_DOT_SIX) {
      try {
        VFMemoryStorageFactory.purgeDatabase(new File(databaseName).getCanonicalPath());
      }
 catch (      IOException ex2) {
        logger.warn("Could not purge in-memory Derby database",ex2);
      }
    }
  }
}
