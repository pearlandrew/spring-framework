{
  if (sourceType.isInterface()) {
    LinkedList<Class<?>> classQueue=new LinkedList<Class<?>>();
    classQueue.addFirst(sourceType);
    while (!classQueue.isEmpty()) {
      Class<?> currentClass=classQueue.removeLast();
      Map<Class<?>,MatchableConverters> converters=getTargetConvertersForSource(currentClass);
      MatchableConverters matchable=getMatchableConvertersForTarget(converters,targetType);
      if (matchable != null) {
        return matchable;
      }
      Class<?>[] interfaces=currentClass.getInterfaces();
      for (      Class<?> ifc : interfaces) {
        classQueue.addFirst(ifc);
      }
    }
    Map<Class<?>,MatchableConverters> objectConverters=getTargetConvertersForSource(Object.class);
    return getMatchableConvertersForTarget(objectConverters,targetType);
  }
 else {
    LinkedList<Class<?>> classQueue=new LinkedList<Class<?>>();
    classQueue.addFirst(sourceType);
    while (!classQueue.isEmpty()) {
      Class<?> currentClass=classQueue.removeLast();
      Map<Class<?>,MatchableConverters> converters=getTargetConvertersForSource(currentClass);
      MatchableConverters matchable=getMatchableConvertersForTarget(converters,targetType);
      if (matchable != null) {
        return matchable;
      }
      if (currentClass.isArray()) {
        Class<?> componentType=ClassUtils.resolvePrimitiveIfNecessary(currentClass.getComponentType());
        if (componentType.getSuperclass() != null) {
          classQueue.addFirst(Array.newInstance(componentType.getSuperclass(),0).getClass());
        }
      }
 else {
        Class<?>[] interfaces=currentClass.getInterfaces();
        for (        Class<?> ifc : interfaces) {
          classQueue.addFirst(ifc);
        }
        if (currentClass.getSuperclass() != null) {
          classQueue.addFirst(currentClass.getSuperclass());
        }
      }
    }
    return null;
  }
}
