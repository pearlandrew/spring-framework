{
  PageContext pc=createPageContext();
  TestBean tb=new TestBean();
  DateFormat df=new SimpleDateFormat("yyyy-MM-dd");
  ServletRequestDataBinder binder=new ServletRequestDataBinder(tb,"tb");
  CustomDateEditor l=new CustomDateEditor(df,true);
  binder.registerCustomEditor(Date.class,l);
  pc.getRequest().setAttribute(BindingResult.MODEL_KEY_PREFIX + "tb",binder.getBindingResult());
  BindTag bind=new BindTag();
  bind.setPageContext(pc);
  bind.setPath("tb.date");
  bind.doStartTag();
  TransformTag transform=new TransformTag();
  transform.setPageContext(pc);
  pc.setAttribute("date",tb.getDate());
  transform.setParent(bind);
  transform.setValue("${date}");
  transform.setVar("theDate");
  transform.setScope("page");
  transform.doStartTag();
  transform.release();
  assertNotNull(pc.getAttribute("theDate"));
  assertEquals(pc.getAttribute("theDate"),df.format(tb.getDate()));
  bind=new BindTag();
  bind.setPageContext(pc);
  bind.setPath("tb.name");
  bind.doStartTag();
  transform=new TransformTag();
  transform.setPageContext(pc);
  pc.setAttribute("string","name");
  pc.setAttribute("scopy","page");
  transform.setValue("${string}");
  transform.setParent(bind);
  transform.setVar("theString");
  transform.setScope("${scopy}");
  transform.doStartTag();
  transform.release();
  assertNotNull(pc.getAttribute("theString"));
  assertEquals(pc.getAttribute("theString"),"name");
}
