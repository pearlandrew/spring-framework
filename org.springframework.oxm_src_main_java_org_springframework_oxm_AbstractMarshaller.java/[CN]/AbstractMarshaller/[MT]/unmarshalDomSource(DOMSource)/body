{
  if (domSource.getNode() == null) {
    try {
      if (documentBuilderFactory == null) {
        documentBuilderFactory=createDocumentBuilderFactory();
      }
      DocumentBuilder documentBuilder=createDocumentBuilder(documentBuilderFactory);
      domSource.setNode(documentBuilder.newDocument());
    }
 catch (    ParserConfigurationException ex) {
      throw new UnmarshallingFailureException("Could not create document placeholder for DOMSource: " + ex.getMessage(),ex);
    }
  }
  return unmarshalDomNode(domSource.getNode());
}
