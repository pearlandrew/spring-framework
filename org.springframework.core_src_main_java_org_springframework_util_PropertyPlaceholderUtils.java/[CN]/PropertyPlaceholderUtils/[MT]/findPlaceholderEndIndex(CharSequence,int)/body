{
  int index=startIndex + PLACEHOLDER_PREFIX.length();
  int withinNestedPlaceholder=0;
  while (index < buf.length()) {
    if (StringUtils.substringMatch(buf,index,PLACEHOLDER_SUFFIX)) {
      if (withinNestedPlaceholder > 0) {
        withinNestedPlaceholder--;
        index=index + PLACEHOLDER_PREFIX.length() - 1;
      }
 else {
        return index;
      }
    }
 else     if (StringUtils.substringMatch(buf,index,PLACEHOLDER_PREFIX)) {
      withinNestedPlaceholder++;
      index=index + PLACEHOLDER_PREFIX.length();
    }
 else {
      index++;
    }
  }
  return -1;
}
