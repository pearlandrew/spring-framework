{
  String cacheKey=(StringUtils.hasLength(beanName) ? beanName : clazz.getName());
  InjectionMetadata metadata=this.injectionMetadataCache.get(cacheKey);
  if (InjectionMetadata.needsRefresh(metadata,clazz)) {
synchronized (this.injectionMetadataCache) {
      metadata=this.injectionMetadataCache.get(cacheKey);
      if (InjectionMetadata.needsRefresh(metadata,clazz)) {
        metadata=buildAutowiringMetadata(clazz);
        this.injectionMetadataCache.put(cacheKey,metadata);
      }
    }
  }
  return metadata;
}
