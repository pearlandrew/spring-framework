{
  ContextLoader contextLoader=mergedContextConfiguration.getContextLoader();
  Assert.notNull(contextLoader,"Can not load an ApplicationContext with a NULL 'contextLoader'. " + "Consider annotating your test class with @ContextConfiguration.");
  ApplicationContext applicationContext;
  if (contextLoader instanceof SmartContextLoader) {
    SmartContextLoader smartContextLoader=(SmartContextLoader)contextLoader;
    applicationContext=smartContextLoader.loadContext(mergedContextConfiguration);
  }
 else {
    String[] locations=mergedContextConfiguration.getLocations();
    Assert.notNull(locations,"Can not load an ApplicationContext with a NULL 'locations' array. " + "Consider annotating your test class with @ContextConfiguration.");
    applicationContext=contextLoader.loadContext(locations);
  }
  return applicationContext;
}
