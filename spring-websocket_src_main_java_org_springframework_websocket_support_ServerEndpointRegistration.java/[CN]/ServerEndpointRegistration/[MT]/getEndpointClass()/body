{
  Class<?> beanClass=this.bean.getClass();
  if (beanClass.equals(String.class)) {
    beanClass=this.beanFactory.getType((String)this.bean);
  }
  beanClass=ClassUtils.getUserClass(beanClass);
  if (WebSocketHandler.class.isAssignableFrom(beanClass)) {
    return StandardWebSocketHandlerAdapter.class;
  }
 else {
    return (Class<? extends Endpoint>)beanClass;
  }
}
