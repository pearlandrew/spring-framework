{
  PropsTester pt=new PropsTester();
  BeanWrapper bw=new BeanWrapperImpl(pt);
  bw.registerCustomEditor(int.class,new PropertyEditorSupport(){
    public void setAsText(    String text){
      setValue(new Integer(Integer.parseInt(text) + 1));
    }
  }
);
  bw.setPropertyValue("intArray",new int[]{4,5,2,3});
  assertTrue("intArray length = 4",pt.intArray.length == 4);
  assertTrue("correct values",pt.intArray[0] == 4 && pt.intArray[1] == 5 && pt.intArray[2] == 2 && pt.intArray[3] == 3);
  bw.setPropertyValue("intArray",new String[]{"3","4","1","2"});
  assertTrue("intArray length = 4",pt.intArray.length == 4);
  assertTrue("correct values",pt.intArray[0] == 4 && pt.intArray[1] == 5 && pt.intArray[2] == 2 && pt.intArray[3] == 3);
  bw.setPropertyValue("intArray",new Integer(1));
  assertTrue("intArray length = 4",pt.intArray.length == 1);
  assertTrue("correct values",pt.intArray[0] == 1);
  bw.setPropertyValue("intArray",new String[]{"0"});
  assertTrue("intArray length = 4",pt.intArray.length == 1);
  assertTrue("correct values",pt.intArray[0] == 1);
  bw.setPropertyValue("intArray","0");
  assertTrue("intArray length = 4",pt.intArray.length == 1);
  assertTrue("correct values",pt.intArray[0] == 1);
}
