{
  if (source instanceof StaxSource) {
    return ((StaxSource)source).getXMLStreamReader();
  }
 else   if (JaxpVersion.isAtLeastJaxp14()) {
    return Jaxp14StaxHandler.getXMLStreamReader(source);
  }
 else {
    throw new IllegalArgumentException("Source '" + source + "' is neither StaxSource nor StAXSource");
  }
}
