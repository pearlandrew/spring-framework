{
  final byte[] classBytes="CAFEBABE".getBytes();
  final ClassLoader classLoader=getClass().getClassLoader();
  ClassFileTransformer transformer=createMock(ClassFileTransformer.class);
  expect(transformer.transform(eq(classLoader),eq("com/foo/Bar"),(Class<?>)isNull(),(ProtectionDomain)isNull(),isA(byte[].class))).andReturn(classBytes);
  replay(transformer);
  OC4JClassPreprocessorAdapter processor=new OC4JClassPreprocessorAdapter(transformer);
  byte[] bytes=processor.processClass("com.foo.Bar",classBytes,0,0,null,classLoader);
  assertNotNull(bytes);
  verify(transformer);
}
