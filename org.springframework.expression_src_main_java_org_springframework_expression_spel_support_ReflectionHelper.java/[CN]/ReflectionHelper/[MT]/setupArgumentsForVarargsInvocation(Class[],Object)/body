{
  int parameterCount=requiredParameterTypes.length;
  int argumentCount=args.length;
  if (parameterCount != args.length || requiredParameterTypes[parameterCount - 1] != (args[argumentCount - 1] == null ? null : args[argumentCount - 1].getClass())) {
    int arraySize=0;
    if (argumentCount >= parameterCount) {
      arraySize=argumentCount - (parameterCount - 1);
    }
    Object[] repackagedArguments=(Object[])Array.newInstance(requiredParameterTypes[parameterCount - 1].getComponentType(),arraySize);
    for (int i=0; i < arraySize; i++) {
      repackagedArguments[i]=args[parameterCount + i - 1];
    }
    Object[] newArgs=new Object[parameterCount];
    for (int i=0; i < newArgs.length - 1; i++) {
      newArgs[i]=args[i];
    }
    newArgs[newArgs.length - 1]=repackagedArguments;
    return newArgs;
  }
  return args;
}
