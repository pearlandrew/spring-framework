{
  Assert.notNull(arguments,"should not be called if nothing to convert");
  Class varargsType=null;
  if (isVarargs) {
    Assert.isTrue(parameterTypes[parameterTypes.length - 1].isArray(),"if varargs then last parameter type must be array");
    varargsType=parameterTypes[parameterTypes.length - 1].getComponentType();
  }
  for (int i=0; i < arguments.length; i++) {
    Class<?> targetType=null;
    if (isVarargs && i >= (parameterTypes.length - 1)) {
      targetType=varargsType;
    }
 else {
      targetType=parameterTypes[i];
    }
    try {
      if (arguments[i] != null && arguments[i].getClass() != targetType) {
        if (converter == null) {
          throw new SpelEvaluationException(SpelMessages.TYPE_CONVERSION_ERROR,arguments[i].getClass().getName(),targetType);
        }
        arguments[i]=converter.convertValue(arguments[i],targetType);
      }
    }
 catch (    EvaluationException ex) {
      if (ex instanceof SpelEvaluationException) {
        throw (SpelEvaluationException)ex;
      }
 else {
        throw new SpelEvaluationException(ex,SpelMessages.TYPE_CONVERSION_ERROR,arguments[i].getClass().getName(),targetType);
      }
    }
  }
}
