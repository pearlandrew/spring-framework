{
  ClassPathXmlApplicationContext context=new ClassPathXmlApplicationContext("afterThrowingAdviceTests.xml",getClass());
  ITestBean bean=(ITestBean)context.getBean("testBean");
  ExceptionHandlingAspect aspect=(ExceptionHandlingAspect)context.getBean("aspect");
  assertTrue(AopUtils.isAopProxy(bean));
  try {
    bean.unreliableFileOperation();
  }
 catch (  IOException e) {
  }
  assertEquals(1,aspect.handled);
  assertNotNull(aspect.lastException);
}
