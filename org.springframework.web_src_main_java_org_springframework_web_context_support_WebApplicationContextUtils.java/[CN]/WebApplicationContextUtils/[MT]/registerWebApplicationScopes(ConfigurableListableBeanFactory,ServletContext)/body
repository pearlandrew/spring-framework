{
  beanFactory.registerScope(WebApplicationContext.SCOPE_REQUEST,new RequestScope());
  beanFactory.registerScope(WebApplicationContext.SCOPE_SESSION,new SessionScope(false));
  beanFactory.registerScope(WebApplicationContext.SCOPE_GLOBAL_SESSION,new SessionScope(true));
  if (sc != null) {
    ServletContextScope appScope=new ServletContextScope(sc);
    beanFactory.registerScope(WebApplicationContext.SCOPE_APPLICATION,appScope);
    sc.setAttribute(ServletContextScope.class.getName(),appScope);
  }
  beanFactory.registerResolvableDependency(ServletRequest.class,new RequestObjectFactory());
  beanFactory.registerResolvableDependency(HttpSession.class,new SessionObjectFactory());
  beanFactory.registerResolvableDependency(WebRequest.class,new WebRequestObjectFactory());
  if (jsfPresent) {
    FacesDependencyRegistrar.registerFacesDependencies(beanFactory);
  }
}
