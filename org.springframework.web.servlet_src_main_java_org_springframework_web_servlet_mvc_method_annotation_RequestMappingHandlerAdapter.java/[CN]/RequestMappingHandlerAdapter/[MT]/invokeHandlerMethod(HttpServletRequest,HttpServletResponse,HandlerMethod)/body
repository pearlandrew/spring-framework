{
  ServletWebRequest webRequest=new ServletWebRequest(request,response);
  WebDataBinderFactory binderFactory=getDataBinderFactory(handlerMethod);
  ServletInvocableHandlerMethod requestMappingMethod=createRequestMappingMethod(handlerMethod,binderFactory);
  ModelFactory modelFactory=getModelFactory(handlerMethod,binderFactory);
  ModelAndViewContainer mavContainer=new ModelAndViewContainer();
  mavContainer.addAllAttributes(RequestContextUtils.getInputFlashMap(request));
  modelFactory.initModel(webRequest,mavContainer,requestMappingMethod);
  if (this.alwaysUseRedirectAttributes) {
    DataBinder dataBinder=binderFactory.createBinder(webRequest,null,null);
    mavContainer.setRedirectModel(new RedirectAttributesModelMap(dataBinder));
  }
  SessionStatus sessionStatus=new SimpleSessionStatus();
  requestMappingMethod.invokeAndHandle(webRequest,mavContainer,sessionStatus);
  modelFactory.updateModel(webRequest,mavContainer,sessionStatus);
  if (!mavContainer.isResolveView()) {
    return null;
  }
 else {
    ModelMap model=mavContainer.getModel();
    ModelAndView mav=new ModelAndView(mavContainer.getViewName(),model);
    if (!mavContainer.isViewReference()) {
      mav.setView((View)mavContainer.getView());
    }
    if (model instanceof RedirectAttributes) {
      Map<String,?> flashAttributes=((RedirectAttributes)model).getFlashAttributes();
      RequestContextUtils.getOutputFlashMap(request).putAll(flashAttributes);
    }
    return mav;
  }
}
