{
  TestExceptionHandler exceptionHandler=new TestExceptionHandler();
  HttpHandler handler=WebHttpHandlerBuilder.webHandler(new StubWebHandler()).filters(new ExceptionFilter()).exceptionHandlers(exceptionHandler).build();
  handler.handle(this.request,this.response).get();
  assertEquals(HttpStatus.INTERNAL_SERVER_ERROR,this.response.getStatus());
  Throwable savedException=exceptionHandler.ex;
  assertNotNull(savedException);
  assertEquals("boo",savedException.getMessage());
}
