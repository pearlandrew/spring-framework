{
  MockControl lexicalHandlerControl=MockControl.createControl(LexicalHandler.class);
  lexicalHandlerControl.setDefaultMatcher(new SaxArgumentMatcher());
  LexicalHandler lexicalHandlerMock=(LexicalHandler)lexicalHandlerControl.getMock();
  LexicalHandler lexicalHandler=new CopyingLexicalHandler(lexicalHandlerMock);
  Resource testLexicalHandlerXml=new ClassPathResource("testLexicalHandler.xml",getClass());
  standardReader.setContentHandler(null);
  standardReader.setProperty("http://xml.org/sax/properties/lexical-handler",lexicalHandler);
  standardReader.parse(new InputSource(createTestInputStream()));
  lexicalHandlerControl.replay();
  inputFactory.setProperty("javax.xml.stream.isCoalescing",Boolean.FALSE);
  inputFactory.setProperty("http://java.sun.com/xml/stream/properties/report-cdata-event",Boolean.TRUE);
  inputFactory.setProperty("javax.xml.stream.isReplacingEntityReferences",Boolean.FALSE);
  inputFactory.setProperty("javax.xml.stream.isSupportingExternalEntities",Boolean.FALSE);
  AbstractStaxXMLReader staxXmlReader=createStaxXmlReader(testLexicalHandlerXml.getInputStream());
  staxXmlReader.setProperty("http://xml.org/sax/properties/lexical-handler",lexicalHandler);
  staxXmlReader.parse(new InputSource());
  lexicalHandlerControl.verify();
}
