{
  String[] requiredFields=getRequiredFields();
  if (!ObjectUtils.isEmpty(requiredFields)) {
    Map propertyValues=new HashMap();
    PropertyValue[] pvs=mpvs.getPropertyValues();
    for (int i=0; i < pvs.length; i++) {
      PropertyValue pv=pvs[i];
      String canonicalName=PropertyAccessorUtils.canonicalPropertyName(pv.getName());
      propertyValues.put(canonicalName,pv);
    }
    for (int i=0; i < requiredFields.length; i++) {
      String field=requiredFields[i];
      PropertyValue pv=(PropertyValue)propertyValues.get(field);
      if (pv == null || pv.getValue() == null || (pv.getValue() instanceof String && !StringUtils.hasText((String)pv.getValue()))) {
        getBindingErrorProcessor().processMissingFieldError(field,getInternalBindingResult());
        if (pv != null) {
          mpvs.removePropertyValue(pv);
          propertyValues.remove(field);
        }
      }
    }
  }
}
