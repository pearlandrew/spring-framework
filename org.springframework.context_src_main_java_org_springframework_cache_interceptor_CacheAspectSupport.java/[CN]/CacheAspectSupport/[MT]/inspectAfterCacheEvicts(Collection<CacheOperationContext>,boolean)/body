{
  if (!evictions.isEmpty()) {
    boolean log=logger.isTraceEnabled();
    for (    CacheOperationContext context : evictions) {
      CacheEvictOperation evictOp=(CacheEvictOperation)context.operation;
      if (afterInvocation == evictOp.isAfterInvocation()) {
        if (context.isConditionPassing()) {
          Object key=null;
          for (          Cache cache : context.getCaches()) {
            if (evictOp.isCacheWide()) {
              cache.clear();
              if (log) {
                logger.trace("Invalidating entire cache for operation " + evictOp + " on method "+ context.method);
              }
            }
 else {
              if (key == null) {
                key=context.generateKey();
              }
              if (log) {
                logger.trace("Invalidating cache key " + key + " for operation "+ evictOp+ " on method "+ context.method);
              }
              cache.evict(key);
            }
          }
        }
 else {
          if (log) {
            logger.trace("Cache condition failed on method " + context.method + " for operation "+ context.operation);
          }
        }
      }
    }
  }
}
