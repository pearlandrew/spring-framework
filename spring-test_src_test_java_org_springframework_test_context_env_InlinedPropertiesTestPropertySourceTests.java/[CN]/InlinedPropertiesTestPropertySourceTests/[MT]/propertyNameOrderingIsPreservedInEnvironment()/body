{
  String[] propertyNames=null;
  ConfigurableEnvironment configurableEnvironment=(ConfigurableEnvironment)env;
  for (  PropertySource<?> propertySource : configurableEnvironment.getPropertySources()) {
    if (propertySource instanceof EnumerablePropertySource) {
      EnumerablePropertySource eps=(EnumerablePropertySource)propertySource;
      if (eps.getName().startsWith("test properties")) {
        propertyNames=eps.getPropertyNames();
        break;
      }
    }
  }
  final String[] expectedPropertyNames=new String[]{"foo","baz","enigma","x.y.z","server.url","key.value.1","key.value.2","key.value.3"};
  assertArrayEquals(expectedPropertyNames,propertyNames);
}
