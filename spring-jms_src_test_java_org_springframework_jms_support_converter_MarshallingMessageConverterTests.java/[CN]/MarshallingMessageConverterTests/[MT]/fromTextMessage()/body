{
  TextMessage textMessageMock=createMock(TextMessage.class);
  Object unmarshalled=new Object();
  String text="foo";
  expect(textMessageMock.getText()).andReturn(text);
  expect(unmarshallerMock.unmarshal(isA(Source.class))).andReturn(unmarshalled);
  replay(marshallerMock,unmarshallerMock,sessionMock,textMessageMock);
  Object result=converter.fromMessage(textMessageMock);
  assertEquals("Invalid result",result,unmarshalled);
  verify(marshallerMock,unmarshallerMock,sessionMock,textMessageMock);
}
