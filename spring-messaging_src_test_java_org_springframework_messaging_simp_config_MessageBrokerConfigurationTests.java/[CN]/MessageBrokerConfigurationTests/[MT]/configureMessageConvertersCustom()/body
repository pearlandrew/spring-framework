{
  final MessageConverter testConverter=Mockito.mock(MessageConverter.class);
  AbstractMessageBrokerConfiguration config=new AbstractMessageBrokerConfiguration(){
    @Override protected boolean configureMessageConverters(    List<MessageConverter> messageConverters){
      messageConverters.add(testConverter);
      return false;
    }
  }
;
  CompositeMessageConverter compositeConverter=config.brokerMessageConverter();
  assertThat(compositeConverter.getConverters().size(),Matchers.is(1));
  Iterator<MessageConverter> iterator=compositeConverter.getConverters().iterator();
  assertThat(iterator.next(),Matchers.is(testConverter));
  DefaultContentTypeResolver resolver=(DefaultContentTypeResolver)compositeConverter.getContentTypeResolver();
  assertNull(resolver.getDefaultMimeType());
}
