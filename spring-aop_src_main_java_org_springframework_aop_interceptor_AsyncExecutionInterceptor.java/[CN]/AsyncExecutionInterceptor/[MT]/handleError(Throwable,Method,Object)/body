{
  if (method.getReturnType().isAssignableFrom(Future.class)) {
    ReflectionUtils.rethrowException(ex);
  }
 else {
    try {
      exceptionHandler.handleUncaughtException(ex,method,params);
    }
 catch (    Exception e) {
      logger.error("exception handler has thrown an unexpected " + "exception while invoking '" + method.toGenericString() + "'",e);
    }
  }
}
