{
  System.setProperty("logfile","log4j.properties");
  try {
    AnnotationConfigApplicationContext ac=new AnnotationConfigApplicationContext(ResourceInjectionBean.class);
    ResourceInjectionBean resourceInjectionBean=ac.getBean(ResourceInjectionBean.class);
    Resource resource=new ClassPathResource("log4j.properties");
    assertEquals(resource,resourceInjectionBean.resource);
    assertEquals(resource.getURL(),resourceInjectionBean.url);
    assertEquals(resource.getURI(),resourceInjectionBean.uri);
    assertEquals(resource.getFile(),resourceInjectionBean.file);
    assertArrayEquals(FileCopyUtils.copyToByteArray(resource.getInputStream()),FileCopyUtils.copyToByteArray(resourceInjectionBean.inputStream));
    assertEquals(FileCopyUtils.copyToString(new EncodedResource(resource).getReader()),FileCopyUtils.copyToString(resourceInjectionBean.reader));
  }
  finally {
    System.getProperties().remove("logfile");
  }
}
