{
  BeanFactory bf=new ClassPathXmlApplicationContext("/org/springframework/aop/framework/autoproxy/advisorAutoProxyCreatorWithCommonInterceptors.xml");
  ITestBean test1=(ITestBean)bf.getBean("test1");
  assertTrue(AopUtils.isAopProxy(test1));
  Lockable lockable1=(Lockable)test1;
  NopInterceptor nop=(NopInterceptor)bf.getBean("nopInterceptor");
  assertEquals(0,nop.getCount());
  ITestBean test2=(ITestBean)bf.getBean("test2");
  Lockable lockable2=(Lockable)test2;
  assertFalse(lockable1.locked());
  assertFalse(lockable2.locked());
  assertEquals(2,nop.getCount());
  lockable1.lock();
  assertTrue(lockable1.locked());
  assertFalse(lockable2.locked());
  assertEquals(5,nop.getCount());
}
