{
  String value=System.setProperty("foo","spam");
  try {
    ApplicationContext applicationContext=new ClassPathXmlApplicationContext("contextNamespaceHandlerTests-system.xml",getClass());
    Map<String,PropertyPlaceholderConfigurer> beans=applicationContext.getBeansOfType(PropertyPlaceholderConfigurer.class);
    assertFalse("No PropertyPlaceholderConfigurer found",beans.isEmpty());
    String s=(String)applicationContext.getBean("string");
    assertEquals("No properties replaced","spam",s);
  }
  finally {
    if (value != null) {
      System.setProperty("foo",value);
    }
  }
}
