{
  if (logger.isInfoEnabled()) {
    logger.info("Destroying singletons in " + this);
  }
synchronized (this.singletonObjects) {
    this.singletonsCurrentlyInDestruction=true;
  }
synchronized (this.disposableBeans) {
    String[] disposableBeanNames=StringUtils.toStringArray(this.disposableBeans.keySet());
    for (int i=disposableBeanNames.length - 1; i >= 0; i--) {
      destroySingleton(disposableBeanNames[i]);
    }
  }
  this.containedBeanMap.clear();
  this.dependentBeanMap.clear();
  this.dependenciesForBeanMap.clear();
synchronized (this.singletonObjects) {
    this.singletonObjects.clear();
    this.singletonFactories.clear();
    this.earlySingletonObjects.clear();
    this.registeredSingletons.clear();
    this.singletonsCurrentlyInDestruction=false;
  }
}
