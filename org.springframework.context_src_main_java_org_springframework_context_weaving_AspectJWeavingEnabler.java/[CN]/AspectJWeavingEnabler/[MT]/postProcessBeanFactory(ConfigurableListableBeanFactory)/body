{
  LoadTimeWeaver weaverToUse=this.loadTimeWeaver;
  if (weaverToUse == null) {
    if (InstrumentationLoadTimeWeaver.isInstrumentationAvailable()) {
      weaverToUse=new InstrumentationLoadTimeWeaver(this.beanClassLoader);
    }
 else {
      throw new IllegalStateException("No LoadTimeWeaver available");
    }
  }
  weaverToUse.addTransformer(new AspectJClassBypassingClassFileTransformer(new ClassPreProcessorAgentAdapter()));
}
