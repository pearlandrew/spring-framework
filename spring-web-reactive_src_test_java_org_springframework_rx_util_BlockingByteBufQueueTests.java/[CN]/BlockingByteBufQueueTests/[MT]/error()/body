{
  ByteBuf abc=Unpooled.copiedBuffer(new byte[]{'a','b','c'});
  Throwable error=new IllegalStateException();
  queue.putBuffer(abc);
  queue.putError(error);
  queue.complete();
  assertTrue(queue.isHeadBuffer());
  assertFalse(queue.isHeadError());
  assertSame(abc,queue.pollBuffer());
  assertTrue(queue.isHeadError());
  assertFalse(queue.isHeadBuffer());
  assertSame(error,queue.pollError());
  assertTrue(queue.isComplete());
}
