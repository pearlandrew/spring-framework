{
  String query="foo=bar&foo=baz&qux";
  components.setQuery(query);
  MultiValueMap<String,String> expected=new LinkedMultiValueMap<String,String>(1);
  expected.put("foo",Arrays.asList("bar","baz"));
  expected.set("qux",null);
  MultiValueMap<String,String> result=components.getQueryParams();
  assertEquals(expected,result);
  components.setQuery(null);
  components.setQueryParams(expected);
  assertEquals(query,components.getQuery());
}
