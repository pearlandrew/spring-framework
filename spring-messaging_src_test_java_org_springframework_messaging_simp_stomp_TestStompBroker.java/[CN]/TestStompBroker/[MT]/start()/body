{
  this.environment=new Environment();
  this.tcpServer=new TcpServerSpec<String,String>(NettyTcpServer.class).env(this.environment).codec(new DelimitedCodec<String,String>((byte)0,true,StandardCodecs.STRING_CODEC)).listen(port).consume(new Consumer<TcpConnection<String,String>>(){
    @Override public void accept(    final TcpConnection<String,String> connection){
      connection.consume(new Consumer<String>(){
        @Override public void accept(        String stompFrame){
          handleMessage(messageConverter.toMessage(stompFrame),connection);
        }
      }
);
    }
  }
).get();
  this.tcpServer.start();
}
