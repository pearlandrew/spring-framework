{
  byte[] content="content".getBytes();
  lobHandler.getBlobAsBytes(rs,1);
  lobHandlerControl.setReturnValue(content,2);
  lobCreator.setBlobAsBytes(ps,1,content);
  lobCreatorControl.setVoidCallable(1);
  lobHandlerControl.replay();
  lobCreatorControl.replay();
  BlobByteArrayTypeHandler type=new BlobByteArrayTypeHandler(lobHandler);
  assertTrue(Arrays.equals(content,(byte[])type.valueOf("content")));
  assertEquals(content,type.getResult(rs,"column"));
  assertEquals(content,type.getResult(rs,1));
  TransactionSynchronizationManager.initSynchronization();
  try {
    type.setParameter(ps,1,content,null);
    List synchs=TransactionSynchronizationManager.getSynchronizations();
    assertEquals(1,synchs.size());
    ((TransactionSynchronization)synchs.get(0)).beforeCompletion();
    ((TransactionSynchronization)synchs.get(0)).afterCompletion(TransactionSynchronization.STATUS_COMMITTED);
  }
  finally {
    TransactionSynchronizationManager.clearSynchronization();
  }
}
