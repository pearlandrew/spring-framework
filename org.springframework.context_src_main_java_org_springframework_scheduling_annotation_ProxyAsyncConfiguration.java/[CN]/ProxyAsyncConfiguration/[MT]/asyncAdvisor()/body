{
  Assert.notNull(this.enableAsync,"@EnableAsync annotation metadata was not injected");
  AsyncAnnotationBeanPostProcessor bpp=new AsyncAnnotationBeanPostProcessor();
  Class<? extends Annotation> customAsyncAnnotation=enableAsync.getClass("annotation",Annotation.class);
  if (customAsyncAnnotation != AnnotationUtils.getDefaultValue(EnableAsync.class,"annotation")) {
    bpp.setAsyncAnnotationType(customAsyncAnnotation);
  }
  if (this.executor != null) {
    bpp.setExecutor(this.executor);
  }
  bpp.setProxyTargetClass(this.enableAsync.getBoolean("proxyTargetClass"));
  bpp.setOrder(this.enableAsync.getInt("order"));
  return bpp;
}
