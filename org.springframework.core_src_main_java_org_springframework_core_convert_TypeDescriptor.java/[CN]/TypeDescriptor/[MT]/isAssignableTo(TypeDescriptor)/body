{
  Class targetClass=targetType.getType();
  if (!isTypeAssignableTo(targetClass)) {
    return false;
  }
  if (targetClass != null) {
    if (Collection.class.isAssignableFrom(targetClass)) {
      Class<?> elementType=targetType.getCollectionElementType();
      if (elementType != null) {
        Class<?> sourceElementType=getCollectionElementType();
        if (sourceElementType == null || !elementType.isAssignableFrom(sourceElementType)) {
          return false;
        }
      }
    }
 else     if (Map.class.isAssignableFrom(targetClass)) {
      Class<?> keyType=targetType.getMapKeyType();
      if (keyType != null) {
        Class<?> sourceKeyType=getMapKeyType();
        if (sourceKeyType == null || !keyType.isAssignableFrom(sourceKeyType)) {
          return false;
        }
      }
      Class<?> valueType=targetType.getMapValueType();
      if (valueType != null) {
        Class<?> sourceValueType=getMapValueType();
        if (sourceValueType == null || !valueType.isAssignableFrom(sourceValueType)) {
          return false;
        }
      }
    }
  }
  return true;
}
