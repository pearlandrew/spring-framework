{
  if (Collection.class.isAssignableFrom(methodParameter.getParameterType())) {
    return GenericCollectionTypeResolver.getCollectionParameterType(methodParameter);
  }
 else   if (Map.class.isAssignableFrom(methodParameter.getParameterType())) {
    return GenericCollectionTypeResolver.getMapValueParameterType(methodParameter);
  }
 else   if (methodParameter.getParameterType().isArray()) {
    return methodParameter.getParameterType().getComponentType();
  }
 else {
    throw new IllegalStateException("Not a collection, map, or array method parameter type " + methodParameter.getParameterType());
  }
}
