{
  Message<?> inputMessage=createInputMessage("sess1","sub1","/app","/dest",null);
  SimpMessageSendingOperations messagingTemplate=Mockito.mock(SimpMessageSendingOperations.class);
  SendToMethodReturnValueHandler handler=new SendToMethodReturnValueHandler(messagingTemplate,false);
  handler.handleReturnValue(PAYLOAD,this.noAnnotationsReturnType,inputMessage);
  ArgumentCaptor<MessageHeaders> captor=ArgumentCaptor.forClass(MessageHeaders.class);
  verify(messagingTemplate).convertAndSend(eq("/topic/dest"),eq(PAYLOAD),captor.capture());
  MessageHeaders messageHeaders=captor.getValue();
  SimpMessageHeaderAccessor accessor=getAccessor(messageHeaders,SimpMessageHeaderAccessor.class);
  assertNotNull(accessor);
  assertTrue(accessor.isMutable());
  assertEquals("sess1",accessor.getSessionId());
  assertNull("Subscription id should not be copied",accessor.getSubscriptionId());
  assertEquals(this.noAnnotationsReturnType,accessor.getHeader(AbstractMessageConverter.METHOD_PARAMETER_HINT_HEADER));
}
