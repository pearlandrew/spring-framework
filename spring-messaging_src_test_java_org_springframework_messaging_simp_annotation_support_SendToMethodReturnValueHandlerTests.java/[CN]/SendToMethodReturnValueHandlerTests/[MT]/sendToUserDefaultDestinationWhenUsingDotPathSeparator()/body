{
  when(this.messageChannel.send(any(Message.class))).thenReturn(true);
  TestUser user=new TestUser();
  Message<?> inputMessage=createInputMessage("sess1","sub1","/app/","dest.foo.bar",user);
  this.handler.handleReturnValue(PAYLOAD,this.sendToUserDefaultDestReturnType,inputMessage);
  verify(this.messageChannel,times(1)).send(this.messageCaptor.capture());
  Message<?> message=this.messageCaptor.getAllValues().get(0);
  SimpMessageHeaderAccessor headers=SimpMessageHeaderAccessor.wrap(message);
  assertEquals("/user/" + user.getName() + "/queue/dest.foo.bar",headers.getDestination());
}
