{
  AnnotationMetadata metadata=configClass.getMetadata();
  BeanDefinition configBeanDef=new AnnotatedGenericBeanDefinition(metadata);
  String className=metadata.getClassName();
  configBeanDef.setBeanClassName(className);
  if (ConfigurationClassUtils.checkConfigurationClassCandidate(configBeanDef,this.metadataReaderFactory)) {
    String configBeanName=this.importBeanNameGenerator.generateBeanName(configBeanDef,this.registry);
    this.registry.registerBeanDefinition(configBeanName,configBeanDef);
    configClass.setBeanName(configBeanName);
    if (logger.isDebugEnabled()) {
      logger.debug(String.format("Registered bean definition for imported @Configuration class %s",configBeanName));
    }
  }
 else {
    this.problemReporter.error(new InvalidConfigurationImportProblem(className,configClass.getResource(),metadata));
  }
}
