{
  boolean actuallyClose;
synchronized (this.activeMonitor) {
    actuallyClose=this.active && !this.closed;
    this.closed=true;
  }
  if (actuallyClose) {
    if (logger.isInfoEnabled()) {
      logger.info("Closing " + this);
    }
    try {
      publishEvent(new ContextClosedEvent(this));
    }
 catch (    Throwable ex) {
      logger.error("Exception thrown from ApplicationListener handling ContextClosedEvent",ex);
    }
    getLifecycleProcessor().onClose();
    destroyBeans();
    closeBeanFactory();
    onClose();
synchronized (this.activeMonitor) {
      this.active=false;
    }
  }
}
