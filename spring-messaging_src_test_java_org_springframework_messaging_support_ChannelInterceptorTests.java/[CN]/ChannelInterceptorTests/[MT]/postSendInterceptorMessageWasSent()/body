{
  final AtomicBoolean invoked=new AtomicBoolean(false);
  this.channel.addInterceptor(new ChannelInterceptorAdapter(){
    @Override public void postSend(    Message<?> message,    MessageChannel channel,    boolean sent){
      assertNotNull(message);
      assertNotNull(channel);
      assertSame(ChannelInterceptorTests.this.channel,channel);
      assertTrue(sent);
      invoked.set(true);
    }
  }
);
  this.channel.send(MessageBuilder.withPayload("test").build());
  assertTrue(invoked.get());
}
