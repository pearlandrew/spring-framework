{
  Assert.notNull(key,"Key must not be null");
  Assert.notNull(context,"ApplicationContext must not be null");
synchronized (monitor) {
    this.contextMap.put(key,context);
    MergedContextConfiguration child=key;
    MergedContextConfiguration parent=child.getParent();
    while (parent != null) {
      Set<MergedContextConfiguration> list=hierarchyMap.get(parent);
      if (list == null) {
        list=new HashSet<MergedContextConfiguration>();
        hierarchyMap.put(parent,list);
      }
      list.add(child);
      child=parent;
      parent=child.getParent();
    }
  }
}
