{
  try {
    DefaultListableBeanFactory factory=new DefaultListableBeanFactory();
    BeanDefinition beanDef=BeanDefinitionBuilder.genericBeanDefinition(RequiredTestBean.class).getBeanDefinition();
    factory.registerBeanDefinition("testBean",beanDef);
    RequiredAnnotationBeanPostProcessor rabpp=new RequiredAnnotationBeanPostProcessor();
    rabpp.setRequiredAnnotationType(MyRequired.class);
    factory.addBeanPostProcessor(rabpp);
    factory.preInstantiateSingletons();
    fail("Should have thrown BeanCreationException");
  }
 catch (  BeanCreationException ex) {
    String message=ex.getCause().getMessage();
    assertTrue(message.indexOf("Property") > -1);
    assertTrue(message.indexOf("name") > -1);
    assertTrue(message.indexOf("testBean") > -1);
  }
}
