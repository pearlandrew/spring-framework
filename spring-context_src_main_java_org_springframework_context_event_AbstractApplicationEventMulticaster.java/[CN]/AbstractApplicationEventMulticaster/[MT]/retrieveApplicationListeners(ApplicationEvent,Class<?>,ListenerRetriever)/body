{
  LinkedList<ApplicationListener<?>> allListeners=new LinkedList<ApplicationListener<?>>();
  Set<ApplicationListener<?>> listeners;
  Set<String> listenerBeans;
synchronized (this.defaultRetriever) {
    listeners=new LinkedHashSet<ApplicationListener<?>>(this.defaultRetriever.applicationListeners);
    listenerBeans=new LinkedHashSet<String>(this.defaultRetriever.applicationListenerBeans);
  }
  for (  ApplicationListener<?> listener : listeners) {
    if (supportsEvent(listener,event.getClass(),sourceType)) {
      retriever.applicationListeners.add(listener);
      allListeners.add(listener);
    }
  }
  if (!listenerBeans.isEmpty()) {
    BeanFactory beanFactory=getBeanFactory();
    for (    String listenerBeanName : listenerBeans) {
      try {
        Class<?> listenerType=beanFactory.getType(listenerBeanName);
        if (listenerType == null || supportsEvent(listenerType,event)) {
          ApplicationListener<?> listener=beanFactory.getBean(listenerBeanName,ApplicationListener.class);
          if (!allListeners.contains(listener) && supportsEvent(listener,event.getClass(),sourceType)) {
            retriever.applicationListenerBeans.add(listenerBeanName);
            allListeners.add(listener);
          }
        }
      }
 catch (      NoSuchBeanDefinitionException ex) {
      }
    }
  }
  OrderComparator.sort(allListeners);
  return allListeners;
}
