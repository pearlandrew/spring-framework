{
  Settings settings=super.buildSettings(props,serviceRegistry);
  if (this.cacheRegionFactory != null) {
    try {
      Method setRegionFactory=Settings.class.getDeclaredMethod("setRegionFactory",RegionFactory.class);
      setRegionFactory.setAccessible(true);
      setRegionFactory.invoke(settings,this.cacheRegionFactory);
    }
 catch (    Exception ex) {
      throw new IllegalStateException("Failed to invoke Hibernate's setRegionFactory method",ex);
    }
  }
  return settings;
}
