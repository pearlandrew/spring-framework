{
  Object content=(result instanceof JmsResponse ? ((JmsResponse<?>)result).getResponse() : result);
  if (content instanceof org.springframework.messaging.Message) {
    return this.messagingMessageConverter.toMessage(content,session);
  }
  MessageConverter converter=getMessageConverter();
  if (converter != null) {
    return converter.toMessage(content,session);
  }
  if (!(content instanceof Message)) {
    throw new MessageConversionException("No MessageConverter specified - cannot handle message [" + content + "]");
  }
  return (Message)content;
}
