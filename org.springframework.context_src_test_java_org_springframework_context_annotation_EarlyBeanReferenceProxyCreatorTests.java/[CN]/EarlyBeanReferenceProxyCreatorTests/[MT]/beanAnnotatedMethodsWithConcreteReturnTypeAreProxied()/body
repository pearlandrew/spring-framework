{
  bf.registerBeanDefinition("componentWithConcreteBeanMethod",new RootBeanDefinition(ComponentWithConcreteBeanMethod.class));
  EarlyBeanReferenceProxyCreator pc=new EarlyBeanReferenceProxyCreator(bf);
  ComponentWithConcreteBeanMethod proxy=(ComponentWithConcreteBeanMethod)pc.createProxyIfPossible(descriptorFor(ComponentWithConcreteBeanMethod.class));
  TestBean bean=proxy.aBeanMethod();
  assertThat(bean,instanceOf(EarlyBeanReferenceProxy.class));
  assertThat(AopUtils.isCglibProxyClass(bean.getClass()),is(true));
  assertEquals("concrete bean proxies should have the bean class as superclass",bean.getClass().getSuperclass(),TestBean.class);
}
