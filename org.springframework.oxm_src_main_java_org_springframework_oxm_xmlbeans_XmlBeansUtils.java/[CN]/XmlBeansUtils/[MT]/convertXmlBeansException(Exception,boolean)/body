{
  if (ex instanceof XMLStreamValidationException) {
    return new XmlBeansValidationFailureException((XMLStreamValidationException)ex);
  }
 else   if (ex instanceof XmlException) {
    XmlException xmlException=(XmlException)ex;
    if (marshalling) {
      return new XmlBeansMarshallingFailureException(xmlException);
    }
 else {
      return new XmlBeansUnmarshallingFailureException(xmlException);
    }
  }
 else   if (ex instanceof SAXException) {
    SAXException saxException=(SAXException)ex;
    if (marshalling) {
      return new XmlBeansMarshallingFailureException(saxException);
    }
 else {
      return new XmlBeansUnmarshallingFailureException(saxException);
    }
  }
  return new XmlBeansSystemException(ex);
}
