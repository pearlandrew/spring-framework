{
  Class<?> targetClass=clazz;
  do {
    Method[] methods=targetClass.getDeclaredMethods();
    for (    Method method : methods) {
      if (mf != null && !mf.matches(method)) {
        continue;
      }
      try {
        mc.doWith(method);
      }
 catch (      IllegalAccessException ex) {
        throw new IllegalStateException("Shouldn't be illegal to access method '" + method.getName() + "': "+ ex);
      }
    }
    targetClass=targetClass.getSuperclass();
  }
 while (targetClass != null);
}
