{
  if (!"WebSocket".equalsIgnoreCase(request.getHeaders().getUpgrade())) {
    response.setStatusCode(HttpStatus.BAD_REQUEST);
    response.getBody().write("Can \"Upgrade\" only to \"websocket\".".getBytes("UTF-8"));
    logger.debug("Invalid Upgrade header " + request.getHeaders().getUpgrade());
    return false;
  }
  return true;
}
