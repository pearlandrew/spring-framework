{
  String baseUrl=chain.resolveUrlPath(resourceUrlPath,locations);
  if (StringUtils.hasText(baseUrl)) {
    VersionStrategy versionStrategy=getStrategyForPath(resourceUrlPath);
    if (versionStrategy == null) {
      return null;
    }
    if (logger.isTraceEnabled()) {
      logger.trace("Getting the original resource to determine version");
    }
    Resource resource=chain.resolveResource(null,baseUrl,locations);
    String version=versionStrategy.getResourceVersion(resource);
    if (logger.isTraceEnabled()) {
      logger.trace("Version=" + version);
    }
    return versionStrategy.addVersion(baseUrl,version);
  }
  return baseUrl;
}
