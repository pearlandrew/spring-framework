{
  if (request instanceof MultipartRequest) {
    MultipartRequest multipartRequest=(MultipartRequest)request;
    Object data=multipartRequest.getFileMap().get(key);
    if (data != null) {
      return data;
    }
  }
  String[] parameters=request.getParameterValues(key);
  if (parameters == null) {
    return null;
  }
 else   if (parameters.length == 1) {
    return parameters[0];
  }
 else {
    return parameters;
  }
}
