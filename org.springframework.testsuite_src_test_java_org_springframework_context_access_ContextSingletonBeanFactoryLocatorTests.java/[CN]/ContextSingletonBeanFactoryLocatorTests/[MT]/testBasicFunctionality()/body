{
  ContextSingletonBeanFactoryLocator facLoc=new ContextSingletonBeanFactoryLocator("classpath*:" + ClassUtils.addResourcePathToPackagePath(getClass(),"context.xml"));
  basicFunctionalityTest(facLoc);
  BeanFactoryReference bfr=facLoc.useBeanFactory("a.qualified.name.of.some.sort");
  BeanFactory fac=bfr.getFactory();
  assertTrue(fac instanceof ApplicationContext);
  assertEquals("a.qualified.name.of.some.sort",((ApplicationContext)fac).getId());
  assertEquals("a.qualified.name.of.some.sort",((ApplicationContext)fac).getDisplayName());
  BeanFactoryReference bfr2=facLoc.useBeanFactory("another.qualified.name");
  BeanFactory fac2=bfr2.getFactory();
  assertEquals("another.qualified.name",((ApplicationContext)fac2).getId());
  assertEquals("another.qualified.name",((ApplicationContext)fac2).getDisplayName());
  assertTrue(fac2 instanceof ApplicationContext);
}
