{
  if (handlerMethod.isAnnotationPresent(ResponseStatus.class)) {
    ResponseStatus responseStatus=handlerMethod.getAnnotation(ResponseStatus.class);
    HttpServletResponse response=webRequest.getResponse();
    response.setStatus(responseStatus.value().value());
  }
  if (returnValue instanceof ModelAndView) {
    return (ModelAndView)returnValue;
  }
 else   if (returnValue instanceof Model) {
    return new ModelAndView().addAllObjects(((Model)returnValue).asMap());
  }
 else   if (returnValue instanceof Map) {
    return new ModelAndView().addAllObjects((Map)returnValue);
  }
 else   if (returnValue instanceof View) {
    return new ModelAndView((View)returnValue);
  }
 else   if (returnValue instanceof String) {
    return new ModelAndView((String)returnValue);
  }
 else   if (returnValue == null) {
    return null;
  }
 else {
    throw new IllegalArgumentException("Invalid handler method return value: " + returnValue);
  }
}
