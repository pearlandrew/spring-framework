{
  ResourceUrlProvider resourceUrlProvider=getResourceUrlProvider();
  if (resourceUrlProvider == null) {
    logger.debug("Request attribute exposing ResourceUrlProvider not found.");
    return super.encodeURL(url);
  }
  String resolvedUrl=resourceUrlProvider.getForRequestUrl(this.request,url);
  return (resolvedUrl != null ? super.encodeURL(resolvedUrl) : super.encodeURL(url));
}
