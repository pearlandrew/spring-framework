{
  MockHttpServletRequest request=new MockHttpServletRequest("GET","/js/foo.js");
  request.addHeader("Accept-Encoding","gzip");
  String file="js/foo.js";
  String gzFile=file + ".gz";
  Resource resource=new ClassPathResource("test/" + file,getClass());
  Resource gzResource=new ClassPathResource("test/" + gzFile,getClass());
  Resource resolved=resolver.resolveResource(request,file,locations);
  assertEquals(gzResource.getDescription(),resolved.getDescription());
  assertEquals(new ClassPathResource("test/" + file).getFilename(),resolved.getFilename());
  assertTrue("Expected " + resolved + " to be of type "+ EncodedResource.class,resolved instanceof EncodedResource);
  request=new MockHttpServletRequest("GET","/js/foo.js");
  resolved=resolver.resolveResource(request,file,locations);
  assertEquals(resource.getDescription(),resolved.getDescription());
  assertEquals(new ClassPathResource("test/" + file).getFilename(),resolved.getFilename());
  assertFalse("Expected " + resolved + " to *not* be of type "+ EncodedResource.class,resolved instanceof EncodedResource);
}
