{
  SessionFactory sessionFactory=new AnnotationConfigApplicationContext(configClass).getBean(SessionFactory.class);
  Session session=sessionFactory.openSession();
  Transaction tx=session.beginTransaction();
  Foo foo=new Foo();
  foo.setName("f1");
  session.save(foo);
  Foo f1=(Foo)session.createQuery("from Foo where name = 'f1'").uniqueResult();
  assertThat("No foo with name='f1' found!",f1,notNullValue());
  assertThat(f1.getName(),is("f1"));
  tx.rollback();
}
