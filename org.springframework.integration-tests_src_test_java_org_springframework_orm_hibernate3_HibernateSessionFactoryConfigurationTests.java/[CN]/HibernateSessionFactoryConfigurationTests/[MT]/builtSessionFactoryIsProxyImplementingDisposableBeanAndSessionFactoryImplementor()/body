{
  AnnotationConfigApplicationContext ctx=new AnnotationConfigApplicationContext(AnnotationSessionFactoryConfig.class);
  SessionFactory sessionFactory=ctx.getBean(SessionFactory.class);
  assertThat(sessionFactory,instanceOf(DisposableBean.class));
  assertThat(sessionFactory,instanceOf(SessionFactoryImplementor.class));
  assertThat(sessionFactory,instanceOf(InfrastructureProxy.class));
  assertThat(sessionFactory.toString(),startsWith("DisposableBean proxy for SessionFactory"));
  ctx.close();
  assertTrue("SessionFactory was not closed as expected",sessionFactory.isClosed());
}
