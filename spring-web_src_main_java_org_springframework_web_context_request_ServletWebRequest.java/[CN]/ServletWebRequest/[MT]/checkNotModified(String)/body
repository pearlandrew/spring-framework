{
  if (StringUtils.hasLength(etag) && !this.notModified && (this.response == null || !this.response.containsHeader(HEADER_ETAG))) {
    String ifNoneMatch=getRequest().getHeader(HEADER_IF_NONE_MATCH);
    this.notModified=etag.equals(ifNoneMatch);
    if (this.response != null) {
      if (this.notModified && supportsNotModifiedStatus()) {
        this.response.setStatus(HttpServletResponse.SC_NOT_MODIFIED);
      }
 else {
        this.response.setHeader(HEADER_ETAG,etag);
      }
    }
  }
  return this.notModified;
}
