{
  TestMaController mc=new TestMaController();
  MockHttpServletRequest request=new MockHttpServletRequest("GET","/inSession.html");
  request.setSession(new MockHttpSession(null));
  HttpServletResponse response=new MockHttpServletResponse();
  ModelAndView mv=mc.handleRequest(request,response);
  assertTrue("Invoked inSession method",mc.wasInvoked("inSession"));
  assertTrue("view name is welcome",mv.getViewName().equals("inSession"));
  assertTrue("Only one method invoked",mc.getInvokedMethods() == 1);
  request=new MockHttpServletRequest("GET","/inSession.html");
  response=new MockHttpServletResponse();
  try {
    mc.handleRequest(request,response);
    fail("Must have rejected request without session");
  }
 catch (  ServletException expected) {
  }
}
