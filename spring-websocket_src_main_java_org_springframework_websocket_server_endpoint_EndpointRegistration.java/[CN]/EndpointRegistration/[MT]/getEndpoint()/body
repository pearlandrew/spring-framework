{
  if (this.endpointClass != null) {
    WebApplicationContext wac=ContextLoader.getCurrentWebApplicationContext();
    if (wac == null) {
      String message="Failed to find the root WebApplicationContext. Was ContextLoaderListener not used?";
      logger.error(message);
      throw new IllegalStateException();
    }
    return wac.getAutowireCapableBeanFactory().createBean(this.endpointClass);
  }
  Object bean=this.endpointBean;
  if (this.endpointBean instanceof String) {
    bean=this.beanFactory.getBean((String)this.endpointBean);
  }
  return (Endpoint)bean;
}
