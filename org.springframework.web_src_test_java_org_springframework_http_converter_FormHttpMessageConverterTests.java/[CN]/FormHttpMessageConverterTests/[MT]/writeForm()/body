{
  MultiValueMap<String,String> body=new LinkedMultiValueMap<String,String>();
  body.set("name 1","value 1");
  body.add("name 2","value 2+1");
  body.add("name 2","value 2+2");
  body.add("name 3",null);
  MockHttpOutputMessage outputMessage=new MockHttpOutputMessage();
  converter.write(body,MediaType.APPLICATION_FORM_URLENCODED,outputMessage);
  Charset iso88591=Charset.forName("ISO-8859-1");
  assertEquals("Invalid result","name+1=value+1&name+2=value+2%2B1&name+2=value+2%2B2&name+3",outputMessage.getBodyAsString(iso88591));
  assertEquals("Invalid content-type",new MediaType("application","x-www-form-urlencoded"),outputMessage.getHeaders().getContentType());
}
