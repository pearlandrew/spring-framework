{
  MockControl mockRunnable=MockControl.createControl(Runnable.class);
  Runnable runnable=(Runnable)mockRunnable.getMock();
  runnable.run();
  mockRunnable.setThrowable(new IllegalStateException());
  runnable.run();
  mockRunnable.setThrowable(new IllegalStateException());
  mockRunnable.replay();
  ScheduledExecutorTask task=new ScheduledExecutorTask(runnable);
  task.setPeriod(500);
  task.setDelay(3000);
  ScheduledExecutorFactoryBean factory=new ScheduledExecutorFactoryBean();
  factory.setScheduledExecutorTasks(new ScheduledExecutorTask[]{task});
  factory.setContinueScheduledExecutionAfterException(true);
  factory.afterPropertiesSet();
  pauseToLetTaskStart(1);
  factory.destroy();
  try {
    mockRunnable.verify();
    fail("Mock must never have been called");
  }
 catch (  AssertionFailedError expected) {
  }
}
