{
  String formView="f";
  String successView="s";
  TestController mc=new TestController();
  mc.setFormView(formView);
  mc.setSuccessView(successView);
  String name="Rod";
  int age=32;
  MockHttpServletRequest request=new MockHttpServletRequest("POST","/welcome.html");
  request.addParameter("name",name);
  request.addParameter("age","" + age);
  request.addParameter("formChange","true");
  HttpServletResponse response=new MockHttpServletResponse();
  ModelAndView mv=mc.handleRequest(request,response);
  assertEquals("returned correct view name",formView,mv.getViewName());
  TestBean person=(TestBean)mv.getModel().get(TestController.BEAN_NAME);
  Errors errors=(Errors)mv.getModel().get(BindException.MODEL_KEY_PREFIX + TestController.BEAN_NAME);
  assertTrue("model is non null",person != null);
  assertTrue("errors is non null",errors != null);
  assertTrue("bean name bound ok",person.getName().equals(name));
  assertTrue("bean age bound ok",person.getAge() == age);
}
