{
  String uriString=uri.toString();
  HttpMethodBase httpMethodBase;
switch (httpMethod) {
case GET:
    httpMethodBase=new GetMethod(uriString);
  break;
case DELETE:
httpMethodBase=new DeleteMethod(uriString);
break;
case HEAD:
httpMethodBase=new HeadMethod(uriString);
break;
case OPTIONS:
httpMethodBase=new OptionsMethod(uriString);
break;
case POST:
httpMethodBase=new PostMethod(uriString);
break;
case PUT:
httpMethodBase=new PutMethod(uriString);
break;
case TRACE:
httpMethodBase=new TraceMethod(uriString);
break;
default :
throw new IllegalArgumentException("Invalid method: " + httpMethod);
}
process(httpMethodBase);
return new CommonsClientHttpRequest(getHttpClient(),httpMethodBase);
}
