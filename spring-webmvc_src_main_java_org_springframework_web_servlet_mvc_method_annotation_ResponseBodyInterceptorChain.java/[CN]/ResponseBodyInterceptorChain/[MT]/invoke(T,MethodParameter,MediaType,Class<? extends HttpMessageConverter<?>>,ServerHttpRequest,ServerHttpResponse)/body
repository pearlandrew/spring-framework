{
  if (this.interceptors != null) {
    if (logger.isDebugEnabled()) {
      logger.debug("Invoking ResponseBody interceptor chain for body=" + body);
    }
    for (    Object interceptor : this.interceptors) {
      if (interceptor instanceof ControllerAdviceBean) {
        ControllerAdviceBean adviceBean=(ControllerAdviceBean)interceptor;
        if (!adviceBean.isApplicableToBeanType(returnType.getContainingClass())) {
          continue;
        }
        interceptor=adviceBean.resolveBean();
      }
      if (interceptor instanceof ResponseBodyInterceptor) {
        ResponseBodyInterceptor<T> typedInterceptor=(ResponseBodyInterceptor<T>)interceptor;
        if (typedInterceptor.supports(returnType,selectedConverterType)) {
          body=typedInterceptor.beforeBodyWrite(body,returnType,selectedContentType,selectedConverterType,request,response);
        }
      }
 else {
        throw new IllegalStateException("Expected a ResponseBodyInterceptor: " + interceptor);
      }
    }
    if (logger.isDebugEnabled()) {
      logger.debug("After interceptor chain body=" + body);
    }
  }
  return body;
}
