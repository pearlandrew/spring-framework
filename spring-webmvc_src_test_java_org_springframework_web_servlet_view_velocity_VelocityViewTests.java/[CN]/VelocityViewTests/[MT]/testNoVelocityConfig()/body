{
  VelocityView vv=new VelocityView();
  WebApplicationContext wac=createMock(WebApplicationContext.class);
  wac.getBeansOfType(VelocityConfig.class,true,false);
  expectLastCall().andReturn(new HashMap<String,Object>());
  wac.getParentBeanFactory();
  expectLastCall().andReturn(null);
  replay(wac);
  vv.setUrl("anythingButNull");
  try {
    vv.setApplicationContext(wac);
    fail();
  }
 catch (  ApplicationContextException ex) {
    assertTrue(ex.getMessage().contains("VelocityConfig"));
  }
  verify(wac);
}
