{
  String virtualHost="ABC";
  String sessionId="sess1";
  StompHeaderAccessor headers=StompHeaderAccessor.create(StompCommand.CONNECT);
  headers.setSessionId(sessionId);
  this.brokerRelay.setVirtualHost(virtualHost);
  this.brokerRelay.start();
  this.brokerRelay.handleMessage(MessageBuilder.withPayload(new byte[0]).setHeaders(headers).build());
  List<Message<byte[]>> sent=this.tcpClient.connection.messages;
  assertEquals(2,sent.size());
  StompHeaderAccessor headers1=StompHeaderAccessor.wrap(sent.get(0));
  assertEquals(virtualHost,headers1.getHost());
  StompHeaderAccessor headers2=StompHeaderAccessor.wrap(sent.get(1));
  assertEquals(sessionId,headers2.getSessionId());
  assertEquals(virtualHost,headers2.getHost());
}
