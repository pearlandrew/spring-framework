{
  Person person=createPerson("John","Paris","FR");
  person.address.country=null;
  ConfigurablePropertyAccessor accessor=createAccessor(person);
  try {
    accessor.setPropertyValue("address.country.name","UK");
    fail("Should have failed to set value with intermediate null value");
  }
 catch (  NullValueInNestedPathException e) {
    assertEquals("address.country",e.getPropertyName());
    assertEquals(Person.class,e.getBeanClass());
  }
  assertThat(person.address.country,is(nullValue()));
}
