{
  MessageDrivenContext sc=createMock(MessageDrivenContext.class);
  replay(sc);
  final BeanFactory bf=new StaticListableBeanFactory();
  BeanFactoryLocator bfl=new BeanFactoryLocator(){
    public BeanFactoryReference useBeanFactory(    String factoryKey) throws FatalBeanException {
      return new BeanFactoryReference(){
        public BeanFactory getFactory(){
          return bf;
        }
        public void release() throws FatalBeanException {
        }
      }
;
    }
  }
;
  @SuppressWarnings("serial") AbstractJmsMessageDrivenBean mdb=new AbstractJmsMessageDrivenBean(){
    protected void onEjbCreate(){
      assertTrue(getBeanFactory() == bf);
    }
    public void onMessage(    Message msg){
      throw new UnsupportedOperationException("onMessage");
    }
  }
;
  mdb.setBeanFactoryLocator(bfl);
  mdb.setMessageDrivenContext(sc);
  assertTrue(sc == mdb.getMessageDrivenContext());
  mdb.ejbCreate();
}
