{
  MockServletContext servletContext=new MockServletContext();
  servletContext.addInitParameter("pCommon","pCommonContextValue");
  servletContext.addInitParameter("pContext1","pContext1Value");
  MockServletConfig servletConfig=new MockServletConfig(servletContext);
  servletConfig.addInitParameter("pCommon","pCommonConfigValue");
  servletConfig.addInitParameter("pConfig1","pConfig1Value");
  StaticWebApplicationContext ctx=new StaticWebApplicationContext();
  ctx.setServletConfig(servletConfig);
  ctx.refresh();
  ConfigurableEnvironment environment=ctx.getEnvironment();
  LinkedList<PropertySource<?>> propertySources=environment.getPropertySources();
  assertThat(PropertySource.named(DefaultWebEnvironment.SERVLET_CONTEXT_PARAMS_PROPERTY_SOURCE_NAME),isIn(propertySources));
  assertThat(PropertySource.named(DefaultWebEnvironment.SERVLET_CONFIG_PARAMS_PROPERTY_SOURCE_NAME),isIn(propertySources));
  assertThat(environment.getProperty("pCommon"),is("pCommonConfigValue"));
  assertThat(propertySources.indexOf(PropertySource.named(DefaultWebEnvironment.SERVLET_CONFIG_PARAMS_PROPERTY_SOURCE_NAME)),lessThan(propertySources.indexOf(PropertySource.named(DefaultWebEnvironment.SERVLET_CONTEXT_PARAMS_PROPERTY_SOURCE_NAME))));
  assertThat(environment.getProperty("pContext1"),is("pContext1Value"));
  assertThat(environment.getProperty("pConfig1"),is("pConfig1Value"));
  assertThat(propertySources.indexOf(PropertySource.named(DefaultWebEnvironment.SERVLET_CONFIG_PARAMS_PROPERTY_SOURCE_NAME)),lessThan(propertySources.indexOf(PropertySource.named(DefaultEnvironment.SYSTEM_PROPERTIES_PROPERTY_SOURCE_NAME))));
  MockPropertySource mockSystemProperties=new MockPropertySource(DefaultEnvironment.SYSTEM_PROPERTIES_PROPERTY_SOURCE_NAME);
  mockSystemProperties.setProperty("pCommon","pCommonSysPropsValue");
  mockSystemProperties.setProperty("pSysProps1","pSysProps1Value");
  propertySources.set(propertySources.indexOf(PropertySource.named(DefaultEnvironment.SYSTEM_PROPERTIES_PROPERTY_SOURCE_NAME)),mockSystemProperties);
  assertThat(environment.getProperty("pCommon"),is("pCommonConfigValue"));
  assertThat(environment.getProperty("pSysProps1"),is("pSysProps1Value"));
}
