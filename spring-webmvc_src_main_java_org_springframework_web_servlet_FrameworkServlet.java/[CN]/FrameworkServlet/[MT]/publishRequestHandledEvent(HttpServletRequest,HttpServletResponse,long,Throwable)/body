{
  if (this.publishEvents) {
    long processingTime=System.currentTimeMillis() - startTime;
    int statusCode=(responseGetStatusAvailable ? response.getStatus() : -1);
    this.webApplicationContext.publishEvent(new ServletRequestHandledEvent(this,request.getRequestURI(),request.getRemoteAddr(),request.getMethod(),getServletConfig().getServletName(),WebUtils.getSessionId(request),getUsernameForRequest(request),processingTime,failureCause,statusCode));
  }
}
