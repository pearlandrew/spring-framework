{
  HttpHeaders requestHeaders=request.getHeaders();
  HttpHeaders responseHeaders=response.getHeaders();
  responseHeaders.add("Access-Control-Allow-Origin",requestHeaders.getFirst("Origin"));
  responseHeaders.add("Access-Control-Allow-Credentials","true");
  List<String> accessControllerHeaders=requestHeaders.get("Access-Control-Request-Headers");
  if (accessControllerHeaders != null) {
    for (    String header : accessControllerHeaders) {
      responseHeaders.add("Access-Control-Allow-Headers",header);
    }
  }
  if (!ObjectUtils.isEmpty(httpMethods)) {
    responseHeaders.add("Access-Control-Allow-Methods",StringUtils.arrayToDelimitedString(httpMethods,", "));
    responseHeaders.add("Access-Control-Max-Age",String.valueOf(ONE_YEAR));
  }
  responseHeaders.add(HttpHeaders.VARY,HttpHeaders.ORIGIN);
}
