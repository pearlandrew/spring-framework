{
  HttpHeaders requestHeaders=new HttpHeaders();
  requestHeaders.set("foo","bar");
  TestXhrTransport transport=new TestXhrTransport();
  transport.setRequestHeaders(requestHeaders);
  transport.sendMessageResponseToReturn=new ResponseEntity<>(HttpStatus.NO_CONTENT);
  URI url=new URI("http://example.com");
  transport.executeSendRequest(url,new TextMessage("payload"));
  assertEquals(2,transport.actualSendRequestHeaders.size());
  assertEquals("bar",transport.actualSendRequestHeaders.getFirst("foo"));
  assertEquals(MediaType.APPLICATION_JSON,transport.actualSendRequestHeaders.getContentType());
}
