{
  String formView="f";
  String successView="s";
  final Integer someNumber=new Integer(12);
  TestController mc=new TestController(){
    protected void onBindOnNewForm(    HttpServletRequest request,    Object command) throws Exception {
      TestBean testBean=(TestBean)command;
      testBean.setSomeNumber(new Integer(12));
    }
  }
;
  mc.setFormView(formView);
  mc.setSuccessView(successView);
  mc.setBindOnNewForm(true);
  MockHttpServletRequest request=new MockHttpServletRequest("GET","/welcome.html");
  request.addParameter("name","rod");
  HttpServletResponse response=new MockHttpServletResponse();
  ModelAndView mv=mc.handleRequest(request,response);
  assertEquals("returned correct view name",formView,mv.getViewName());
  TestBean person=(TestBean)mv.getModel().get(TestController.BEAN_NAME);
  assertNotNull("model is non null",person);
  assertEquals("bean age default ok",person.getAge(),TestController.DEFAULT_AGE);
  assertEquals("name set","rod",person.getName());
  assertEquals("Property [someNumber] not set in onBindOnNewForm callback",someNumber,person.getSomeNumber());
}
