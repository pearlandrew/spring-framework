{
  GenericConversionService conversionService=ConversionServiceFactory.createDefaultConversionService();
  StopWatch watch=new StopWatch("map<string, string> -> map<string, integer> conversionPerformance");
  watch.start("convert 4,000,000 with conversion service");
  Map<String,String> source=new HashMap<String,String>();
  source.put("1","1");
  source.put("2","2");
  source.put("3","3");
  TypeDescriptor td=new TypeDescriptor(getClass().getField("map"));
  for (int i=0; i < 1000000; i++) {
    conversionService.convert(source,td);
  }
  watch.stop();
  watch.start("convert 4,000,000 manually");
  for (int i=0; i < 4000000; i++) {
    Map<String,Integer> target=new HashMap<String,Integer>(source.size());
    for (    Map.Entry<String,String> entry : source.entrySet()) {
      target.put(entry.getKey(),Integer.valueOf(entry.getValue()));
    }
  }
  watch.stop();
  System.out.println(watch.prettyPrint());
}
