{
  if (this.objectMapper == null) {
    this.objectMapper=new ObjectMapper();
  }
  if (this.dateFormat != null) {
    this.objectMapper.setDateFormat(this.dateFormat);
  }
  if (this.annotationIntrospector != null) {
    this.objectMapper.setAnnotationIntrospector(this.annotationIntrospector);
  }
  if (this.serializationInclusion != null) {
    this.objectMapper.setSerializationInclusion(this.serializationInclusion);
  }
  if (!this.serializers.isEmpty() || !this.deserializers.isEmpty()) {
    SimpleModule module=new SimpleModule();
    addSerializers(module);
    addDeserializers(module);
    this.objectMapper.registerModule(module);
  }
  for (  Object feature : this.features.keySet()) {
    configureFeature(feature,this.features.get(feature));
  }
  if (this.modules != null) {
    for (    Module module : this.modules) {
      this.objectMapper.registerModule(module);
    }
  }
 else {
    if (this.modulesToInstall != null) {
      for (      Class<? extends Module> module : this.modulesToInstall) {
        this.objectMapper.registerModule(BeanUtils.instantiate(module));
      }
    }
    if (this.findModulesViaServiceLoader) {
      this.objectMapper.registerModules(ObjectMapper.findModules(this.beanClassLoader));
    }
 else {
      registerWellKnownModulesIfAvailable();
    }
  }
  if (this.propertyNamingStrategy != null) {
    this.objectMapper.setPropertyNamingStrategy(this.propertyNamingStrategy);
  }
}
