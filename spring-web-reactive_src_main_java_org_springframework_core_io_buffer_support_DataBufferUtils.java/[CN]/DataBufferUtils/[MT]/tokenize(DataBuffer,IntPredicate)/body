{
  Assert.notNull(dataBuffer,"'dataBuffer' must not be null");
  Assert.notNull(delimiter,"'delimiter' must not be null");
  List<DataBuffer> results=new ArrayList<DataBuffer>();
  int idx;
  do {
    idx=dataBuffer.indexOf(delimiter);
    if (idx < 0) {
      results.add(dataBuffer);
    }
 else {
      if (idx > 0) {
        DataBuffer slice=dataBuffer.slice(0,idx);
        slice=retain(slice);
        results.add(slice);
      }
      int remainingLen=dataBuffer.readableByteCount() - (idx + 1);
      if (remainingLen > 0) {
        dataBuffer=dataBuffer.slice(idx + 1,remainingLen);
      }
 else {
        release(dataBuffer);
        idx=-1;
      }
    }
  }
 while (idx != -1);
  return Collections.unmodifiableList(results);
}
