{
  String method=request.getMethod();
  if (this.supportedMethods != null && !this.supportedMethods.contains(method)) {
    throw new HttpRequestMethodNotSupportedException(method,StringUtils.toStringArray(this.supportedMethods));
  }
  if (this.requireSession) {
    if (request.getSession(false) == null) {
      throw new HttpSessionRequiredException("Pre-existing session required but none found");
    }
  }
  if (this.usePreviousHttpCachingBehavior) {
    addHttp10CacheHeaders(response);
  }
 else   if (cacheControl != null) {
    String ccValue=cacheControl.getHeaderValue();
    if (ccValue != null) {
      response.setHeader(HEADER_CACHE_CONTROL,ccValue);
    }
  }
}
