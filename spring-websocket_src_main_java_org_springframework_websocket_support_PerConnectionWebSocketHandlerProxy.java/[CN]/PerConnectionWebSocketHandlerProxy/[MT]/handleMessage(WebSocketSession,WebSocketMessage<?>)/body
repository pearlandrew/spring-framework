{
  if (!this.supportedMessageType.isAssignableFrom(message.getClass())) {
    try {
      session.close(CloseStatus.NOT_ACCEPTABLE.withReason("Message type not supported"));
    }
 catch (    IOException e) {
      destroy(session);
    }
  }
 else {
    ((WebSocketHandler)getHandler(session)).handleMessage(session,message);
  }
}
