{
  FactoryBean fb=(mbd.isSingleton() ? getSingletonFactoryBeanForTypeCheck(beanName,mbd) : getNonSingletonFactoryBeanForTypeCheck(beanName,mbd));
  if (fb != null) {
    Class objectType=getTypeForFactoryBean(fb);
    if (objectType != null) {
      return objectType;
    }
  }
  return super.getTypeForFactoryBean(beanName,mbd);
}
