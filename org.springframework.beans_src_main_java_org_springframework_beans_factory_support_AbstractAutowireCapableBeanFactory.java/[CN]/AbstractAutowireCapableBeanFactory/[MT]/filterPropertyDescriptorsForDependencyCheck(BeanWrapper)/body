{
synchronized (this.filteredPropertyDescriptorsCache) {
    PropertyDescriptor[] filtered=(PropertyDescriptor[])this.filteredPropertyDescriptorsCache.get(bw.getWrappedClass());
    if (filtered == null) {
      List pds=new LinkedList(Arrays.asList(bw.getPropertyDescriptors()));
      for (Iterator it=pds.iterator(); it.hasNext(); ) {
        PropertyDescriptor pd=(PropertyDescriptor)it.next();
        if (isExcludedFromDependencyCheck(pd)) {
          it.remove();
        }
      }
      filtered=(PropertyDescriptor[])pds.toArray(new PropertyDescriptor[pds.size()]);
      this.filteredPropertyDescriptorsCache.put(bw.getWrappedClass(),filtered);
    }
    return filtered;
  }
}
