{
synchronized (this.filteredPropertyDescriptorsCache) {
    PropertyDescriptor[] filtered=this.filteredPropertyDescriptorsCache.get(bw.getWrappedClass());
    if (filtered == null) {
      List<PropertyDescriptor> pds=new LinkedList<PropertyDescriptor>(Arrays.asList(bw.getPropertyDescriptors()));
      for (Iterator<PropertyDescriptor> it=pds.iterator(); it.hasNext(); ) {
        PropertyDescriptor pd=it.next();
        if (isExcludedFromDependencyCheck(pd)) {
          it.remove();
        }
      }
      filtered=pds.toArray(new PropertyDescriptor[pds.size()]);
      this.filteredPropertyDescriptorsCache.put(bw.getWrappedClass(),filtered);
    }
    return filtered;
  }
}
