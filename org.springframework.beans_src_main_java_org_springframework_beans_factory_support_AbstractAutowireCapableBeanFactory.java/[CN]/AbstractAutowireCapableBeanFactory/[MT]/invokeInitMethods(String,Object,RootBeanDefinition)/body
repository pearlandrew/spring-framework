{
  boolean isInitializingBean=(bean instanceof InitializingBean);
  if (isInitializingBean && (mbd == null || !mbd.isExternallyManagedInitMethod("afterPropertiesSet"))) {
    if (logger.isDebugEnabled()) {
      logger.debug("Invoking afterPropertiesSet() on bean with name '" + beanName + "'");
    }
    ((InitializingBean)bean).afterPropertiesSet();
  }
  if (mbd != null) {
    String initMethodName=mbd.getInitMethodName();
    if (initMethodName != null && !(isInitializingBean && "afterPropertiesSet".equals(initMethodName)) && !mbd.isExternallyManagedInitMethod(initMethodName)) {
      invokeCustomInitMethod(beanName,bean,mbd);
    }
  }
}
