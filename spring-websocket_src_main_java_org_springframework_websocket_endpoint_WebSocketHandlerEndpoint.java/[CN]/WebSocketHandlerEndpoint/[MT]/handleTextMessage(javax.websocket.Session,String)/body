{
  if (logger.isTraceEnabled()) {
    logger.trace("Received message for WebSocket session id=" + session.getId() + ": "+ message);
  }
  try {
    TextMessage textMessage=new TextMessage(message);
    ((TextMessageHandler)handler).handleTextMessage(textMessage,this.webSocketSession);
  }
 catch (  Throwable ex) {
    this.handler.handleError(ex,this.webSocketSession);
  }
}
