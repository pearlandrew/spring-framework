{
  if (logger.isDebugEnabled()) {
    logger.debug("New session: " + session);
  }
  try {
    WebSocketSession webSocketSession=new StandardWebSocketSession(session);
    this.sessions.put(session.getId(),webSocketSession);
    session.addMessageHandler(new StandardMessageHandler(session));
    this.webSocketHandler.newSession(webSocketSession);
  }
 catch (  Throwable ex) {
    logger.error("Error while processing new session",ex);
  }
}
