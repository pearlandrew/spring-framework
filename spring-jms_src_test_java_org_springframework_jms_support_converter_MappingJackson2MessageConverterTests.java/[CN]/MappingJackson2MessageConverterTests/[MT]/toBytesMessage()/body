{
  BytesMessage bytesMessageMock=createMock(BytesMessage.class);
  Date toBeMarshalled=new Date();
  expect(sessionMock.createBytesMessage()).andReturn(bytesMessageMock);
  bytesMessageMock.setStringProperty("__encoding__","UTF-8");
  bytesMessageMock.setStringProperty("__typeid__",Date.class.getName());
  bytesMessageMock.writeBytes(isA(byte[].class));
  replay(sessionMock,bytesMessageMock);
  converter.toMessage(toBeMarshalled,sessionMock);
  verify(sessionMock,bytesMessageMock);
}
