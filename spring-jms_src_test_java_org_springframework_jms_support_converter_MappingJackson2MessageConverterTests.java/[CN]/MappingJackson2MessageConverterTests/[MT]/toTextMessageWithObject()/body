{
  converter.setTargetType(MessageType.TEXT);
  TextMessage textMessageMock=createMock(TextMessage.class);
  Date toBeMarshalled=new Date();
  textMessageMock.setStringProperty("__typeid__",Date.class.getName());
  expect(sessionMock.createTextMessage(isA(String.class))).andReturn(textMessageMock);
  replay(sessionMock,textMessageMock);
  converter.toMessage(toBeMarshalled,sessionMock);
  verify(sessionMock,textMessageMock);
}
