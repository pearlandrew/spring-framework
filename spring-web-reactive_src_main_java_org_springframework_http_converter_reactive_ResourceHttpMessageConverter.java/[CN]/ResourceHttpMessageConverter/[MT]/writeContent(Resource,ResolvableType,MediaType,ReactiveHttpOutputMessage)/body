{
  if (outputMessage instanceof ZeroCopyHttpOutputMessage) {
    Optional<File> file=getFile(resource);
    if (file.isPresent()) {
      ZeroCopyHttpOutputMessage zeroCopyResponse=(ZeroCopyHttpOutputMessage)outputMessage;
      return zeroCopyResponse.setBody(file.get(),(long)0,file.get().length());
    }
  }
  return super.write(Mono.just(resource),type,outputMessage.getHeaders().getContentType(),outputMessage);
}
