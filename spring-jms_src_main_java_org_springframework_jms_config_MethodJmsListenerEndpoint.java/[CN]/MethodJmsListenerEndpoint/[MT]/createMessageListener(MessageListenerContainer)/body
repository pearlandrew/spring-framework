{
  Assert.state(jmsHandlerMethodFactory != null,"Could not create message listener, message listener factory not set.");
  MessagingMessageListenerAdapter messageListener=createMessageListenerInstance();
  InvocableHandlerMethod invocableHandlerMethod=jmsHandlerMethodFactory.createInvocableHandlerMethod(getBean(),getMethod());
  messageListener.setHandlerMethod(invocableHandlerMethod);
  String responseDestination=getDefaultResponseDestination();
  if (StringUtils.hasText(responseDestination)) {
    if (isQueue()) {
      messageListener.setDefaultResponseQueueName(responseDestination);
    }
 else {
      messageListener.setDefaultResponseTopicName(responseDestination);
    }
  }
  MessageConverter messageConverter=container.getMessageConverter();
  if (messageConverter != null) {
    messageListener.setMessageConverter(messageConverter);
  }
  return messageListener;
}
