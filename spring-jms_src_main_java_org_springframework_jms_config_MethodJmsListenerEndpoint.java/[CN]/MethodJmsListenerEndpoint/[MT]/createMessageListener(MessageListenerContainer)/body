{
  Assert.state(this.jmsHandlerMethodFactory != null,"Could not create message listener - message listener factory not set");
  MessagingMessageListenerAdapter messageListener=createMessageListenerInstance();
  InvocableHandlerMethod invocableHandlerMethod=this.jmsHandlerMethodFactory.createInvocableHandlerMethod(getBean(),getMethod());
  messageListener.setHandlerMethod(invocableHandlerMethod);
  String responseDestination=getDefaultResponseDestination();
  if (StringUtils.hasText(responseDestination)) {
    if (container.isPubSubDomain()) {
      messageListener.setDefaultResponseTopicName(responseDestination);
    }
 else {
      messageListener.setDefaultResponseQueueName(responseDestination);
    }
  }
  MessageConverter messageConverter=container.getMessageConverter();
  if (messageConverter != null) {
    messageListener.setMessageConverter(messageConverter);
  }
  return messageListener;
}
