{
  ClassLoader classLoader=metadataReaderFactory.getResourceLoader().getClassLoader();
  Class<? extends Annotation> annoClass=ConfigurationClassReaderUtils.loadAnnotationType(annoTypeDesc,classLoader);
  if (annoClass == null) {
    return new EmptyVisitor();
  }
  if (Import.class.equals(annoClass)) {
    if (!importStack.contains(configClass)) {
      importStack.push(configClass);
      return new ImportAnnotationVisitor(model,problemReporter,classLoader);
    }
    problemReporter.error(new CircularImportProblem(configClass,importStack));
  }
  ConfigurationClassAnnotation mutableAnnotation=ConfigurationClassReaderUtils.createMutableAnnotation(annoClass,classLoader);
  configClass.addAnnotation(mutableAnnotation);
  return new ConfigurationClassAnnotationVisitor(mutableAnnotation,classLoader);
}
