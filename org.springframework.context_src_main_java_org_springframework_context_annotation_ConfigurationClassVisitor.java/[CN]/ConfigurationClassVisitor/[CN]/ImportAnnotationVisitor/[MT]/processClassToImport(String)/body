{
  ConfigurationClass configClass=new ConfigurationClass();
  try {
    ClassReader reader=metadataReaderFactory.getMetadataReader(classToImport).getClassReader();
    reader.accept(new ConfigurationClassVisitor(configClass,model,problemReporter,metadataReaderFactory,importStack),false);
    if (configClass.getAnnotation(Configuration.class) == null) {
      problemReporter.error(new NonAnnotatedConfigurationProblem(configClass.getName(),configClass.getLocation()));
    }
 else {
      model.add(configClass);
    }
  }
 catch (  IOException ex) {
    throw new BeanDefinitionStoreException("Failed to load imported configuration class [" + classToImport + "]",ex);
  }
}
