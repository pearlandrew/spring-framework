{
  byte[] abc=new byte[]{'a','b','c'};
  byte[] def=new byte[]{'d','e','f'};
  queue.putSignal(abc);
  queue.putSignal(def);
  queue.complete();
  final AtomicBoolean complete=new AtomicBoolean(false);
  final List<byte[]> received=new ArrayList<byte[]>(1);
  publisher.subscribe(new Subscriber<byte[]>(){
    private Subscription subscription;
    @Override public void onSubscribe(    Subscription s){
      s.request(1);
      this.subscription=s;
    }
    @Override public void onNext(    byte[] bytes){
      received.add(bytes);
      this.subscription.cancel();
      complete.set(true);
    }
    @Override public void onError(    Throwable t){
      fail("onError not expected");
    }
    @Override public void onComplete(){
    }
  }
);
  while (!complete.get()) {
  }
  assertEquals(1,received.size());
  assertSame(abc,received.get(0));
}
