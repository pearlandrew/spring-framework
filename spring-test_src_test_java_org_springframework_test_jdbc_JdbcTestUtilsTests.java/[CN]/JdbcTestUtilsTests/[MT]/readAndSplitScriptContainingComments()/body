{
  EncodedResource resource=new EncodedResource(new ClassPathResource("test-data-with-comments.sql",getClass()));
  LineNumberReader lineNumberReader=new LineNumberReader(resource.getReader());
  String script=JdbcTestUtils.readScript(lineNumberReader);
  assertFalse("script should not contain --",script.contains("--"));
  char delim=';';
  List<String> statements=new ArrayList<String>();
  JdbcTestUtils.splitSqlScript(script,delim,statements);
  String statement1="insert into customer (id, name) values (1, 'Rod; Johnson'), (2, 'Adrian Collier')";
  String statement2=" insert into orders(id, order_date, customer_id) values (1, '2008-01-02', 2)";
  String statement3=" insert into orders(id, order_date, customer_id) values (1, '2008-01-02', 2)";
  assertEquals("wrong number of statements",3,statements.size());
  assertEquals("statement 1 not split correctly",statement1,statements.get(0));
  assertEquals("statement 2 not split correctly",statement2,statements.get(1));
  assertEquals("statement 3 not split correctly",statement3,statements.get(2));
}
