{
  Assert.notNull(this.attributes,"'attributes' is required");
  Collection attrs=this.attributes.getAttributes(method,ManagedOperationParameter.class);
  if (attrs.size() == 0) {
    return new ManagedOperationParameter[0];
  }
 else   if (attrs.size() != method.getParameterTypes().length) {
    throw new InvalidMetadataException("Method [" + method + "] has an incorrect number of ManagedOperationParameters specified");
  }
 else {
    ManagedOperationParameter[] params=new ManagedOperationParameter[attrs.size()];
    for (Iterator it=attrs.iterator(); it.hasNext(); ) {
      ManagedOperationParameter param=(ManagedOperationParameter)it.next();
      if (param.getIndex() < 0 || param.getIndex() >= params.length) {
        throw new InvalidMetadataException("ManagedOperationParameter index for [" + param.getName() + "] is out of bounds");
      }
      params[param.getIndex()]=param;
    }
    return params;
  }
}
