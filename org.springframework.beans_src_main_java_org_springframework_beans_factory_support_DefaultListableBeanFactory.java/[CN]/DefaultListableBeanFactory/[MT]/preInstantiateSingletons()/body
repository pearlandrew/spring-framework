{
  if (this.logger.isInfoEnabled()) {
    this.logger.info("Pre-instantiating singletons in " + this);
  }
synchronized (this.beanDefinitionMap) {
    for (    String beanName : this.beanDefinitionNames) {
      RootBeanDefinition bd=getMergedLocalBeanDefinition(beanName);
      if (!bd.isAbstract() && bd.isSingleton() && !bd.isLazyInit()) {
        if (isFactoryBean(beanName)) {
          final FactoryBean factory=(FactoryBean)getBean(FACTORY_BEAN_PREFIX + beanName);
          boolean isEagerInit;
          if (System.getSecurityManager() != null && factory instanceof SmartFactoryBean) {
            isEagerInit=AccessController.doPrivileged(new PrivilegedAction<Boolean>(){
              public Boolean run(){
                return ((SmartFactoryBean)factory).isEagerInit();
              }
            }
,getAccessControlContext());
          }
 else {
            isEagerInit=factory instanceof SmartFactoryBean && ((SmartFactoryBean)factory).isEagerInit();
          }
          if (isEagerInit) {
            getBean(beanName);
          }
        }
 else {
          getBean(beanName);
        }
      }
    }
  }
}
