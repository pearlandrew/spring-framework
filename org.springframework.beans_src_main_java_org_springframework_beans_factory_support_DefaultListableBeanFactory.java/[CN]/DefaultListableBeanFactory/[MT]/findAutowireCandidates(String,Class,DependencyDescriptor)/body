{
  String[] candidateNames=BeanFactoryUtils.beanNamesForTypeIncludingAncestors(this,requiredType,true,descriptor.isEager());
  Map<String,Object> result=new LinkedHashMap<String,Object>(candidateNames.length);
  for (  Class autowiringType : this.resolvableDependencies.keySet()) {
    if (autowiringType.isAssignableFrom(requiredType)) {
      Object autowiringValue=this.resolvableDependencies.get(autowiringType);
      if (autowiringValue instanceof ObjectFactory && !requiredType.isInstance(autowiringValue)) {
        autowiringValue=((ObjectFactory)autowiringValue).getObject();
      }
      if (requiredType.isInstance(autowiringValue)) {
        result.put(ObjectUtils.identityToString(autowiringValue),autowiringValue);
        break;
      }
    }
  }
  for (  String candidateName : candidateNames) {
    if (!candidateName.equals(beanName) && isAutowireCandidate(candidateName,descriptor)) {
      result.put(candidateName,getBean(candidateName));
    }
  }
  return result;
}
