{
  boolean isFactoryBean=(descriptor != null && descriptor.getDependencyType() != null && FactoryBean.class.isAssignableFrom(descriptor.getDependencyType()));
  if (isFactoryBean) {
    beanName=BeanFactoryUtils.transformedBeanName(beanName);
  }
  if (containsBeanDefinition(beanName)) {
    return isAutowireCandidate(beanName,getMergedLocalBeanDefinition(beanName),descriptor);
  }
 else   if (containsSingleton(beanName)) {
    return isAutowireCandidate(beanName,new RootBeanDefinition(getType(beanName)),descriptor);
  }
 else   if (getParentBeanFactory() instanceof ConfigurableListableBeanFactory) {
    return ((ConfigurableListableBeanFactory)getParentBeanFactory()).isAutowireCandidate(beanName,descriptor);
  }
 else {
    return true;
  }
}
