{
  String primaryBeanName=null;
  for (  Map.Entry<String,Object> entry : candidateBeans.entrySet()) {
    String candidateBeanName=entry.getKey();
    if (isPrimary(candidateBeanName,entry.getValue())) {
      if (primaryBeanName != null) {
        throw new NoSuchBeanDefinitionException(type,"more than one 'primary' bean found among candidates: " + candidateBeans.keySet());
      }
      primaryBeanName=candidateBeanName;
    }
  }
  return primaryBeanName;
}
