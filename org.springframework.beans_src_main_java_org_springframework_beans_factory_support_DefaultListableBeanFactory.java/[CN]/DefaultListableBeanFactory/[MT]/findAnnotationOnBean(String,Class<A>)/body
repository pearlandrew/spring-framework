{
  Class<?> handlerType=getType(beanName);
  A ann=AnnotationUtils.findAnnotation(handlerType,annotationType);
  if (ann == null && containsBeanDefinition(beanName)) {
    BeanDefinition bd=getMergedBeanDefinition(beanName);
    if (bd instanceof AbstractBeanDefinition) {
      AbstractBeanDefinition abd=(AbstractBeanDefinition)bd;
      if (abd.hasBeanClass()) {
        Class<?> beanClass=abd.getBeanClass();
        ann=AnnotationUtils.findAnnotation(beanClass,annotationType);
      }
    }
  }
  return ann;
}
