{
  String primaryBeanName=null;
  for (Iterator it=candidateBeans.entrySet().iterator(); it.hasNext(); ) {
    Map.Entry entry=(Map.Entry)it.next();
    String candidateBeanName=(String)entry.getKey();
    if (isPrimary(candidateBeanName,entry.getValue())) {
      if (primaryBeanName != null) {
        throw new NoSuchBeanDefinitionException(type,"more than one 'primary' bean found among candidates: " + candidateBeans.keySet());
      }
      primaryBeanName=candidateBeanName;
    }
  }
  return primaryBeanName;
}
