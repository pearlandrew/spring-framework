{
  if (!isCache()) {
    return createView(viewName,locale);
  }
 else {
    Object cacheKey=getCacheKey(viewName,locale);
synchronized (this.viewCache) {
      View view=this.viewCache.get(cacheKey);
      boolean isCached=this.cacheUnresolved && this.viewCache.containsKey(cacheKey);
      if (view == null && !isCached) {
        view=createView(viewName,locale);
        this.viewCache.put(cacheKey,view);
        if (logger.isTraceEnabled()) {
          logger.trace("Cached view [" + cacheKey + "]");
        }
      }
      return view;
    }
  }
}
