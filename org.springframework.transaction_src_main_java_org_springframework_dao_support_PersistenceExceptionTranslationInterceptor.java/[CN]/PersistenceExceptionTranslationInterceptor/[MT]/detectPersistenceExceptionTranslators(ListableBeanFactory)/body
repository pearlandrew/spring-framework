{
  Map pets=BeanFactoryUtils.beansOfTypeIncludingAncestors(beanFactory,PersistenceExceptionTranslator.class,false,false);
  if (pets.isEmpty()) {
    throw new IllegalStateException("No persistence exception translators found in bean factory. Cannot perform exception translation.");
  }
  ChainedPersistenceExceptionTranslator cpet=new ChainedPersistenceExceptionTranslator();
  for (Iterator it=pets.values().iterator(); it.hasNext(); ) {
    cpet.addDelegate((PersistenceExceptionTranslator)it.next());
  }
  return cpet;
}
