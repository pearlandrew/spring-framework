{
  String name=classLoader.getClass().getName();
  try {
    if (name.startsWith("weblogic")) {
      return new WebLogicLoadTimeWeaver(classLoader);
    }
 else     if (name.startsWith("oracle")) {
      return new OC4JLoadTimeWeaver(classLoader);
    }
 else     if (name.startsWith("com.sun.enterprise")) {
      return new GlassFishLoadTimeWeaver(classLoader);
    }
 else     if (name.startsWith("org.jboss")) {
      return new JBossLoadTimeWeaver(classLoader);
    }
  }
 catch (  IllegalStateException ex) {
    logger.info("Could not obtain server-specific LoadTimeWeaver: " + ex.getMessage());
  }
  return null;
}
