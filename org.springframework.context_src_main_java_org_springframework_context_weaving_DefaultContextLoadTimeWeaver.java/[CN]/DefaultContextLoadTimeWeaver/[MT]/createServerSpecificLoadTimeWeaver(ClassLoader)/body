{
  try {
    if (classLoader.getClass().getName().startsWith("weblogic")) {
      return new WebLogicLoadTimeWeaver(classLoader);
    }
 else     if (classLoader.getClass().getName().startsWith("oracle")) {
      return new OC4JLoadTimeWeaver(classLoader);
    }
 else     if (classLoader.getClass().getName().startsWith("com.sun.enterprise")) {
      return new GlassFishLoadTimeWeaver(classLoader);
    }
 else     if (classLoader.getClass().getName().startsWith("org.jboss")) {
      return new JBoss5LoadTimeWeaver(classLoader);
    }
  }
 catch (  IllegalStateException ex) {
    logger.info("Could not obtain server-specific LoadTimeWeaver: " + ex.getMessage());
  }
  return null;
}
