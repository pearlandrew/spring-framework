{
  List<Message<?>> messages=new ArrayList<Message<?>>();
  this.messageQueue.drainTo(messages);
  for (  Message<?> message : messages) {
    StompHeaderAccessor headers=StompHeaderAccessor.wrap(message);
    if (!forwardInternal(message,headers,connection)) {
      return;
    }
  }
}
