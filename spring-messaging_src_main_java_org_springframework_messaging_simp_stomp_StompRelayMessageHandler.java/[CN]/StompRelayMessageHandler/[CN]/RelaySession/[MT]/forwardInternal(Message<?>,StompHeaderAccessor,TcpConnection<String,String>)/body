{
  try {
    headers.setStompCommandIfNotSet(StompCommand.SEND);
    if (logger.isTraceEnabled()) {
      logger.trace("Forwarding message " + message);
    }
    byte[] bytes=stompMessageConverter.fromMessage(message);
    connection.send(new String(bytes,Charset.forName("UTF-8")));
  }
 catch (  Throwable ex) {
    logger.error("Failed to forward message " + message,ex);
    connection.close();
    sendError(this.sessionId,"Failed to forward message " + message + ": "+ ex.getMessage());
    return false;
  }
  return true;
}
