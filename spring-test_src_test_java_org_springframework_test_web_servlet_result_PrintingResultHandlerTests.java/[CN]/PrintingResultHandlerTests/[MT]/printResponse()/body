{
  Cookie enigmaCookie=new Cookie("enigma","42");
  enigmaCookie.setComment("This is a comment");
  enigmaCookie.setHttpOnly(true);
  enigmaCookie.setMaxAge(1234);
  enigmaCookie.setDomain(".example.com");
  enigmaCookie.setPath("/crumbs");
  enigmaCookie.setSecure(true);
  this.response.setStatus(400,"error");
  this.response.addHeader("header","headerValue");
  this.response.setContentType("text/plain");
  this.response.getWriter().print("content");
  this.response.setForwardedUrl("redirectFoo");
  this.response.sendRedirect("/redirectFoo");
  this.response.addCookie(new Cookie("cookie","cookieValue"));
  this.response.addCookie(enigmaCookie);
  this.handler.handle(this.mvcResult);
  HttpHeaders headers=new HttpHeaders();
  headers.set("header","headerValue");
  headers.setContentType(MediaType.TEXT_PLAIN);
  headers.setLocation(new URI("/redirectFoo"));
  String heading="MockHttpServletResponse";
  assertValue(heading,"Status",this.response.getStatus());
  assertValue(heading,"Error message",response.getErrorMessage());
  assertValue(heading,"Headers",headers);
  assertValue(heading,"Content type",this.response.getContentType());
  assertValue(heading,"Body",this.response.getContentAsString());
  assertValue(heading,"Forwarded URL",this.response.getForwardedUrl());
  assertValue(heading,"Redirected URL",this.response.getRedirectedUrl());
  Map<String,Map<String,Object>> printedValues=this.handler.getPrinter().printedValues;
  String[] cookies=(String[])printedValues.get(heading).get("Cookies");
  assertEquals(2,cookies.length);
  String cookie1=cookies[0];
  String cookie2=cookies[1];
  assertTrue(cookie1.startsWith("[" + Cookie.class.getSimpleName()));
  assertTrue(cookie1.contains("name = 'cookie', value = 'cookieValue'"));
  assertTrue(cookie1.endsWith("]"));
  assertTrue(cookie2.startsWith("[" + Cookie.class.getSimpleName()));
  assertTrue(cookie2.contains("name = 'enigma', value = '42', comment = 'This is a comment', domain = '.example.com', maxAge = 1234, path = '/crumbs', secure = true, version = 0, httpOnly = true"));
  assertTrue(cookie2.endsWith("]"));
}
