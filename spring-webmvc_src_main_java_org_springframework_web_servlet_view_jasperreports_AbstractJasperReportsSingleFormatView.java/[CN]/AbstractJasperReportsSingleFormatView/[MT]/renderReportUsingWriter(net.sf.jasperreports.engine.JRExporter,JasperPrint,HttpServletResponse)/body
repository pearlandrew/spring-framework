{
  String contentType=getContentType();
  String encoding=(String)exporter.getParameter(net.sf.jasperreports.engine.JRExporterParameter.CHARACTER_ENCODING);
  if (encoding != null) {
    if (contentType != null && !contentType.toLowerCase().contains(WebUtils.CONTENT_TYPE_CHARSET_PREFIX)) {
      contentType=contentType + WebUtils.CONTENT_TYPE_CHARSET_PREFIX + encoding;
    }
  }
  response.setContentType(contentType);
  JasperReportsUtils.render(exporter,populatedReport,response.getWriter());
}
