{
  if (request instanceof ServletServerHttpRequest) {
    ServletServerHttpRequest servletRequest=(ServletServerHttpRequest)request;
    HttpSession session=servletRequest.getServletRequest().getSession(false);
    if (session != null) {
      Enumeration<String> names=session.getAttributeNames();
      while (names.hasMoreElements()) {
        String name=names.nextElement();
        if (CollectionUtils.isEmpty(this.attributeNames) || this.attributeNames.contains(name)) {
          attributes.put(name,session.getAttribute(name));
        }
      }
      if (isCopyHttpSessionId()) {
        attributes.put(HTTP_SESSION_ID_ATTR_NAME,session.getId());
      }
    }
  }
  return true;
}
