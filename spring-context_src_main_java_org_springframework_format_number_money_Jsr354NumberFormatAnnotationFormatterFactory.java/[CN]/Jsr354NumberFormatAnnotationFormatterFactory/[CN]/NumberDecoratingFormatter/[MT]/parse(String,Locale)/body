{
  Currency currency=Currency.getInstance(locale);
  Formatter<Number> formatterToUse=this.numberFormatter;
  if (formatterToUse == null) {
    CurrencyStyleFormatter formatter=new CurrencyStyleFormatter();
    formatter.setCurrency(currency);
    formatter.setPattern(this.pattern);
    formatterToUse=formatter;
  }
  Number numberValue=formatterToUse.parse(text,locale);
  CurrencyUnit currencyUnit=MonetaryCurrencies.getCurrency(currency.getCurrencyCode());
  return MonetaryAmounts.getDefaultAmountFactory().setNumber(numberValue).setCurrency(currencyUnit).create();
}
