{
  Class<?> methodDeclaringClass=method.getDeclaringClass();
  Class<?> targetBeanClass=targetBean.getClass();
  if (!methodDeclaringClass.isAssignableFrom(targetBeanClass)) {
    String message="The mapped controller method class '" + methodDeclaringClass.getName() + "' is not an instance of the actual controller bean instance '"+ targetBeanClass.getName()+ "'. If the controller requires proxying "+ "(e.g. due to @Transactional), please use class-based proxying.";
    throw new IllegalArgumentException(getInvocationErrorMessage(message,args));
  }
}
