{
  int portAsInt=port != null ? Integer.parseInt(port) : -1;
  UriComponentsBuilder builder=UriComponentsBuilder.newInstance();
  builder.scheme(scheme).userInfo(userInfo).host(host).port(portAsInt);
  builder.path(path).query(query).fragment(fragment);
  UriComponents encoded=builder.build().encode(encoding);
  return encoded.toUriString();
}
