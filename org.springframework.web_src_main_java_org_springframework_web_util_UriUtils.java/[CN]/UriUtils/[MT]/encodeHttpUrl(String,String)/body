{
  Assert.notNull(httpUrl,"'httpUrl' must not be null");
  Assert.hasLength(encoding,"'encoding' must not be empty");
  Matcher m=HTTP_URL_PATTERN.matcher(httpUrl);
  if (m.matches()) {
    String scheme=m.group(1);
    String authority=m.group(2);
    String userinfo=m.group(4);
    String host=m.group(5);
    String portString=m.group(7);
    String path=m.group(8);
    String query=m.group(10);
    return encodeUriComponents(scheme,authority,userinfo,host,portString,path,query,null,encoding);
  }
 else {
    throw new IllegalArgumentException("[" + httpUrl + "] is not a valid HTTP URL");
  }
}
