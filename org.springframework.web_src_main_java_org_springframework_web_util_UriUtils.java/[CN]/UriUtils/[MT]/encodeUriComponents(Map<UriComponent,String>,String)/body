{
  Assert.notEmpty(uriComponents,"'uriComponents' must not be empty");
  Map<UriComponent,String> encodedUriComponents=new EnumMap<UriComponent,String>(UriComponent.class);
  for (  Map.Entry<UriComponent,String> entry : uriComponents.entrySet()) {
    if (entry.getValue() != null) {
      String encodedValue=encode(entry.getValue(),encoding,entry.getKey(),false);
      encodedUriComponents.put(entry.getKey(),encodedValue);
    }
  }
  return buildUri(encodedUriComponents);
}
