{
  if (isEqualsMethod(method)) {
    return equals(proxy,args[0]);
  }
  if (isHashCodeMethod(method)) {
    return hashCode(proxy);
  }
  if (isToStringMethod(method)) {
    return toString(proxy);
  }
  String methodName=method.getName();
  Class<?> returnType=method.getReturnType();
  boolean nestedAnnotation=(Annotation[].class.isAssignableFrom(returnType) || Annotation.class.isAssignableFrom(returnType));
  String aliasedAttributeName=aliasMap.get(methodName);
  boolean aliasPresent=(aliasedAttributeName != null);
  makeAccessible(method);
  Object value=invokeMethod(method,this.annotation,args);
  if (!aliasPresent && !nestedAnnotation) {
    return value;
  }
  if (aliasPresent) {
    Method aliasedMethod=null;
    try {
      aliasedMethod=this.annotationType.getDeclaredMethod(aliasedAttributeName);
    }
 catch (    NoSuchMethodException e) {
      String msg=String.format("In annotation [%s], attribute [%s] is declared as an @AliasFor [%s], " + "but attribute [%s] does not exist.",this.annotationType.getName(),methodName,aliasedAttributeName,aliasedAttributeName);
      throw new AnnotationConfigurationException(msg);
    }
    makeAccessible(aliasedMethod);
    Object aliasedValue=invokeMethod(aliasedMethod,this.annotation);
    Object defaultValue=getDefaultValue(this.annotation,methodName);
    if (!nullSafeEquals(value,aliasedValue) && !nullSafeEquals(value,defaultValue) && !nullSafeEquals(aliasedValue,defaultValue)) {
      String elementName=(this.annotatedElement == null ? "unknown element" : this.annotatedElement.toString());
      String msg=String.format("In annotation [%s] declared on [%s], attribute [%s] and its alias [%s] are " + "declared with values of [%s] and [%s], but only one declaration is permitted.",this.annotationType.getName(),elementName,methodName,aliasedAttributeName,nullSafeToString(value),nullSafeToString(aliasedValue));
      throw new AnnotationConfigurationException(msg);
    }
    if (nullSafeEquals(value,defaultValue)) {
      value=aliasedValue;
    }
  }
  if (value instanceof Annotation) {
    value=synthesizeAnnotation((Annotation)value,this.annotatedElement);
  }
 else   if (value instanceof Annotation[]) {
    Annotation[] annotations=(Annotation[])value;
    for (int i=0; i < annotations.length; i++) {
      annotations[i]=synthesizeAnnotation(annotations[i],this.annotatedElement);
    }
  }
  return value;
}
