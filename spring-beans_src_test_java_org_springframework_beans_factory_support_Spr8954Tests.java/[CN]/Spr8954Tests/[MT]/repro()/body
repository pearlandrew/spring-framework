{
  DefaultListableBeanFactory bf=new DefaultListableBeanFactory();
  bf.registerBeanDefinition("foo",new RootBeanDefinition(FooFactoryBean.class));
  bf.addBeanPostProcessor(new PredictingBPP());
  assertThat(bf.getBean("foo"),instanceOf(Foo.class));
  assertThat(bf.getBean("&foo"),instanceOf(FooFactoryBean.class));
  @SuppressWarnings("rawtypes") Map<String,FactoryBean> fbBeans=bf.getBeansOfType(FactoryBean.class);
  assertThat(1,equalTo(fbBeans.size()));
  assertThat("&foo",equalTo(fbBeans.keySet().iterator().next()));
  Map<String,AnInterface> aiBeans=bf.getBeansOfType(AnInterface.class);
  assertThat(1,equalTo(aiBeans.size()));
  assertThat("&foo",equalTo(aiBeans.keySet().iterator().next()));
}
