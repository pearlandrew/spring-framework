{
  checkActive();
  if (this.session instanceof MockPortletSession && ((MockPortletSession)this.session).isInvalid()) {
    this.session=null;
  }
  if (this.session == null && create) {
    this.session=new MockPortletSession(this.portletContext);
  }
  return this.session;
}
