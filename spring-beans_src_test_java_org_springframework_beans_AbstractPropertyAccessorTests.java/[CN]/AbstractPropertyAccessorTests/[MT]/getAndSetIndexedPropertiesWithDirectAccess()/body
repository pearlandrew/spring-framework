{
  IndexedTestBean target=new IndexedTestBean();
  AbstractPropertyAccessor accessor=createAccessor(target);
  TestBean tb0=target.getArray()[0];
  TestBean tb1=target.getArray()[1];
  TestBean tb2=((TestBean)target.getList().get(0));
  TestBean tb3=((TestBean)target.getList().get(1));
  TestBean tb6=((TestBean)target.getSet().toArray()[0]);
  TestBean tb7=((TestBean)target.getSet().toArray()[1]);
  TestBean tb4=((TestBean)target.getMap().get("key1"));
  TestBean tb5=((TestBean)target.getMap().get("key2"));
  assertEquals(tb0,accessor.getPropertyValue("array[0]"));
  assertEquals(tb1,accessor.getPropertyValue("array[1]"));
  assertEquals(tb2,accessor.getPropertyValue("list[0]"));
  assertEquals(tb3,accessor.getPropertyValue("list[1]"));
  assertEquals(tb6,accessor.getPropertyValue("set[0]"));
  assertEquals(tb7,accessor.getPropertyValue("set[1]"));
  assertEquals(tb4,accessor.getPropertyValue("map[key1]"));
  assertEquals(tb5,accessor.getPropertyValue("map[key2]"));
  assertEquals(tb4,accessor.getPropertyValue("map['key1']"));
  assertEquals(tb5,accessor.getPropertyValue("map[\"key2\"]"));
  MutablePropertyValues pvs=new MutablePropertyValues();
  pvs.add("array[0]",tb5);
  pvs.add("array[1]",tb4);
  pvs.add("list[0]",tb3);
  pvs.add("list[1]",tb2);
  pvs.add("list[2]",tb0);
  pvs.add("list[4]",tb1);
  pvs.add("map[key1]",tb1);
  pvs.add("map['key2']",tb0);
  pvs.add("map[key5]",tb4);
  pvs.add("map['key9']",tb5);
  accessor.setPropertyValues(pvs);
  assertEquals(tb5,target.getArray()[0]);
  assertEquals(tb4,target.getArray()[1]);
  assertEquals(tb3,(target.getList().get(0)));
  assertEquals(tb2,(target.getList().get(1)));
  assertEquals(tb0,(target.getList().get(2)));
  assertEquals(null,(target.getList().get(3)));
  assertEquals(tb1,(target.getList().get(4)));
  assertEquals(tb1,(target.getMap().get("key1")));
  assertEquals(tb0,(target.getMap().get("key2")));
  assertEquals(tb4,(target.getMap().get("key5")));
  assertEquals(tb5,(target.getMap().get("key9")));
  assertEquals(tb5,accessor.getPropertyValue("array[0]"));
  assertEquals(tb4,accessor.getPropertyValue("array[1]"));
  assertEquals(tb3,accessor.getPropertyValue("list[0]"));
  assertEquals(tb2,accessor.getPropertyValue("list[1]"));
  assertEquals(tb0,accessor.getPropertyValue("list[2]"));
  assertEquals(null,accessor.getPropertyValue("list[3]"));
  assertEquals(tb1,accessor.getPropertyValue("list[4]"));
  assertEquals(tb1,accessor.getPropertyValue("map[\"key1\"]"));
  assertEquals(tb0,accessor.getPropertyValue("map['key2']"));
  assertEquals(tb4,accessor.getPropertyValue("map[\"key5\"]"));
  assertEquals(tb5,accessor.getPropertyValue("map['key9']"));
}
