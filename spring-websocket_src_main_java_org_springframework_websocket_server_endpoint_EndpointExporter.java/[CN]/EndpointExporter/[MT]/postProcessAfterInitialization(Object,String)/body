{
  if (bean instanceof ServerEndpointConfig) {
    ServerEndpointConfig sec=(ServerEndpointConfig)bean;
    try {
      if (logger.isInfoEnabled()) {
        logger.info("Registering bean '" + beanName + "' as javax.websocket.Endpoint under path "+ sec.getPath());
      }
      ServerContainerProvider.getServerContainer().addEndpoint(sec);
    }
 catch (    DeploymentException e) {
      throw new IllegalStateException("Failed to deploy Endpoint bean " + bean,e);
    }
  }
  return bean;
}
