{
  Assert.notNull(returnValue,"A Callable or a DeferredValue is required");
  Class<?> paramType=returnType.getParameterType();
  ServletRequest servletRequest=webRequest.getNativeRequest(ServletRequest.class);
  WebAsyncManager asyncManager=AsyncWebUtils.getAsyncManager(servletRequest);
  if (Callable.class.isAssignableFrom(paramType)) {
    asyncManager.startCallableProcessing((Callable<Object>)returnValue,mavContainer);
  }
 else   if (DeferredResult.class.isAssignableFrom(paramType)) {
    asyncManager.startDeferredResultProcessing((DeferredResult<?>)returnValue,mavContainer);
  }
 else {
    Method method=returnType.getMethod();
    throw new UnsupportedOperationException("Unknown return value: " + paramType + " in method: "+ method);
  }
}
