{
  MockControl messageControl=MockControl.createControl(MapMessage.class);
  MapMessage message=(MapMessage)messageControl.getMock();
  messageControl.replay();
  MockControl sessionControl=MockControl.createControl(Session.class);
  final Session session=(Session)sessionControl.getMock();
  session.createMapMessage();
  sessionControl.setReturnValue(message);
  sessionControl.replay();
  final Map content=new HashMap();
  content.put(null,"value1");
  final SimpleMessageConverter converter=new SimpleMessageConverter();
  try {
    converter.toMessage(content,session);
    fail("expected MessageConversionException");
  }
 catch (  MessageConversionException ex) {
  }
  sessionControl.verify();
}
