{
  if (target == null) {
    return null;
  }
  Class<?> relevantClass=(target instanceof Class ? (Class<?>)target : target.getClass());
  if (!(name instanceof String)) {
    return null;
  }
  String propertyName=(String)name;
  if (relevantClass.isArray() && propertyName.equals("length")) {
    return new ReflectionPropertyReaderExecutorForArrayLength();
  }
  Method m=ReflectionUtils.findGetterForProperty(propertyName,relevantClass,target instanceof Class);
  if (m != null) {
    return new ReflectionPropertyReaderExecutor(propertyName,m);
  }
  Field field=ReflectionUtils.findField(propertyName,relevantClass,target instanceof Class);
  if (field != null) {
    return new ReflectionPropertyReaderExecutor(propertyName,field);
  }
  return null;
}
