{
  expect(this.request.isAsyncSupported()).andReturn(true);
  replay(this.request);
  this.asyncRequest.onComplete(new AsyncEvent(null));
  try {
    this.asyncRequest.startAsync();
    fail("expected exception");
  }
 catch (  IllegalStateException ex) {
    assertEquals("Cannot use async request that has completed",ex.getMessage());
  }
}
