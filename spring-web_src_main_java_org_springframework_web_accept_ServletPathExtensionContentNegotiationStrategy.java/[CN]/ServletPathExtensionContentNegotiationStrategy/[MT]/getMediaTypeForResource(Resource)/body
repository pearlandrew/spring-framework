{
  MediaType mediaType=super.getMediaTypeForResource(resource);
  if (mediaType == null) {
    String mimeType=this.servletContext.getMimeType(resource.getFilename());
    if (StringUtils.hasText(mimeType)) {
      mediaType=MediaType.parseMediaType(mimeType);
    }
  }
  if (MediaType.APPLICATION_OCTET_STREAM.equals(mediaType)) {
    mediaType=null;
  }
  return mediaType;
}
