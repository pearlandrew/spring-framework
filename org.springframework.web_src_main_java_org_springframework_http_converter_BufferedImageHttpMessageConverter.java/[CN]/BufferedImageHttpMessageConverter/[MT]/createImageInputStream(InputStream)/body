{
  if (cacheDir != null) {
    return new FileCacheImageInputStream(is,cacheDir);
  }
 else {
    return new MemoryCacheImageInputStream(is);
  }
}
