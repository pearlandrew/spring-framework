{
  JCacheOperation<?> operation=cacheOperationSource.getCacheOperation(method,target.getClass());
  if (!(BaseKeyCacheOperation.class.isInstance(operation))) {
    throw new IllegalStateException("Invalid operation, should be a key-based operation " + operation);
  }
  CacheKeyInvocationContext<?> invocationContext=createCacheKeyInvocationContext(target,operation,params);
  return this.target.generateCacheKey(invocationContext);
}
