{
  if (cancelled) {
    return;
  }
  ServletInputStream input=this.synchronizer.getInputStream();
  logger.debug("onDataAvailable: " + input);
  while (true) {
    logger.debug("Demand: " + this.demand);
    if (!demand.hasDemand()) {
      stalled=true;
      break;
    }
    boolean ready=input.isReady();
    logger.debug("Input ready: " + ready + " finished: "+ input.isFinished());
    if (!ready) {
      break;
    }
    int read=input.read(buffer);
    logger.debug("Input read:" + read);
    if (read == -1) {
      break;
    }
 else     if (read > 0) {
      this.demand.decrement();
      byte[] copy=Arrays.copyOf(this.buffer,read);
      this.subscriber.onNext(copy);
    }
  }
}
