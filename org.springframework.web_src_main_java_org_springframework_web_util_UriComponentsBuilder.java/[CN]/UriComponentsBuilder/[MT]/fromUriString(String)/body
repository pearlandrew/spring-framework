{
  Assert.hasLength(uri,"'uri' must not be empty");
  Matcher m=URI_PATTERN.matcher(uri);
  if (m.matches()) {
    UriComponentsBuilder builder=new UriComponentsBuilder();
    builder.scheme(m.group(2));
    builder.userInfo(m.group(5));
    builder.host(m.group(6));
    String port=m.group(8);
    if (StringUtils.hasLength(port)) {
      builder.port(Integer.parseInt(port));
    }
    builder.path(m.group(9));
    builder.query(m.group(11));
    builder.fragment(m.group(13));
    return builder;
  }
 else {
    throw new IllegalArgumentException("[" + uri + "] is not a valid URI");
  }
}
