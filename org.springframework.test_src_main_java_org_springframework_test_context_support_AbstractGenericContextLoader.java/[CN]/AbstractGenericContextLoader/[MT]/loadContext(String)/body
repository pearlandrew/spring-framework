{
  if (logger.isDebugEnabled()) {
    logger.debug(String.format("Loading ApplicationContext for locations [%s].",StringUtils.arrayToCommaDelimitedString(locations)));
  }
  GenericApplicationContext context=createGenericApplicationContext();
  prepareContext(context);
  customizeBeanFactory(context.getDefaultListableBeanFactory());
  loadBeanDefinitions(context,locations);
  AnnotationConfigUtils.registerAnnotationConfigProcessors(context);
  customizeContext(context);
  context.refresh();
  context.registerShutdownHook();
  return context;
}
