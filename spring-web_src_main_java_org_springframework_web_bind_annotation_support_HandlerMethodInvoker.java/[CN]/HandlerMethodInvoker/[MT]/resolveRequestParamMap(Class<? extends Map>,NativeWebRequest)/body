{
  Map<String,String[]> parameterMap=webRequest.getParameterMap();
  if (MultiValueMap.class.isAssignableFrom(mapType)) {
    MultiValueMap<String,String> result=new LinkedMultiValueMap<String,String>(parameterMap.size());
    for (    Map.Entry<String,String[]> entry : parameterMap.entrySet()) {
      for (      String value : entry.getValue()) {
        result.add(entry.getKey(),value);
      }
    }
    return result;
  }
 else {
    Map<String,String> result=new LinkedHashMap<String,String>(parameterMap.size());
    for (    Map.Entry<String,String[]> entry : parameterMap.entrySet()) {
      if (entry.getValue().length > 0) {
        result.put(entry.getKey(),entry.getValue()[0]);
      }
    }
    return result;
  }
}
