{
  try {
    if (connectionMethodToUse == null) {
      connectionMethodToUse=this.session.getClass().getMethod("connection");
    }
    return (Connection)ReflectionUtils.invokeMethod(connectionMethodToUse,this.session);
  }
 catch (  NoSuchMethodException ex) {
    throw new IllegalStateException("Cannot find connection() method on Hibernate Session",ex);
  }
}
