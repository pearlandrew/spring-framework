{
  String queryString="some query";
  Query query=mock(Query.class);
  List result=new ArrayList();
  Object param1=new Object();
  Object param2=new Object();
  Map<String,Object> params=new HashMap<String,Object>();
  params.put("param1",param1);
  params.put("param2",param2);
  given(manager.createQuery(queryString)).willReturn(query);
  given(query.getResultList()).willReturn(result);
  assertSame(result,template.findByNamedParams(queryString,params));
  verify(query).setParameter("param1",param1);
  verify(query).setParameter("param2",param2);
}
