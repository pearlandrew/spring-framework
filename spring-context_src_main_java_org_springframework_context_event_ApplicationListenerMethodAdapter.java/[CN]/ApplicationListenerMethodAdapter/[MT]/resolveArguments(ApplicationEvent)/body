{
  if (!ApplicationEvent.class.isAssignableFrom(this.declaredEventType.getRawClass()) && event instanceof PayloadApplicationEvent) {
    Object payload=((PayloadApplicationEvent)event).getPayload();
    if (this.declaredEventType.isAssignableFrom(ResolvableType.forClass(payload.getClass()))) {
      return new Object[]{payload};
    }
  }
 else {
    return new Object[]{event};
  }
  return null;
}
