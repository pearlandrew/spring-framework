{
  if (bean instanceof LoadTimeWeaverAware) {
    LoadTimeWeaver ltw=this.loadTimeWeaver;
    if (ltw == null) {
      Assert.state(this.beanFactory != null,"BeanFactory required if no LoadTimeWeaver explicitly specified");
      ltw=(LoadTimeWeaver)this.beanFactory.getBean(ConfigurableApplicationContext.LOAD_TIME_WEAVER_BEAN_NAME,LoadTimeWeaver.class);
    }
    ((LoadTimeWeaverAware)bean).setLoadTimeWeaver(ltw);
  }
  return bean;
}
