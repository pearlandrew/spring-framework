{
  if (this.transactionStatus != null) {
    throw new IllegalStateException("Cannot start new transaction without ending existing transaction: " + "Invoke endTransaction() before startNewTransaction()");
  }
  if (this.transactionManager == null) {
    throw new IllegalStateException("No transaction manager set");
  }
  this.transactionStatus=this.transactionManager.getTransaction(this.transactionDefinition);
  ++this.transactionsStarted;
  this.complete=!this.isRollback();
  if (this.logger.isDebugEnabled()) {
    this.logger.debug("Began transaction (" + this.transactionsStarted + "): transaction manager ["+ this.transactionManager+ "]; rollback ["+ this.isRollback()+ "].");
  }
}
