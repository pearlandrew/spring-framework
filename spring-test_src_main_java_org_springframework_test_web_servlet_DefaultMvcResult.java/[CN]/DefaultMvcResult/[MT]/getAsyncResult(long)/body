{
  if (this.asyncResult == RESULT_NONE) {
    if ((timeout != 0) && this.mockRequest.isAsyncStarted()) {
      if (timeout == -1) {
        timeout=this.mockRequest.getAsyncContext().getTimeout();
      }
      if (!awaitAsyncResult(timeout) && this.asyncResult == RESULT_NONE) {
        throw new IllegalStateException("Gave up waiting on async result from handler [" + this.handler + "] to complete");
      }
    }
  }
  return (this.asyncResult == RESULT_NONE ? null : this.asyncResult);
}
