{
  HttpServletRequest request=this.mockRequest;
  if ((timeout != 0) && request.isAsyncStarted()) {
    if (timeout == -1) {
      timeout=request.getAsyncContext().getTimeout();
    }
    if (!awaitAsyncResult(timeout)) {
      throw new IllegalStateException("Gave up waiting on async result from handler [" + this.handler + "] to complete");
    }
  }
  return this.asyncResult;
}
