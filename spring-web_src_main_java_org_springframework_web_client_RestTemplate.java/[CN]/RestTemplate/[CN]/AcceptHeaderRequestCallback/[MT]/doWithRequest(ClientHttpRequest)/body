{
  if (responseType != null) {
    Class<?> responseClass=null;
    if (responseType instanceof Class) {
      responseClass=(Class<?>)responseType;
    }
    List<MediaType> allSupportedMediaTypes=new ArrayList<MediaType>();
    for (    HttpMessageConverter<?> converter : getMessageConverters()) {
      if (responseClass != null) {
        if (converter.canRead(responseClass,null)) {
          allSupportedMediaTypes.addAll(getSupportedMediaTypes(converter));
        }
      }
 else       if (converter instanceof GenericHttpMessageConverter) {
        GenericHttpMessageConverter<?> genericConverter=(GenericHttpMessageConverter<?>)converter;
        if (genericConverter.canRead(responseType,null,null)) {
          allSupportedMediaTypes.addAll(getSupportedMediaTypes(converter));
        }
      }
    }
    if (!allSupportedMediaTypes.isEmpty()) {
      MediaType.sortBySpecificity(allSupportedMediaTypes);
      if (logger.isDebugEnabled()) {
        logger.debug("Setting request Accept header to " + allSupportedMediaTypes);
      }
      request.getHeaders().setAccept(allSupportedMediaTypes);
    }
  }
}
