{
  if (responseType != null) {
    List<MediaType> allSupportedMediaTypes=new ArrayList<MediaType>();
    for (    HttpMessageConverter<?> messageConverter : getMessageConverters()) {
      if (messageConverter.canRead(responseType,null)) {
        List<MediaType> supportedMediaTypes=messageConverter.getSupportedMediaTypes();
        for (        MediaType supportedMediaType : supportedMediaTypes) {
          if (supportedMediaType.getCharSet() != null) {
            supportedMediaType=new MediaType(supportedMediaType.getType(),supportedMediaType.getSubtype());
          }
          allSupportedMediaTypes.add(supportedMediaType);
        }
      }
    }
    if (!allSupportedMediaTypes.isEmpty()) {
      MediaType.sortBySpecificity(allSupportedMediaTypes);
      if (logger.isDebugEnabled()) {
        logger.debug("Setting request Accept header to " + allSupportedMediaTypes);
      }
      request.getHeaders().setAccept(allSupportedMediaTypes);
    }
  }
}
