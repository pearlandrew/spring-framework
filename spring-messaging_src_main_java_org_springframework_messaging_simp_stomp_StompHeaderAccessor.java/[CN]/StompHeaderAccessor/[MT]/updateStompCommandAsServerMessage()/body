{
  Assert.state(SimpMessageType.MESSAGE.equals(getMessageType()),"Unexpected message type " + getMessage());
  if ((getCommand() == null) || getCommand().equals(StompCommand.SEND)) {
    setHeader(COMMAND_HEADER,StompCommand.MESSAGE);
  }
 else   if (!getCommand().equals(StompCommand.MESSAGE)) {
    throw new IllegalStateException("Unexpected STOMP command " + getCommand());
  }
}
