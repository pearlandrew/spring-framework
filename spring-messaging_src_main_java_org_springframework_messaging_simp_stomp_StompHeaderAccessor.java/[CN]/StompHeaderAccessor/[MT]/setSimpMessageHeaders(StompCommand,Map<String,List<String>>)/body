{
  List<String> values=extHeaders.get(StompHeaderAccessor.STOMP_DESTINATION_HEADER);
  if (!CollectionUtils.isEmpty(values)) {
    super.setDestination(values.get(0));
  }
  values=extHeaders.get(StompHeaderAccessor.STOMP_CONTENT_TYPE_HEADER);
  if (!CollectionUtils.isEmpty(values)) {
    super.setContentType(MediaType.parseMediaType(values.get(0)));
  }
  if (StompCommand.SUBSCRIBE.equals(command) || StompCommand.UNSUBSCRIBE.equals(command)) {
    values=extHeaders.get(StompHeaderAccessor.STOMP_ID_HEADER);
    if (!CollectionUtils.isEmpty(values)) {
      super.setSubscriptionId(values.get(0));
    }
  }
 else   if (StompCommand.MESSAGE.equals(command)) {
    values=extHeaders.get(StompHeaderAccessor.STOMP_SUBSCRIPTION_HEADER);
    if (!CollectionUtils.isEmpty(values)) {
      super.setSubscriptionId(values.get(0));
    }
  }
 else   if (StompCommand.CONNECT.equals(command)) {
    if (!StringUtils.isEmpty(getPasscode())) {
      setHeader(CREDENTIALS_HEADER,new StompPasscode(getPasscode()));
      setPasscode("PROTECTED");
    }
  }
}
