{
  if (this.enabled) {
    Assert.state(this.dataSource != null,"DataSource must be provided");
    Assert.state(this.databasePopulator != null,"DatabasePopulator must be provided");
    try {
      Connection connection=this.dataSource.getConnection();
      try {
        this.databasePopulator.populate(connection);
      }
  finally {
        try {
          connection.close();
        }
 catch (        SQLException ex) {
        }
      }
    }
 catch (    Exception ex) {
      throw new DataAccessResourceFailureException("Failed to populate database",ex);
    }
  }
}
