{
  applicationContext=new GenericApplicationContext();
  Scope scope=new NoOpScope(){
    private int index;
    private List objects=new LinkedList();
{
      objects.add(new TestBean());
      objects.add(new TestBean());
    }
    public Object get(    String name,    ObjectFactory objectFactory){
      if (index >= objects.size()) {
        index=0;
      }
      return objects.get(index++);
    }
  }
;
  applicationContext.getBeanFactory().registerScope("myScope",scope);
  String[] scopeNames=applicationContext.getBeanFactory().getRegisteredScopeNames();
  assertEquals(1,scopeNames.length);
  assertEquals("myScope",scopeNames[0]);
  assertSame(scope,applicationContext.getBeanFactory().getRegisteredScope("myScope"));
  XmlBeanDefinitionReader xbdr=new XmlBeanDefinitionReader(applicationContext);
  xbdr.loadBeanDefinitions("org/springframework/beans/factory/config/simpleScope.xml");
  applicationContext.refresh();
}
