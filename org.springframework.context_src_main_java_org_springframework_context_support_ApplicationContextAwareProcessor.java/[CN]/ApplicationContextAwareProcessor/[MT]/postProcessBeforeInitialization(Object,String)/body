{
  AccessControlContext acc=null;
  if (System.getSecurityManager() != null && (bean instanceof ResourceLoaderAware || bean instanceof ApplicationEventPublisherAware || bean instanceof MessageSourceAware|| bean instanceof ApplicationContextAware)) {
    acc=this.applicationContext.getBeanFactory().getAccessControlContext();
  }
  if (acc != null) {
    AccessController.doPrivileged(new PrivilegedAction<Object>(){
      public Object run(){
        doProcess(bean,beanName);
        return null;
      }
    }
,acc);
  }
 else {
    doProcess(bean,beanName);
  }
  return bean;
}
