{
  MockRenderRequest request=new MockRenderRequest();
  MockRenderResponse response=new MockRenderResponse();
  request.setParameter("myParam","myPortlet");
  complexDispatcherPortlet.doDispatch(request,response);
  assertEquals("myPortlet was here",response.getContentAsString());
  ComplexPortletApplicationContext.MyPortlet myPortlet=(ComplexPortletApplicationContext.MyPortlet)complexDispatcherPortlet.getPortletApplicationContext().getBean("myPortlet");
  assertEquals("complex",myPortlet.getPortletConfig().getPortletName());
  assertEquals(getPortletContext(),myPortlet.getPortletConfig().getPortletContext());
  assertEquals(complexDispatcherPortlet.getPortletContext(),myPortlet.getPortletConfig().getPortletContext());
  complexDispatcherPortlet.destroy();
  assertNull(myPortlet.getPortletConfig());
}
