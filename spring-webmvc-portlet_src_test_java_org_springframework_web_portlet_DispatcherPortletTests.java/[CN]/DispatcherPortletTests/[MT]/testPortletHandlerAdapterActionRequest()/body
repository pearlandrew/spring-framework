{
  MockActionRequest request=new MockActionRequest();
  MockActionResponse response=new MockActionResponse();
  request.setParameter("myParam","myPortlet");
  complexDispatcherPortlet.processAction(request,response);
  assertEquals("myPortlet action called",response.getRenderParameter("result"));
  ComplexPortletApplicationContext.MyPortlet myPortlet=(ComplexPortletApplicationContext.MyPortlet)complexDispatcherPortlet.getPortletApplicationContext().getBean("myPortlet");
  assertEquals("complex",myPortlet.getPortletConfig().getPortletName());
  assertEquals(getPortletContext(),myPortlet.getPortletConfig().getPortletContext());
  assertEquals(complexDispatcherPortlet.getPortletContext(),myPortlet.getPortletConfig().getPortletContext());
  complexDispatcherPortlet.destroy();
  assertNull(myPortlet.getPortletConfig());
}
