{
  if (part instanceof Resource) {
    Resource resource=(Resource)part;
    String filename=resource.getFilename();
    if (multipartCharset != null) {
      try {
        filename=MimeUtility.encodeText(filename,multipartCharset.name(),null);
      }
 catch (      UnsupportedEncodingException e) {
        throw new IllegalStateException(e);
      }
    }
    return filename;
  }
 else {
    return null;
  }
}
