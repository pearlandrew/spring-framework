{
  if (event.getApplicationContext() != this.applicationContext) {
    return;
  }
  Map<String,JmsListenerConfigurer> instances=this.applicationContext.getBeansOfType(JmsListenerConfigurer.class);
  for (  JmsListenerConfigurer configurer : instances.values()) {
    configurer.configureJmsListeners(registrar);
  }
  this.registrar.setApplicationContext(this.applicationContext);
  if (this.registrar.getEndpointRegistry() == null) {
    if (this.endpointRegistry == null) {
      this.endpointRegistry=this.applicationContext.getBean(AnnotationConfigUtils.JMS_LISTENER_ENDPOINT_REGISTRY_BEAN_NAME,JmsListenerEndpointRegistry.class);
    }
    this.registrar.setEndpointRegistry(this.endpointRegistry);
  }
  if (this.containerFactoryBeanName != null) {
    this.registrar.setContainerFactoryBeanName(this.containerFactoryBeanName);
  }
  JmsHandlerMethodFactory handlerMethodFactory=registrar.getJmsHandlerMethodFactory();
  if (handlerMethodFactory != null) {
    this.jmsHandlerMethodFactory.setJmsHandlerMethodFactory(handlerMethodFactory);
  }
  try {
    this.registrar.afterPropertiesSet();
  }
 catch (  Exception ex) {
    throw new BeanInitializationException("Failed to initialize JmsListenerEndpointRegistrar",ex);
  }
}
