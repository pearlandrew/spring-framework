{
  Log log=createMock(Log.class);
  MethodInvocation methodInvocation=createMock(MethodInvocation.class);
  Method toString=String.class.getMethod("toString",new Class[]{});
  expect(log.isTraceEnabled()).andReturn(true);
  expect(methodInvocation.getMethod()).andReturn(toString).times(4);
  expect(methodInvocation.getThis()).andReturn(this).times(2);
  log.trace(isA(String.class));
  IllegalArgumentException exception=new IllegalArgumentException();
  expect(methodInvocation.proceed()).andThrow(exception);
  log.trace(isA(String.class),eq(exception));
  replay(log);
  replay(methodInvocation);
  CustomizableTraceInterceptor interceptor=new StubCustomizableTraceInterceptor(log);
  try {
    interceptor.invoke(methodInvocation);
    fail("Must have propagated the IllegalArgumentException.");
  }
 catch (  IllegalArgumentException expected) {
  }
  verify(log);
  verify(methodInvocation);
}
