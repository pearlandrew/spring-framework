{
  this.reactor=reactor;
  this.taskExecutor=executor;
  this.reactor.on(Fn.$(StompCommand.CONNECT),new ConnectConsumer());
  this.reactor.on(Fn.$(StompCommand.SUBSCRIBE),new RelayConsumer());
  this.reactor.on(Fn.$(StompCommand.SEND),new RelayConsumer());
  this.reactor.on(Fn.$(StompCommand.DISCONNECT),new RelayConsumer());
  this.reactor.on(Fn.$(StompCommand.ACK),new RelayConsumer());
  this.reactor.on(Fn.$(StompCommand.NACK),new RelayConsumer());
  this.reactor.on(Fn.$(StompCommand.BEGIN),new RelayConsumer());
  this.reactor.on(Fn.$(StompCommand.COMMIT),new RelayConsumer());
  this.reactor.on(Fn.$(StompCommand.ABORT),new RelayConsumer());
  this.reactor.on(Fn.$("CONNECTION_CLOSED"),new Consumer<Event<String>>(){
    @Override public void accept(    Event<String> event){
      if (logger.isDebugEnabled()) {
        logger.debug("CONNECTION_CLOSED, STOMP session=" + event.getData() + ". Clearing relay session");
      }
      clearRelaySession(event.getData());
    }
  }
);
}
