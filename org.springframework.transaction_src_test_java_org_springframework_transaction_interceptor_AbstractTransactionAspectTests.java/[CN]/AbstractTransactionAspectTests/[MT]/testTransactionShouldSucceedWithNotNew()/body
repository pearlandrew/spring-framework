{
  TransactionAttribute txatt=new DefaultTransactionAttribute();
  MapTransactionAttributeSource tas=new MapTransactionAttributeSource();
  tas.register(getNameMethod,txatt);
  MockControl statusControl=MockControl.createControl(TransactionStatus.class);
  TransactionStatus status=(TransactionStatus)statusControl.getMock();
  MockControl ptmControl=MockControl.createControl(PlatformTransactionManager.class);
  PlatformTransactionManager ptm=(PlatformTransactionManager)ptmControl.getMock();
  ptm.getTransaction(txatt);
  ptmControl.setReturnValue(status,1);
  ptm.commit(status);
  ptmControl.setVoidCallable(1);
  ptmControl.replay();
  TestBean tb=new TestBean();
  ITestBean itb=(ITestBean)advised(tb,ptm,tas);
  checkTransactionStatus(false);
  itb.getName();
  checkTransactionStatus(false);
  ptmControl.verify();
}
