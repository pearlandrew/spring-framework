{
  MockHttpServletRequest request=new MockHttpServletRequest("GET","/test");
  request.addHeader("Accept","text/html,application/xml;q=0.9,application/xhtml+xml,*/*;q=0.8");
  List<MediaType> result=viewResolver.getMediaTypes(request);
  assertEquals("Invalid amount of media types",4,result.size());
  assertEquals("Invalid content type",new MediaType("text","html"),result.get(0));
  assertEquals("Invalid content type",new MediaType("application","xhtml+xml"),result.get(1));
  assertEquals("Invalid content type",new MediaType("application","xml",Collections.singletonMap("q","0.9")),result.get(2));
  assertEquals("Invalid content type",new MediaType("*","*",Collections.singletonMap("q","0.8")),result.get(3));
}
