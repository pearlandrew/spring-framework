{
  viewResolver.setFavorParameter(true);
  viewResolver.setMediaTypes(Collections.singletonMap("html","application/xhtml+xml"));
  MockHttpServletRequest request=new MockHttpServletRequest("GET","/test");
  request.addParameter("format","html");
  List<MediaType> result=viewResolver.getMediaTypes(request);
  assertEquals("Invalid content type",Collections.singletonList(new MediaType("application","xhtml+xml")),result);
}
