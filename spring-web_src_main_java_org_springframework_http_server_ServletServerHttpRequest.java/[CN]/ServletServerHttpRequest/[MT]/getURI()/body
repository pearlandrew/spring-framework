{
  try {
    StringBuffer url=this.servletRequest.getRequestURL();
    String queryStr=this.servletRequest.getQueryString();
    if (StringUtils.hasText(queryStr)) {
      url.append('?').append(queryStr);
    }
    return new URI(url.toString());
  }
 catch (  URISyntaxException ex) {
    throw new IllegalStateException("Could not get HttpServletRequest URI: " + ex.getMessage(),ex);
  }
}
