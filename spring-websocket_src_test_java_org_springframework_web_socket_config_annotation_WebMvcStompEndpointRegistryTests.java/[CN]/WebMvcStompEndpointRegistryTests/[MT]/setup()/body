{
  SubscribableChannel inChannel=Mockito.mock(SubscribableChannel.class);
  SubscribableChannel outChannel=Mockito.mock(SubscribableChannel.class);
  this.webSocketHandler=new SubProtocolWebSocketHandler(inChannel,outChannel);
  this.userSessionRegistry=new DefaultUserSessionRegistry();
  this.messageBrokerRegistry=new MessageBrokerRegistry(inChannel,outChannel);
  TaskScheduler taskScheduler=Mockito.mock(TaskScheduler.class);
  this.registry=new WebMvcStompEndpointRegistry(webSocketHandler,transportRegistration,userSessionRegistry,taskScheduler,messageBrokerRegistry);
}
