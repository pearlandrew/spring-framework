{
  Assert.notNull(request,"Request must not be null");
  if (this.resolveLazily) {
    return new DefaultMultipartHttpServletRequest(request){
      protected void initializeMultipart(){
        MultipartParsingResult parsingResult=parseRequest(request);
        setMultipartFiles(parsingResult.getMultipartFiles());
        setMultipartParameters(parsingResult.getMultipartParameters());
      }
    }
;
  }
 else {
    MultipartParsingResult parsingResult=parseRequest(request);
    return new DefaultMultipartHttpServletRequest(request,parsingResult.getMultipartFiles(),parsingResult.getMultipartParameters());
  }
}
