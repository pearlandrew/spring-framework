{
  List<HandlerMethodReturnValueHandler> handlers=new ArrayList<HandlerMethodReturnValueHandler>();
  ListenableFutureReturnValueHandler lfh=new ListenableFutureReturnValueHandler();
  handlers.add(lfh);
  if (completableFuturePresent) {
    CompletableFutureReturnValueHandler cfh=new CompletableFutureReturnValueHandler();
    handlers.add(cfh);
  }
  SendToMethodReturnValueHandler sth=new SendToMethodReturnValueHandler(this.brokerTemplate,true);
  sth.setHeaderInitializer(this.headerInitializer);
  handlers.add(sth);
  SubscriptionMethodReturnValueHandler sh=new SubscriptionMethodReturnValueHandler(this.clientMessagingTemplate);
  sh.setHeaderInitializer(this.headerInitializer);
  handlers.add(sh);
  handlers.addAll(getCustomReturnValueHandlers());
  sth=new SendToMethodReturnValueHandler(this.brokerTemplate,false);
  sth.setHeaderInitializer(this.headerInitializer);
  handlers.add(sth);
  return handlers;
}
