{
  List<HandlerMethodReturnValueHandler> handlers=new ArrayList<HandlerMethodReturnValueHandler>();
  handlers.add(new ListenableFutureReturnValueHandler());
  if (completableFuturePresent) {
    handlers.add(new CompletableFutureReturnValueHandler());
  }
  SendToMethodReturnValueHandler sth=new SendToMethodReturnValueHandler(this.brokerTemplate,true);
  sth.setHeaderInitializer(this.headerInitializer);
  handlers.add(sth);
  SubscriptionMethodReturnValueHandler sh=new SubscriptionMethodReturnValueHandler(this.clientMessagingTemplate);
  sh.setHeaderInitializer(this.headerInitializer);
  handlers.add(sh);
  handlers.addAll(getCustomReturnValueHandlers());
  sth=new SendToMethodReturnValueHandler(this.brokerTemplate,false);
  sth.setHeaderInitializer(this.headerInitializer);
  handlers.add(sth);
  return handlers;
}
