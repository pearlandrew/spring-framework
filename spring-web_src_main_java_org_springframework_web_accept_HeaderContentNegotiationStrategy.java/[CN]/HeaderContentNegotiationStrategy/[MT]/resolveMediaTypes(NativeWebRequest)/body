{
  String header=request.getHeader(HttpHeaders.ACCEPT);
  if (!StringUtils.hasText(header)) {
    return Collections.emptyList();
  }
  try {
    List<MediaType> mediaTypes=MediaType.parseMediaTypes(header);
    MediaType.sortBySpecificityAndQuality(mediaTypes);
    return mediaTypes;
  }
 catch (  InvalidMediaTypeException ex) {
    throw new HttpMediaTypeNotAcceptableException("Could not parse 'Accept' header [" + header + "]: "+ ex.getMessage());
  }
}
