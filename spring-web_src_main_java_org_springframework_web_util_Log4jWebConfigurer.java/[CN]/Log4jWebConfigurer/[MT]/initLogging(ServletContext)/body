{
  if (exposeWebAppRoot(servletContext)) {
    WebUtils.setWebAppRootSystemProperty(servletContext);
  }
  String location=servletContext.getInitParameter(CONFIG_LOCATION_PARAM);
  if (location != null) {
    try {
      location=SystemPropertyUtils.resolvePlaceholders(location);
      if (!ResourceUtils.isUrl(location)) {
        location=WebUtils.getRealPath(servletContext,location);
      }
      servletContext.log("Initializing log4j from [" + location + "]");
      String intervalString=servletContext.getInitParameter(REFRESH_INTERVAL_PARAM);
      if (intervalString != null) {
        try {
          long refreshInterval=Long.parseLong(intervalString);
          Log4jConfigurer.initLogging(location,refreshInterval);
        }
 catch (        NumberFormatException ex) {
          throw new IllegalArgumentException("Invalid 'log4jRefreshInterval' parameter: " + ex.getMessage());
        }
      }
 else {
        Log4jConfigurer.initLogging(location);
      }
    }
 catch (    FileNotFoundException ex) {
      throw new IllegalArgumentException("Invalid 'log4jConfigLocation' parameter: " + ex.getMessage());
    }
  }
}
