{
  final String sessionId=PubSubHeaders.fromMessageHeaders(message.getHeaders()).getSessionId();
  return new MessageChannel<Message<?>>(){
    @Override public boolean send(    Message<?> message){
      return send(message,-1);
    }
    @SuppressWarnings("unchecked") @Override public boolean send(    Message<?> message,    long timeout){
      PubSubHeaders headers=PubSubHeaders.fromMessageHeaders(message.getHeaders());
      headers.setSessionId(sessionId);
      publishChannel.send(messageFactory.createMessage(message.getPayload(),headers.toMessageHeaders()));
      return true;
    }
  }
;
}
