{
  GenericWebApplicationContext context=new GenericWebApplicationContext();
  ClassPathBeanDefinitionScanner scanner=new ClassPathBeanDefinitionScanner(context);
  scanner.setIncludeAnnotationConfig(false);
  scanner.setBeanNameGenerator(new BeanNameGenerator(){
    @Override public String generateBeanName(    BeanDefinition definition,    BeanDefinitionRegistry registry){
      return definition.getScope();
    }
  }
);
  scanner.setScopedProxyMode(scopedProxyMode);
  scanner.scan(getClass().getPackage().getName());
  scanner.scan(getClass().getPackage().getName());
  context.refresh();
  return context;
}
