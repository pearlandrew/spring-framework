{
  try {
    Object stub=lookup();
    if (getServiceInterface() != null && !(stub instanceof RmiInvocationHandler)) {
      try {
        stub=PortableRemoteObject.narrow(stub,getServiceInterface());
      }
 catch (      ClassCastException ex) {
        throw new RemoteLookupFailureException("Could not narrow RMI stub to service interface [" + getServiceInterface().getName() + "]",ex);
      }
    }
    return stub;
  }
 catch (  NamingException ex) {
    throw new RemoteLookupFailureException("JNDI lookup for RMI service [" + getJndiName() + "] failed",ex);
  }
}
