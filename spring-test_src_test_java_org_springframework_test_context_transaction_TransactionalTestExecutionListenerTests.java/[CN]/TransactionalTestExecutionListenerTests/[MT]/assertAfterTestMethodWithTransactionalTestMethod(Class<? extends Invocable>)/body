{
  BDDMockito.<Class<?>>given(testContext.getTestClass()).willReturn(clazz);
  Invocable instance=clazz.newInstance();
  given(testContext.getTestInstance()).willReturn(instance);
  given(testContext.getTestMethod()).willReturn(clazz.getDeclaredMethod("transactionalTest"));
  given(tm.getTransaction(BDDMockito.any(TransactionDefinition.class))).willReturn(new SimpleTransactionStatus());
  assertFalse(instance.invoked);
  TransactionContextHolder.removeCurrentTransactionContext();
  listener.beforeTestMethod(testContext);
  listener.afterTestMethod(testContext);
  assertTrue(instance.invoked);
}
