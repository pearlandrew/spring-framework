{
  List<Resource> resourcePaths=new ArrayList<Resource>();
  resourcePaths.add(new ClassPathResource("test/",getClass()));
  handler=new ResourceHttpRequestHandler(resourcePaths,"text/plain");
  handler.setServletContext(new TestServletContext());
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.setAttribute(HandlerMapping.PATH_WITHIN_HANDLER_MAPPING_ATTRIBUTE,"/foo.txt");
  request.setMethod("GET");
  MockHttpServletResponse response=new MockHttpServletResponse();
  handler.handleRequest(request,response);
  assertEquals("text/plain",response.getContentType());
  assertTrue(((Long)response.getHeader("Expires")) > System.currentTimeMillis() + (31556926 * 1000) - 10000);
  assertEquals("max-age=31556926",response.getHeader("Cache-Control"));
  assertTrue(response.containsHeader("Last-Modified"));
  assertEquals(response.getHeader("Last-Modified"),new ClassPathResource("test/foo.txt",getClass()).getFile().lastModified());
}
