{
  logger.debug("Starting test disconnectClosesRelaySessionCleanly()");
  MessageExchange connect=MessageExchangeBuilder.connect("sess1").build();
  this.relay.handleMessage(connect.message);
  this.responseHandler.expectMessages(connect);
  StompHeaderAccessor headers=StompHeaderAccessor.create(StompCommand.DISCONNECT);
  headers.setSessionId("sess1");
  this.relay.handleMessage(MessageBuilder.createMessage(new byte[0],headers.getMessageHeaders()));
  Thread.sleep(2000);
  assertTrue("Unexpected messages: " + this.responseHandler.queue,this.responseHandler.queue.isEmpty());
}
