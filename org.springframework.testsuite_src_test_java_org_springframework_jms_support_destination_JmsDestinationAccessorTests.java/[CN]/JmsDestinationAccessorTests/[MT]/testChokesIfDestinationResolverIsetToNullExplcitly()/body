{
  MockControl mockConnectionFactory=MockControl.createControl(ConnectionFactory.class);
  final ConnectionFactory connectionFactory=(ConnectionFactory)mockConnectionFactory.getMock();
  mockConnectionFactory.replay();
  new AssertThrows(IllegalArgumentException.class){
    public void test() throws Exception {
      JmsDestinationAccessor accessor=new StubJmsDestinationAccessor();
      accessor.setConnectionFactory(connectionFactory);
      accessor.setDestinationResolver(null);
      accessor.afterPropertiesSet();
    }
  }
.runTest();
  mockConnectionFactory.verify();
}
