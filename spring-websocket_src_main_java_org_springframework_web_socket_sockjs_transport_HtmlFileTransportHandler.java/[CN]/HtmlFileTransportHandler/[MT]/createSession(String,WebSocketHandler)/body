{
  Assert.notNull(getSockJsConfig(),"This transport requires SockJsConfiguration");
  return new StreamingSockJsSession(sessionId,getSockJsConfig(),handler){
    @Override protected void writePrelude() throws IOException {
      String callback=getRequest().getQueryParams().getFirst("c");
      String html=String.format(PARTIAL_HTML_CONTENT,callback);
      getResponse().getBody().write(html.getBytes("UTF-8"));
      getResponse().flush();
    }
  }
;
}
