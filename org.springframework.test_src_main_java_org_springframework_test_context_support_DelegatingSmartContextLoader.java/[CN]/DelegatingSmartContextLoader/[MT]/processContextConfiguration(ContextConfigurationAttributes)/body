{
  final boolean originallyHadResources=configAttributes.hasResources();
  if (originallyHadResources) {
    for (    SmartContextLoader loader : candidates) {
      if (logger.isDebugEnabled()) {
        logger.debug(String.format("Delegating to %s to process context configuration [%s].",loader.getClass().getName(),configAttributes));
      }
      loader.processContextConfiguration(configAttributes);
    }
  }
 else   if (generatesDefaults()) {
    for (    SmartContextLoader loader : candidates) {
      boolean defaultResourcesAlreadyGenerated=configAttributes.hasResources();
      if (!defaultResourcesAlreadyGenerated && loader.generatesDefaults()) {
        if (logger.isDebugEnabled()) {
          logger.debug(String.format("Delegating to %s to detect defaults for context configuration [%s].",loader.getClass().getName(),configAttributes));
        }
        loader.processContextConfiguration(configAttributes);
        if (configAttributes.hasResources()) {
          if (logger.isInfoEnabled()) {
            logger.info(String.format("SmartContextLoader candidate %s " + "detected defaults for context configuration [%s].",loader,configAttributes));
          }
        }
      }
    }
    if (!configAttributes.hasResources()) {
      throw new IllegalStateException(String.format("None of the SmartContextLoader candidates %s " + "was able to detect defaults for context configuration [%s].",candidates,configAttributes));
    }
  }
}
