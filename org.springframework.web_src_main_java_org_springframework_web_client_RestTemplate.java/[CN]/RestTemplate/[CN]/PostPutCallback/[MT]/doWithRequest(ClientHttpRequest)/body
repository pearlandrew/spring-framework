{
  super.doWithRequest(httpRequest);
  if (requestBody != null) {
    Class requestType=requestBody.getClass();
    for (    HttpMessageConverter messageConverter : getMessageConverters()) {
      if (messageConverter.canWrite(requestType,requestContentType)) {
        messageConverter.write(requestBody,requestContentType,httpRequest);
        return;
      }
    }
    String message="Could not write request: no suitable HttpMessageConverter found for request type [" + requestType.getName() + "]";
    if (requestContentType != null) {
      message+=" and content type [" + requestContentType + "]";
    }
    throw new RestClientException(message);
  }
 else {
    httpRequest.getHeaders().setContentLength(0L);
  }
}
