{
synchronized (this.lifecycleMonitor) {
    if (isRunning()) {
      if (logger.isInfoEnabled()) {
        logger.info("Stopping " + this.getClass().getSimpleName());
      }
      try {
        stopInternal();
      }
 catch (      Throwable e) {
        logger.error("Failed to stop WebSocket connection",e);
      }
 finally {
        this.running=false;
      }
    }
  }
}
