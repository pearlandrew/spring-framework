{
  Query query=mock(Query.class);
  Iterator it=Collections.EMPTY_LIST.iterator();
  given(session.createQuery("some query string")).willReturn(query);
  given(query.setParameter(0,"myvalue1")).willReturn(query);
  given(query.setParameter(1,2)).willReturn(query);
  given(query.iterate()).willReturn(it);
  Iterator result=hibernateTemplate.iterate("some query string","myvalue1",2);
  assertTrue("Correct list",result == it);
  verify(query).setParameter(0,"myvalue1");
  verify(query).setParameter(1,2);
}
