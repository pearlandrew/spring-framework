{
  Query query=mock(Query.class);
  List list=new ArrayList();
  given(session.getNamedQuery("some query name")).willReturn(query);
  given(query.setCacheable(true)).willReturn(query);
  given(query.setCacheRegion("myCacheRegion")).willReturn(query);
  given(query.list()).willReturn(list);
  hibernateTemplate.setCacheQueries(true);
  hibernateTemplate.setQueryCacheRegion("myCacheRegion");
  List result=hibernateTemplate.findByNamedQuery("some query name");
  assertTrue("Correct list",result == list);
  verify(query).setCacheable(true);
  verify(query).setCacheRegion("myCacheRegion");
}
