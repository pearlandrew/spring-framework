{
  if (InputStreamResource.class == resource.getClass()) {
    return null;
  }
  long contentLength=resource.contentLength();
  if (contentLength > Integer.MAX_VALUE) {
    throw new IOException("Resource content too long (beyond Integer.MAX_VALUE): " + resource);
  }
  return (contentLength < 0 ? null : contentLength);
}
