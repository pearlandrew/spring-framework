{
  if (allowPublicMethodsOnly() && !Modifier.isPublic(method.getModifiers())) {
    return null;
  }
  Method specificMethod=ClassUtils.getMostSpecificMethod(method,targetClass);
  specificMethod=BridgeMethodResolver.findBridgedMethod(specificMethod);
  CacheDefinition opDef=findCacheOperation(specificMethod);
  if (opDef != null) {
    return opDef;
  }
  opDef=findCacheDefinition(specificMethod.getDeclaringClass());
  if (opDef != null) {
    return opDef;
  }
  if (specificMethod != method) {
    opDef=findCacheOperation(method);
    if (opDef != null) {
      return opDef;
    }
    return findCacheDefinition(method.getDeclaringClass());
  }
  return null;
}
