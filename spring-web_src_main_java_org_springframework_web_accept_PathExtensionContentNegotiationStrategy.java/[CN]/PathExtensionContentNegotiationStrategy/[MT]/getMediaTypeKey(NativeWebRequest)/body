{
  HttpServletRequest servletRequest=webRequest.getNativeRequest(HttpServletRequest.class);
  if (servletRequest == null) {
    logger.warn("An HttpServletRequest is required to determine the media type key");
    return null;
  }
  String path=urlPathHelper.getLookupPathForRequest(servletRequest);
  String filename=WebUtils.extractFullFilenameFromUrlPath(path);
  String extension=StringUtils.getFilenameExtension(filename);
  return (StringUtils.hasText(extension)) ? extension.toLowerCase(Locale.ENGLISH) : null;
}
