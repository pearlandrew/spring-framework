{
  HttpServletRequest request=webRequest.getNativeRequest(HttpServletRequest.class);
  if (request == null) {
    logger.warn("An HttpServletRequest is required to determine the media type key");
    return null;
  }
  String path=PATH_HELPER.getLookupPathForRequest(request);
  String filename=WebUtils.extractFullFilenameFromUrlPath(path);
  String extension=StringUtils.getFilenameExtension(filename);
  return (StringUtils.hasText(extension)) ? extension.toLowerCase(Locale.ENGLISH) : null;
}
