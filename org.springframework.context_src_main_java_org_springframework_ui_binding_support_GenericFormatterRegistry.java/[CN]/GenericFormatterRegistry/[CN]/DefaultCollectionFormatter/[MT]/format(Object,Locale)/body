{
  if (object == null) {
    return "";
  }
 else {
    StringBuffer buffer=new StringBuffer();
    if (object.getClass().isArray()) {
      int length=Array.getLength(object);
      for (int i=0; i < length; i++) {
        buffer.append(elementFormatter.format(Array.get(object,i),locale));
        if (i < length - 1) {
          buffer.append(",");
        }
      }
    }
 else     if (Collection.class.isAssignableFrom(object.getClass())) {
      Collection c=(Collection)object;
      for (Iterator it=c.iterator(); it.hasNext(); ) {
        buffer.append(elementFormatter.format(it.next(),locale));
        if (it.hasNext()) {
          buffer.append(",");
        }
      }
    }
    return buffer.toString();
  }
}
