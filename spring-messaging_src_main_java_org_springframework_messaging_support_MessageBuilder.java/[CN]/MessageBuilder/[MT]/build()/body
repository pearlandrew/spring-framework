{
  if (this.originalMessage != null && !this.headerAccessor.isModified()) {
    return this.originalMessage;
  }
  if (this.payload instanceof Throwable) {
    return (Message<T>)new ErrorMessage((Throwable)this.payload,this.headerAccessor.toMap());
  }
 else {
    return new GenericMessage<T>(this.payload,this.headerAccessor.toMap());
  }
}
