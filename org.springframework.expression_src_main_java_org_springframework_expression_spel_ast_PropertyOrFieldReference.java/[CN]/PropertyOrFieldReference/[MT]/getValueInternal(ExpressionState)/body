{
  TypedValue result=readProperty(state,this.name);
  TypeDescriptor resultDescriptor=result.getTypeDescriptor();
  if (result.getValue() == null && state.configuredToCreateCollectionOrMap() && nextChildIs(Indexer.class,PropertyOrFieldReference.class)) {
    if ((resultDescriptor.getType().equals(List.class) || resultDescriptor.getType().equals(Map.class))) {
      if (resultDescriptor.getType().equals(List.class)) {
        try {
          if (isWritable(state)) {
            List newList=ArrayList.class.newInstance();
            writeProperty(state,name,newList);
            result=readProperty(state,this.name);
          }
        }
 catch (        InstantiationException e) {
          throw new SpelEvaluationException(getStartPosition(),e,SpelMessage.UNABLE_TO_CREATE_LIST_FOR_INDEXING);
        }
catch (        IllegalAccessException e) {
          throw new SpelEvaluationException(getStartPosition(),e,SpelMessage.UNABLE_TO_CREATE_LIST_FOR_INDEXING);
        }
      }
 else {
        try {
          if (isWritable(state)) {
            Map newMap=HashMap.class.newInstance();
            writeProperty(state,name,newMap);
            result=readProperty(state,this.name);
          }
        }
 catch (        InstantiationException e) {
          throw new SpelEvaluationException(getStartPosition(),e,SpelMessage.UNABLE_TO_CREATE_MAP_FOR_INDEXING);
        }
catch (        IllegalAccessException e) {
          throw new SpelEvaluationException(getStartPosition(),e,SpelMessage.UNABLE_TO_CREATE_MAP_FOR_INDEXING);
        }
      }
    }
 else {
      try {
        if (isWritable(state)) {
          Object newObject=result.getTypeDescriptor().getType().newInstance();
          writeProperty(state,name,newObject);
          result=readProperty(state,this.name);
        }
      }
 catch (      InstantiationException e) {
        throw new SpelEvaluationException(getStartPosition(),e,SpelMessage.UNABLE_TO_DYNAMICALLY_CREATE_OBJECT,result.getTypeDescriptor().getType());
      }
catch (      IllegalAccessException e) {
        throw new SpelEvaluationException(getStartPosition(),e,SpelMessage.UNABLE_TO_DYNAMICALLY_CREATE_OBJECT,result.getTypeDescriptor().getType());
      }
    }
  }
  return result;
}
