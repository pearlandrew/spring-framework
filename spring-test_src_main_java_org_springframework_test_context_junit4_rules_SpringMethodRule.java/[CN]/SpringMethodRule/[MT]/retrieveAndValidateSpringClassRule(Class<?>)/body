{
  Field springClassRuleField=null;
  for (  Field field : testClass.getFields()) {
    if (ReflectionUtils.isPublicStaticFinal(field) && (SpringClassRule.class.isAssignableFrom(field.getType()))) {
      springClassRuleField=field;
      break;
    }
  }
  if (springClassRuleField == null) {
    throw new IllegalStateException(String.format("Failed to find 'public static final SpringClassRule' field in test class [%s]. " + "Consult the Javadoc for SpringClassRule for details.",testClass.getName()));
  }
  if (!springClassRuleField.isAnnotationPresent(ClassRule.class)) {
    throw new IllegalStateException(String.format("SpringClassRule field [%s] must be annotated with JUnit's @ClassRule annotation. " + "Consult the Javadoc for SpringClassRule for details.",springClassRuleField));
  }
  return (SpringClassRule)ReflectionUtils.getField(springClassRuleField,null);
}
