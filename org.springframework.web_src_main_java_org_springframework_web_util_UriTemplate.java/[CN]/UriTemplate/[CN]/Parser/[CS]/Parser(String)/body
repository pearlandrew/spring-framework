{
  Assert.hasText(uriTemplate,"'uriTemplate' must not be null");
  Matcher m=NAMES_PATTERN.matcher(uriTemplate);
  int end=0;
  while (m.find()) {
    this.patternBuilder.append(quote(uriTemplate,end,m.start()));
    this.patternBuilder.append(VALUE_REGEX);
    this.variableNames.add(m.group(1));
    end=m.end();
  }
  this.patternBuilder.append(quote(uriTemplate,end,uriTemplate.length()));
  int lastIdx=this.patternBuilder.length() - 1;
  if (lastIdx >= 0 && this.patternBuilder.charAt(lastIdx) == '/') {
    this.patternBuilder.deleteCharAt(lastIdx);
  }
}
