{
  Assert.hasText(uriTemplate,"'uriTemplate' must not be null");
  Matcher m=NAMES_PATTERN.matcher(uriTemplate);
  int end=0;
  while (m.find()) {
    patternBuilder.append(encodeAndQuote(uriTemplate,end,m.start()));
    patternBuilder.append(VALUE_REGEX);
    variableNames.add(m.group(1));
    end=m.end();
  }
  patternBuilder.append(encodeAndQuote(uriTemplate,end,uriTemplate.length()));
  int lastIdx=patternBuilder.length() - 1;
  if (lastIdx >= 0 && patternBuilder.charAt(lastIdx) == '/') {
    patternBuilder.deleteCharAt(lastIdx);
  }
}
