{
  BeanDefinitionRegistry configBeanDefs=getConfigurationBeanDefinitions(true);
  if (configBeanDefs.getBeanDefinitionCount() == 0)   return;
  assertCglibIsPresent(configBeanDefs);
  ConfigurationClassEnhancer enhancer=new ConfigurationClassEnhancer(beanFactory);
  for (  String beanName : configBeanDefs.getBeanDefinitionNames()) {
    BeanDefinition beanDef=beanFactory.getBeanDefinition(beanName);
    String configClassName=beanDef.getBeanClassName();
    String enhancedClassName=enhancer.enhance(configClassName);
    if (logger.isDebugEnabled())     logger.debug(format("Replacing bean definition '%s' existing class name '%s' " + "with enhanced class name '%s'",beanName,configClassName,enhancedClassName));
    beanDef.setBeanClassName(enhancedClassName);
  }
}
