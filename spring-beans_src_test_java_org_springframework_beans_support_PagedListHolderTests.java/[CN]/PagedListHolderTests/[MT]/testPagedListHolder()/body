{
  Assume.group(TestGroup.LONG_RUNNING);
  TestBean tb1=new TestBean();
  tb1.setName("eva");
  tb1.setAge(25);
  TestBean tb2=new TestBean();
  tb2.setName("juergen");
  tb2.setAge(99);
  TestBean tb3=new TestBean();
  tb3.setName("Rod");
  tb3.setAge(32);
  List tbs=new ArrayList();
  tbs.add(tb1);
  tbs.add(tb2);
  tbs.add(tb3);
  PagedListHolder holder=new PagedListHolder(tbs);
  assertTrue("Correct source",holder.getSource() == tbs);
  assertTrue("Correct number of elements",holder.getNrOfElements() == 3);
  assertTrue("Correct number of pages",holder.getPageCount() == 1);
  assertTrue("Correct page size",holder.getPageSize() == PagedListHolder.DEFAULT_PAGE_SIZE);
  assertTrue("Correct page number",holder.getPage() == 0);
  assertTrue("First page",holder.isFirstPage());
  assertTrue("Last page",holder.isLastPage());
  assertTrue("Correct first element",holder.getFirstElementOnPage() == 0);
  assertTrue("Correct first element",holder.getLastElementOnPage() == 2);
  assertTrue("Correct page list size",holder.getPageList().size() == 3);
  assertTrue("Correct page list contents",holder.getPageList().get(0) == tb1);
  assertTrue("Correct page list contents",holder.getPageList().get(1) == tb2);
  assertTrue("Correct page list contents",holder.getPageList().get(2) == tb3);
  holder.setPageSize(2);
  assertTrue("Correct number of pages",holder.getPageCount() == 2);
  assertTrue("Correct page size",holder.getPageSize() == 2);
  assertTrue("Correct page number",holder.getPage() == 0);
  assertTrue("First page",holder.isFirstPage());
  assertFalse("Last page",holder.isLastPage());
  assertTrue("Correct first element",holder.getFirstElementOnPage() == 0);
  assertTrue("Correct last element",holder.getLastElementOnPage() == 1);
  assertTrue("Correct page list size",holder.getPageList().size() == 2);
  assertTrue("Correct page list contents",holder.getPageList().get(0) == tb1);
  assertTrue("Correct page list contents",holder.getPageList().get(1) == tb2);
  holder.setPage(1);
  assertTrue("Correct page number",holder.getPage() == 1);
  assertFalse("First page",holder.isFirstPage());
  assertTrue("Last page",holder.isLastPage());
  assertTrue("Correct first element",holder.getFirstElementOnPage() == 2);
  assertTrue("Correct last element",holder.getLastElementOnPage() == 2);
  assertTrue("Correct page list size",holder.getPageList().size() == 1);
  assertTrue("Correct page list contents",holder.getPageList().get(0) == tb3);
  holder.setPageSize(3);
  assertTrue("Correct number of pages",holder.getPageCount() == 1);
  assertTrue("Correct page size",holder.getPageSize() == 3);
  assertTrue("Correct page number",holder.getPage() == 0);
  assertTrue("First page",holder.isFirstPage());
  assertTrue("Last page",holder.isLastPage());
  assertTrue("Correct first element",holder.getFirstElementOnPage() == 0);
  assertTrue("Correct last element",holder.getLastElementOnPage() == 2);
  holder.setPage(1);
  holder.setPageSize(2);
  assertTrue("Correct number of pages",holder.getPageCount() == 2);
  assertTrue("Correct page size",holder.getPageSize() == 2);
  assertTrue("Correct page number",holder.getPage() == 1);
  assertFalse("First page",holder.isFirstPage());
  assertTrue("Last page",holder.isLastPage());
  assertTrue("Correct first element",holder.getFirstElementOnPage() == 2);
  assertTrue("Correct last element",holder.getLastElementOnPage() == 2);
  holder.setPageSize(2);
  holder.setPage(1);
  ((MutableSortDefinition)holder.getSort()).setProperty("name");
  ((MutableSortDefinition)holder.getSort()).setIgnoreCase(false);
  holder.resort();
  assertTrue("Correct source",holder.getSource() == tbs);
  assertTrue("Correct number of elements",holder.getNrOfElements() == 3);
  assertTrue("Correct number of pages",holder.getPageCount() == 2);
  assertTrue("Correct page size",holder.getPageSize() == 2);
  assertTrue("Correct page number",holder.getPage() == 0);
  assertTrue("First page",holder.isFirstPage());
  assertFalse("Last page",holder.isLastPage());
  assertTrue("Correct first element",holder.getFirstElementOnPage() == 0);
  assertTrue("Correct last element",holder.getLastElementOnPage() == 1);
  assertTrue("Correct page list size",holder.getPageList().size() == 2);
  assertTrue("Correct page list contents",holder.getPageList().get(0) == tb3);
  assertTrue("Correct page list contents",holder.getPageList().get(1) == tb1);
  ((MutableSortDefinition)holder.getSort()).setProperty("name");
  holder.resort();
  assertTrue("Correct page list contents",holder.getPageList().get(0) == tb2);
  assertTrue("Correct page list contents",holder.getPageList().get(1) == tb1);
  ((MutableSortDefinition)holder.getSort()).setProperty("name");
  holder.resort();
  assertTrue("Correct page list contents",holder.getPageList().get(0) == tb3);
  assertTrue("Correct page list contents",holder.getPageList().get(1) == tb1);
  holder.setPage(1);
  assertTrue("Correct page list size",holder.getPageList().size() == 1);
  assertTrue("Correct page list contents",holder.getPageList().get(0) == tb2);
  ((MutableSortDefinition)holder.getSort()).setProperty("age");
  holder.resort();
  assertTrue("Correct page list contents",holder.getPageList().get(0) == tb1);
  assertTrue("Correct page list contents",holder.getPageList().get(1) == tb3);
  ((MutableSortDefinition)holder.getSort()).setIgnoreCase(true);
  holder.resort();
  assertTrue("Correct page list contents",holder.getPageList().get(0) == tb1);
  assertTrue("Correct page list contents",holder.getPageList().get(1) == tb3);
  holder.nextPage();
  assertEquals(1,holder.getPage());
  holder.previousPage();
  assertEquals(0,holder.getPage());
  holder.nextPage();
  assertEquals(1,holder.getPage());
  holder.nextPage();
  assertEquals(1,holder.getPage());
  holder.previousPage();
  assertEquals(0,holder.getPage());
  holder.previousPage();
  assertEquals(0,holder.getPage());
}
