{
  final WebSocketHandler handler=new TextWebSocketHandlerAdapter();
  WebSocketConfigurer configurer=new WebSocketConfigurer(){
    @Override public void registerWebSocketHandlers(    WebSocketHandlerRegistry registry){
      registry.addHandler(handler,"/h1").withSockJS();
    }
  }
;
  this.config.setConfigurers(Arrays.asList(configurer));
  SimpleUrlHandlerMapping hm=(SimpleUrlHandlerMapping)this.config.webSocketHandlerMapping();
  hm.setApplicationContext(this.context);
  Object actual=hm.getUrlMap().get("/h1/**");
  assertNotNull(actual);
  assertEquals(SockJsHttpRequestHandler.class,actual.getClass());
  assertEquals(1,hm.getUrlMap().size());
}
