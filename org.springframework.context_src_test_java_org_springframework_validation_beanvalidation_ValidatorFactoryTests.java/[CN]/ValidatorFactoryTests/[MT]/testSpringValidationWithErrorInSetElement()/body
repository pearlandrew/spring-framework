{
  LocalValidatorFactoryBean validator=new LocalValidatorFactoryBean();
  validator.afterPropertiesSet();
  ValidPerson person=new ValidPerson();
  person.getAddressSet().add(new ValidAddress());
  BeanPropertyBindingResult result=new BeanPropertyBindingResult(person,"person");
  validator.validate(person,result);
  assertEquals(3,result.getErrorCount());
  FieldError fieldError=result.getFieldError("name");
  assertEquals("name",fieldError.getField());
  System.out.println(Arrays.asList(fieldError.getCodes()));
  System.out.println(fieldError.getDefaultMessage());
  fieldError=result.getFieldError("address.street");
  assertEquals("address.street",fieldError.getField());
  System.out.println(Arrays.asList(fieldError.getCodes()));
  System.out.println(fieldError.getDefaultMessage());
  fieldError=result.getFieldError("addressSet[].street");
  assertEquals("addressSet[].street",fieldError.getField());
  System.out.println(Arrays.asList(fieldError.getCodes()));
  System.out.println(fieldError.getDefaultMessage());
}
