{
  String cancelView="cancelView";
  String cancelParameterKey="cancelRequest";
  final String reason="Because I wanted to";
  TestController ctl=new TestController(){
    @Override protected ModelAndView onCancel(    HttpServletRequest request,    HttpServletResponse response,    Object command){
      return new ModelAndView(getCancelView(),"reason",reason);
    }
  }
;
  ctl.setCancelParamKey(cancelParameterKey);
  ctl.setCancelView(cancelView);
  MockHttpServletRequest request=new MockHttpServletRequest();
  MockHttpServletResponse response=new MockHttpServletResponse();
  request.setMethod("POST");
  request.addParameter("cancelRequest","true");
  ModelAndView mv=ctl.handleRequest(request,response);
  assertEquals("Incorrect view name",cancelView,mv.getViewName());
  assertEquals("Model parameter reason not correct",reason,mv.getModel().get("reason"));
}
