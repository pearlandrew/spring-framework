{
  try {
    if ("true".equalsIgnoreCase(System.getProperty(IGNORE_GETENV_PROPERTY_NAME))) {
      return Collections.emptyMap();
    }
  }
 catch (  Throwable ex) {
    if (logger.isDebugEnabled()) {
      logger.debug("Could not obtain system property '" + IGNORE_GETENV_PROPERTY_NAME + "': "+ ex);
    }
  }
  try {
    return (Map)System.getenv();
  }
 catch (  AccessControlException ex) {
    return (Map)new ReadOnlySystemAttributesMap(){
      @Override protected String getSystemAttribute(      String variableName){
        try {
          return System.getenv(variableName);
        }
 catch (        AccessControlException ex) {
          if (logger.isInfoEnabled()) {
            logger.info(format("Caught AccessControlException when accessing system " + "environment variable [%s]; its value will be returned [null]. Reason: %s",variableName,ex.getMessage()));
          }
          return null;
        }
      }
    }
;
  }
}
