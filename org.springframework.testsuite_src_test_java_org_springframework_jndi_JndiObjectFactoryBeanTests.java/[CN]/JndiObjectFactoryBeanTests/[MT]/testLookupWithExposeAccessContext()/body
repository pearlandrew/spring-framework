{
  JndiObjectFactoryBean jof=new JndiObjectFactoryBean();
  TestBean tb=new TestBean();
  MockControl ctxControl=MockControl.createControl(Context.class);
  final Context mockCtx=(Context)ctxControl.getMock();
  mockCtx.lookup("foo");
  ctxControl.setReturnValue(tb);
  mockCtx.close();
  ctxControl.setVoidCallable(2);
  ctxControl.replay();
  jof.setJndiTemplate(new JndiTemplate(){
    protected Context createInitialContext(){
      return mockCtx;
    }
  }
);
  jof.setJndiName("foo");
  jof.setProxyInterface(ITestBean.class);
  jof.setExposeAccessContext(true);
  jof.afterPropertiesSet();
  assertTrue(jof.getObject() instanceof ITestBean);
  ITestBean proxy=(ITestBean)jof.getObject();
  assertEquals(0,tb.getAge());
  proxy.setAge(99);
  assertEquals(99,tb.getAge());
  proxy.equals(proxy);
  proxy.hashCode();
  proxy.toString();
  ctxControl.verify();
}
