{
  this.wsSession=session;
  try {
    TextMessage message=new TextMessage(SockJsFrame.openFrame().getContent());
    this.wsSession.sendMessage(message);
    scheduleHeartbeat();
    delegateConnectionEstablished();
  }
 catch (  Exception ex) {
    tryCloseWithSockJsTransportError(ex,CloseStatus.SERVER_ERROR);
    return;
  }
}
