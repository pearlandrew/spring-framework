{
  Assert.notNull(testClass,"Test class must not be null");
  Assert.notNull(contextCache,"ContextCache must not be null");
  this.testClass=testClass;
  this.contextCache=contextCache;
  this.cacheAwareContextLoaderDelegate=new CacheAwareContextLoaderDelegate(contextCache);
  MergedContextConfiguration mergedContextConfiguration;
  if (testClass.isAnnotationPresent(ContextConfiguration.class) || testClass.isAnnotationPresent(ContextHierarchy.class)) {
    mergedContextConfiguration=ContextLoaderUtils.buildMergedContextConfiguration(testClass,defaultContextLoaderClassName,cacheAwareContextLoaderDelegate);
  }
 else {
    if (logger.isInfoEnabled()) {
      logger.info(String.format("Neither @ContextConfiguration nor @ContextHierarchy found for test class [%s]",testClass.getName()));
    }
    mergedContextConfiguration=new MergedContextConfiguration(testClass,null,null,null,null);
  }
  this.mergedContextConfiguration=mergedContextConfiguration;
}
