{
  if (processor.subscriberCompleted) {
    if (processor.changeState(this,COMPLETED)) {
      processor.publisherDelegate.publishComplete();
    }
  }
 else {
    try {
      processor.flush();
      processor.subscription.request(1);
    }
 catch (    IOException ex) {
      processor.cancel();
      processor.onError(ex);
    }
  }
}
