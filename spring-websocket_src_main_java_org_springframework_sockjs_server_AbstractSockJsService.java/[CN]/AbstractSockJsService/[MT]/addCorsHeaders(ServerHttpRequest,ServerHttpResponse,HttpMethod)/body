{
  String origin=request.getHeaders().getFirst("origin");
  origin=((origin == null) || origin.equals("null")) ? "*" : origin;
  response.getHeaders().add("Access-Control-Allow-Origin",origin);
  response.getHeaders().add("Access-Control-Allow-Credentials","true");
  List<String> accessControllerHeaders=request.getHeaders().get("Access-Control-Request-Headers");
  if (accessControllerHeaders != null) {
    for (    String header : accessControllerHeaders) {
      response.getHeaders().add("Access-Control-Allow-Headers",header);
    }
  }
  if (!ObjectUtils.isEmpty(httpMethods)) {
    response.getHeaders().add("Access-Control-Allow-Methods",StringUtils.arrayToDelimitedString(httpMethods,", "));
    response.getHeaders().add("Access-Control-Max-Age",String.valueOf(ONE_YEAR));
  }
}
