{
  DefaultListableBeanFactory lbf=new DefaultListableBeanFactory();
  RootBeanDefinition bd=new RootBeanDefinition(TestBean.class);
  lbf.registerBeanDefinition("spouse",bd);
  MutablePropertyValues pvs=new MutablePropertyValues();
  pvs.add("age","99");
  lbf.registerBeanDefinition("test",new RootBeanDefinition(TestBean.class,RootBeanDefinition.AUTOWIRE_BY_NAME));
  TestBean tb=new TestBean();
  lbf.configureBean(tb,"test");
  assertSame(lbf,tb.getBeanFactory());
  TestBean spouse=(TestBean)lbf.getBean("spouse");
  assertEquals(spouse,tb.getSpouse());
}
