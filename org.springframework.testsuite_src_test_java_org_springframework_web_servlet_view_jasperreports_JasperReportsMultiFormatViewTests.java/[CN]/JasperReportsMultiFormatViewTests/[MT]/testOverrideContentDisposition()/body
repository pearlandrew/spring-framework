{
  if (!canCompileReport) {
    return;
  }
  AbstractJasperReportsView view=getView(UNCOMPILED_REPORT);
  Map<String,Object> model=getBaseModel();
  model.put(getDiscriminatorKey(),"csv");
  String headerValue="inline; filename=foo.txt";
  Properties mappings=new Properties();
  mappings.put("csv",headerValue);
  ((JasperReportsMultiFormatView)view).setContentDispositionMappings(mappings);
  view.render(model,request,response);
  assertEquals("Invalid Content-Disposition header value",headerValue,response.getHeader("Content-Disposition"));
}
