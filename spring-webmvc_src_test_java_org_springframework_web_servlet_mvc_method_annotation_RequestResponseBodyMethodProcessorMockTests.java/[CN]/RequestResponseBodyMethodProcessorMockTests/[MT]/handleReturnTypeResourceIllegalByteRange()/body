{
  Resource returnValue=new ByteArrayResource("Content".getBytes(Charset.forName("UTF-8")));
  servletRequest.addHeader("Range","illegal");
  given(resourceMessageConverter.canWrite(ByteArrayResource.class,null)).willReturn(true);
  given(resourceMessageConverter.getSupportedMediaTypes()).willReturn(Collections.singletonList(MediaType.ALL));
  processor.handleReturnValue(returnValue,returnTypeResource,mavContainer,webRequest);
  then(resourceMessageConverter).should(never()).write(any(ByteArrayResource.class),eq(MediaType.APPLICATION_OCTET_STREAM),any(HttpOutputMessage.class));
  assertEquals(416,servletResponse.getStatus());
}
