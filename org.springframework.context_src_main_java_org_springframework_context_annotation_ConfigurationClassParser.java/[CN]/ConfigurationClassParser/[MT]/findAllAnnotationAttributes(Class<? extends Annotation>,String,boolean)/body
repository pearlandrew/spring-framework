{
  List<AnnotationAttributes> allAttribs=new ArrayList<AnnotationAttributes>();
  MetadataReader reader=this.metadataReaderFactory.getMetadataReader(annotatedClassName);
  AnnotationMetadata metadata=reader.getAnnotationMetadata();
  String targetAnnotationType=targetAnnotation.getName();
  for (  String annotationType : metadata.getAnnotationTypes()) {
    if (annotationType.equals(targetAnnotationType)) {
      continue;
    }
    AnnotationMetadata metaAnnotations=this.metadataReaderFactory.getMetadataReader(annotationType).getAnnotationMetadata();
    AnnotationAttributes targetAttribs=AnnotationAttributes.fromMap(metaAnnotations.getAnnotationAttributes(targetAnnotationType,classValuesAsString));
    if (targetAttribs != null) {
      allAttribs.add(targetAttribs);
    }
  }
  AnnotationAttributes localAttribs=AnnotationAttributes.fromMap(metadata.getAnnotationAttributes(targetAnnotationType,classValuesAsString));
  if (localAttribs != null) {
    allAttribs.add(localAttribs);
  }
  return allAttribs;
}
