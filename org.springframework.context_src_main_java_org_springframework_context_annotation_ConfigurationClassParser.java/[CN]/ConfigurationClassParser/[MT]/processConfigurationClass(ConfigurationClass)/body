{
  AnnotationMetadata metadata=configClass.getMetadata();
  if (this.environment != null && metadata.isAnnotated(Profile.class.getName())) {
    AnnotationAttributes profile=MetadataUtils.attributesFor(metadata,Profile.class);
    if (!this.environment.acceptsProfiles(profile.getStringArray("value"))) {
      return;
    }
  }
  do {
    metadata=doProcessConfigurationClass(configClass,metadata);
  }
 while (metadata != null);
  if (this.configurationClasses.contains(configClass) && configClass.getBeanName() != null) {
    this.configurationClasses.remove(configClass);
  }
  this.configurationClasses.add(configClass);
}
