{
  List<Map<String,Object>> allImportAttribs=AnnotationUtils.findAllAnnotationAttributes(Import.class,metadata.getClassName(),true);
  for (  Map<String,Object> importAttribs : allImportAttribs) {
    processImport(configClass,(String[])importAttribs.get("value"));
  }
  if (metadata.isAnnotated(ImportResource.class.getName())) {
    String[] resources=(String[])metadata.getAnnotationAttributes(ImportResource.class.getName()).get("value");
    Class<?> readerClass=(Class<?>)metadata.getAnnotationAttributes(ImportResource.class.getName()).get("reader");
    if (readerClass == null) {
      throw new IllegalStateException("No reader class associated with imported resources: " + StringUtils.arrayToCommaDelimitedString(resources));
    }
    for (    String resource : resources) {
      configClass.addImportedResource(resource,readerClass);
    }
  }
  Set<MethodMetadata> beanMethods=metadata.getAnnotatedMethods(Bean.class.getName());
  for (  MethodMetadata methodMetadata : beanMethods) {
    configClass.addBeanMethod(new BeanMethod(methodMetadata,configClass));
  }
}
