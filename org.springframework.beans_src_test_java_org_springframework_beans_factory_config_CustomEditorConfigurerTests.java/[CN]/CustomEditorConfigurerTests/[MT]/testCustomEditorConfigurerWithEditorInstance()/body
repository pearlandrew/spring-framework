{
  DefaultListableBeanFactory bf=new DefaultListableBeanFactory();
  CustomEditorConfigurer cec=new CustomEditorConfigurer();
  Map<String,PropertyEditor> editors=new HashMap<String,PropertyEditor>();
  DateFormat df=DateFormat.getDateInstance(DateFormat.SHORT,Locale.GERMAN);
  editors.put(Date.class.getName(),new CustomDateEditor(df,true));
  cec.setCustomEditors(editors);
  cec.postProcessBeanFactory(bf);
  MutablePropertyValues pvs=new MutablePropertyValues();
  pvs.addPropertyValue("date","2.12.1975");
  bf.registerBeanDefinition("tb1",new RootBeanDefinition(TestBean.class,pvs));
  pvs=new MutablePropertyValues();
  pvs.addPropertyValue("someMap[myKey]",new TypedStringValue("2.12.1975",Date.class));
  bf.registerBeanDefinition("tb2",new RootBeanDefinition(TestBean.class,pvs));
  TestBean tb1=(TestBean)bf.getBean("tb1");
  assertEquals(df.parse("2.12.1975"),tb1.getDate());
  TestBean tb2=(TestBean)bf.getBean("tb2");
  assertEquals(df.parse("2.12.1975"),tb2.getSomeMap().get("myKey"));
}
