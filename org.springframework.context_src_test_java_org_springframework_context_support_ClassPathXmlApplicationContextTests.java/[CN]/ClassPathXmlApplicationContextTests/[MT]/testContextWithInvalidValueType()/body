{
  ClassPathXmlApplicationContext context=new ClassPathXmlApplicationContext(new String[]{INVALID_VALUE_TYPE_CONTEXT},false);
  try {
    context.refresh();
    fail("Should have thrown BeanCreationException");
  }
 catch (  BeanCreationException ex) {
    assertTrue(ex.contains(TypeMismatchException.class));
    assertTrue(ex.toString().indexOf("someMessageSource") != -1);
    assertTrue(ex.toString().indexOf("useCodeAsDefaultMessage") != -1);
    checkExceptionFromInvalidValueType(ex);
    checkExceptionFromInvalidValueType(new ExceptionInInitializerError(ex));
    assertFalse(context.isActive());
  }
}
