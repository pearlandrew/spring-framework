{
  Throwable ex=new IllegalStateException();
  Publisher<Void> publisher=this.handler.handle(this.request,this.response,ex);
  List<Signal<Void>> signals=Streams.wrap(publisher).materialize().toList().await(5,TimeUnit.SECONDS);
  assertEquals(1,signals.size());
  assertTrue(signals.get(0).hasError());
  assertSame(ex,signals.get(0).getThrowable());
}
