{
  Class<?>[] paramTypes=handlerMethod.getParameterTypes();
  Object[] args=new Object[paramTypes.length];
  Class<?> handlerType=handler.getClass();
  for (int i=0; i < args.length; i++) {
    MethodParameter methodParam=new SynthesizingMethodParameter(handlerMethod,i);
    GenericTypeResolver.resolveParameterType(methodParam,handlerType);
    Class<?> paramType=methodParam.getParameterType();
    Object argValue=resolveCommonArgument(methodParam,webRequest,thrownException);
    if (argValue != WebArgumentResolver.UNRESOLVED) {
      args[i]=argValue;
    }
 else {
      throw new IllegalStateException("Unsupported argument [" + paramType.getName() + "] for @ExceptionHandler method: "+ handlerMethod);
    }
  }
  return args;
}
