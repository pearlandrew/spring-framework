{
  if (!this.modes.isEmpty() && !this.modes.contains(request.getPortletMode())) {
    return false;
  }
  if (StringUtils.hasLength(this.phase) && !this.phase.equals(request.getAttribute(PortletRequest.LIFECYCLE_PHASE))) {
    return false;
  }
  if (StringUtils.hasLength(this.value)) {
    if (this.phase.equals(PortletRequest.ACTION_PHASE) && !this.value.equals(request.getParameter(ActionRequest.ACTION_NAME))) {
      return false;
    }
 else     if (this.phase.equals(PortletRequest.RENDER_PHASE) && !(new WindowState(this.value)).equals(request.getWindowState())) {
      return false;
    }
 else     if (this.phase.equals(PortletRequest.RESOURCE_PHASE) && !this.value.equals(((ResourceRequest)request).getResourceID())) {
      return false;
    }
 else     if (this.phase.equals(PortletRequest.EVENT_PHASE)) {
      Event event=((EventRequest)request).getEvent();
      if (!this.value.equals(event.getName()) && !this.value.equals(event.getQName().toString())) {
        return false;
      }
    }
  }
  return PortletAnnotationMappingUtils.checkRequestMethod(this.methods,request) && PortletAnnotationMappingUtils.checkParameters(this.params,request);
}
