{
  NumberFormat format=getNumberFormat(locale);
  ParsePosition position=new ParsePosition(0);
  Number number=format.parse(formatted,position);
  if (position.getErrorIndex() != -1) {
    throw new ParseException(formatted,position.getIndex());
  }
  if (!this.lenient) {
    if (formatted.length() != position.getIndex()) {
      throw new ParseException(formatted,position.getIndex());
    }
  }
  return number;
}
