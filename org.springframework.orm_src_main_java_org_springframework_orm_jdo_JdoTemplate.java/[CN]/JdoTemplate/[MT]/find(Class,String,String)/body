{
  return (Collection)execute(new JdoCallback(){
    public Object doInJdo(    PersistenceManager pm) throws JDOException {
      Query query=(filter != null ? pm.newQuery(entityClass,filter) : pm.newQuery(entityClass));
      prepareQuery(query);
      if (ordering != null) {
        query.setOrdering(ordering);
      }
      return query.execute();
    }
  }
,true);
}
