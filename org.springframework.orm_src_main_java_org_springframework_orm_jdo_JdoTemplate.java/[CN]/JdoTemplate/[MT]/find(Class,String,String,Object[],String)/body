{
  return (Collection)execute(new JdoCallback(){
    public Object doInJdo(    PersistenceManager pm) throws JDOException {
      Query query=pm.newQuery(entityClass,filter);
      prepareQuery(query);
      query.declareParameters(parameters);
      if (ordering != null) {
        query.setOrdering(ordering);
      }
      return query.executeWithArray(values);
    }
  }
,true);
}
