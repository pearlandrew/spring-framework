{
  try {
    Map map=(Map)source;
    Map targetMap=(Map)ConversionUtils.getMapImpl(targetType.getType()).newInstance();
    MapEntryConverter converter=getEntryConverter(map);
    Iterator<Map.Entry<?,?>> it=map.entrySet().iterator();
    while (it.hasNext()) {
      Map.Entry entry=it.next();
      targetMap.put(converter.convertKey(entry.getKey()),converter.convertValue(entry.getValue()));
    }
    return targetMap;
  }
 catch (  Exception e) {
    throw new ConversionFailedException(source,sourceType.getType(),targetType.getType(),e);
  }
}
