{
  String encoding=defaultCharset;
  if (message.propertyExists(encodingPropertyName)) {
    encoding=message.getStringProperty(encodingPropertyName);
  }
  byte[] bytes=new byte[(int)message.getBodyLength()];
  message.readBytes(bytes);
  try {
    String body=new String(bytes,encoding);
    return jsonObjectMapper.readValue(body,targetJavaType);
  }
 catch (  UnsupportedEncodingException e) {
    throw new MessageConversionException("Cannot convert bytes to String",e);
  }
}
