{
  Assert.notNull(in,"No InputStream specified");
  Assert.notNull(out,"No OutputStream specified");
  try {
    int byteCount=0;
    byte[] buffer=new byte[BUFFER_SIZE];
    int bytesRead=-1;
    while ((bytesRead=in.read(buffer)) != -1) {
      out.write(buffer,0,bytesRead);
      byteCount+=bytesRead;
    }
    out.flush();
    return byteCount;
  }
  finally {
    try {
      in.close();
    }
 catch (    IOException ex) {
    }
    try {
      out.close();
    }
 catch (    IOException ex) {
    }
  }
}
