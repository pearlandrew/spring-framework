{
  if (!request.getHeaders().getConnection().contains("Upgrade")) {
    response.setStatusCode(HttpStatus.BAD_REQUEST);
    response.getBody().write("\"Connection\" must be \"upgrade\".".getBytes("UTF-8"));
    logger.debug("Invalid Connection header " + request.getHeaders().getConnection());
    return false;
  }
  return true;
}
