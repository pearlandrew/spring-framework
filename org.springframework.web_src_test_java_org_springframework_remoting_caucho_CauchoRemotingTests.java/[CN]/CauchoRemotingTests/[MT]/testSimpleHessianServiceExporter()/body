{
  if (JdkVersion.getMajorJavaVersion() < JdkVersion.JAVA_16) {
    return;
  }
  TestBean tb=new TestBean("tb");
  SimpleHessianServiceExporter exporter=new SimpleHessianServiceExporter();
  exporter.setService(tb);
  exporter.setServiceInterface(ITestBean.class);
  exporter.setDebug(true);
  exporter.prepare();
  HttpServer server=HttpServer.create(new InetSocketAddress(8889),-1);
  server.createContext("/hessian",exporter);
  server.start();
  try {
    HessianClientInterceptor client=new HessianClientInterceptor();
    client.setServiceUrl("http://localhost:8889/hessian");
    client.setServiceInterface(ITestBean.class);
    client.prepare();
    ITestBean proxy=ProxyFactory.getProxy(ITestBean.class,client);
    assertEquals("tb",proxy.getName());
    proxy.setName("test");
    assertEquals("test",proxy.getName());
  }
  finally {
    server.stop(Integer.MAX_VALUE);
  }
}
