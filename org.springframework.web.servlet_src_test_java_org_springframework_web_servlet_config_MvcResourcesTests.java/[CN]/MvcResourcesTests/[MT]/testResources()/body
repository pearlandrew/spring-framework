{
  AnnotationConfigApplicationContext ctx=new AnnotationConfigApplicationContext();
  ctx.register(MvcResourcesFeature.class);
  ctx.refresh();
  HttpRequestHandlerAdapter adapter=ctx.getBean(HttpRequestHandlerAdapter.class);
  assertNotNull(adapter);
  ResourceHttpRequestHandler handler=ctx.getBean(ResourceHttpRequestHandler.class);
  assertNotNull(handler);
  @SuppressWarnings("unchecked") List<Resource> locations=(List<Resource>)new DirectFieldAccessor(handler).getPropertyValue("locations");
  assertNotNull(locations);
  assertEquals(2,locations.size());
  assertEquals("foo",locations.get(0).getFilename());
  assertEquals("bar",locations.get(1).getFilename());
  SimpleUrlHandlerMapping mapping=ctx.getBean(SimpleUrlHandlerMapping.class);
  assertEquals(1,mapping.getOrder());
  assertSame(handler,mapping.getHandlerMap().get("/resources/**"));
}
