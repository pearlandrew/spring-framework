{
  StompHeaderAccessor headers=StompHeaderAccessor.create(StompCommand.MESSAGE);
  headers.setMessageId("mess0");
  headers.setSubscriptionId("sub0");
  headers.setDestination("/queue/foo-user123");
  headers.setHeader(StompHeaderAccessor.ORIGINAL_DESTINATION,"/user/queue/foo");
  Message<byte[]> message=MessageBuilder.withPayload(new byte[0]).setHeaders(headers).build();
  this.protocolHandler.handleMessageToClient(this.session,message);
  assertEquals(1,this.session.getSentMessages().size());
  WebSocketMessage<?> textMessage=this.session.getSentMessages().get(0);
  assertTrue(((String)textMessage.getPayload()).contains("destination:/user/queue/foo\n"));
}
