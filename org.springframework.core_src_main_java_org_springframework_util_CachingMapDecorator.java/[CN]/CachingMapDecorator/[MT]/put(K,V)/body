{
  Object newValue=value;
  if (value == null) {
    newValue=NULL_VALUE;
  }
 else   if (useWeakValue(key,value)) {
    newValue=new WeakReference<V>(value);
  }
  return unwrapIfNecessary(this.targetMap.put(key,newValue));
}
