{
  Object newValue=value;
  if (value == null) {
    newValue=NULL_VALUE;
  }
 else   if (useWeakValue(key,value)) {
    newValue=new WeakReference<Object>(newValue);
  }
  return unwrapReturnValue(this.targetMap.put(key,newValue));
}
