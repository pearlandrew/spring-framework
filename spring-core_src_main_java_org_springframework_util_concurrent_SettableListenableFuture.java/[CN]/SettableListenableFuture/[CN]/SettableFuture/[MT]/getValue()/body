{
switch (this.state) {
case COMPLETED:
    if (this.throwable != null) {
      throw new ExecutionException(this.throwable);
    }
 else {
      return this.value;
    }
case CANCELLED:
  throw new CancellationException("Future has been cancelled.");
default :
throw new IllegalStateException("Invalid state: " + this.state);
}
}
