{
  String name="props";
  Map<String,Object> map=new HashMap<String,Object>(){
{
      put("k1","v1");
    }
  }
;
  MapPropertySource ps=new MapPropertySource(name,map);
  Logger logger=Logger.getLogger(ps.getClass());
  Level original=logger.getLevel();
  try {
    logger.setLevel(Level.DEBUG);
    assertThat("PropertySource.toString() should render verbose output for log levels <= DEBUG",ps.toString(),equalTo(String.format("%s@%s [name='%s', properties=%s]",ps.getClass().getSimpleName(),System.identityHashCode(ps),name,map)));
    logger.setLevel(Level.INFO);
    assertThat("PropertySource.toString() should render concise output for log levels >= INFO",ps.toString(),equalTo(String.format("%s [name='%s']",ps.getClass().getSimpleName(),name,map.size())));
  }
  finally {
    logger.setLevel(original);
  }
}
