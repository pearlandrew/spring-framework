{
  ConstructorArgumentValues cavs=new ConstructorArgumentValues();
  cavs.addIndexedArgumentValue(0,inChannel);
  cavs.addIndexedArgumentValue(1,brokerChannel);
  cavs.addIndexedArgumentValue(2,userDestinationResolver);
  RootBeanDefinition beanDef=new RootBeanDefinition(UserDestinationMessageHandler.class,cavs,null);
  if (brokerElem.hasAttribute("user-destination-broadcast")) {
    String destination=brokerElem.getAttribute("user-destination-broadcast");
    beanDef.getPropertyValues().add("userDestinationBroadcast",destination);
  }
  return new RuntimeBeanReference(registerBeanDef(beanDef,context,source));
}
