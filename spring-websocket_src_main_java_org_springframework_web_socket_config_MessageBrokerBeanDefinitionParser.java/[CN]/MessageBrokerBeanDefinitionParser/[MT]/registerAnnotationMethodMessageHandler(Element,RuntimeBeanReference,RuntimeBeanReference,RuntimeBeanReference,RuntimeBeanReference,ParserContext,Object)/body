{
  String applicationDestinationPrefix=messageBrokerElement.getAttribute("application-destination-prefix");
  ConstructorArgumentValues cavs=new ConstructorArgumentValues();
  cavs.addIndexedArgumentValue(0,clientInChannelDef);
  cavs.addIndexedArgumentValue(1,clientOutChannelDef);
  cavs.addIndexedArgumentValue(2,brokerMessagingTemplateRef);
  MutablePropertyValues mpvs=new MutablePropertyValues();
  mpvs.add("destinationPrefixes",Arrays.asList(applicationDestinationPrefix.split(",")));
  mpvs.add("messageConverter",brokerMessageConverterRef);
  RootBeanDefinition annotationMethodMessageHandlerDef=new RootBeanDefinition(SimpAnnotationMethodMessageHandler.class,cavs,mpvs);
  registerBeanDef(annotationMethodMessageHandlerDef,parserCxt,source);
}
