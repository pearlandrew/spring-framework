{
  Element convertersElement=DomUtils.getChildElementByTagName(element,"message-converters");
  ManagedList<? super Object> convertersDef=new ManagedList<Object>();
  if (convertersElement != null) {
    convertersDef.setSource(source);
    for (    Element beanElement : DomUtils.getChildElementsByTagName(convertersElement,"bean","ref")) {
      Object object=parserCxt.getDelegate().parsePropertySubElement(beanElement,null);
      convertersDef.add(object);
    }
  }
  if (convertersElement == null || Boolean.valueOf(convertersElement.getAttribute("register-defaults"))) {
    convertersDef.setSource(source);
    if (jackson2Present) {
      RootBeanDefinition jacksonConverterDef=new RootBeanDefinition(MappingJackson2MessageConverter.class);
      RootBeanDefinition resolverDef=new RootBeanDefinition(DefaultContentTypeResolver.class);
      resolverDef.getPropertyValues().add("defaultMimeType",MimeTypeUtils.APPLICATION_JSON);
      jacksonConverterDef.getPropertyValues().add("contentTypeResolver",resolverDef);
      convertersDef.add(jacksonConverterDef);
    }
    convertersDef.add(new RootBeanDefinition(StringMessageConverter.class));
    convertersDef.add(new RootBeanDefinition(ByteArrayMessageConverter.class));
  }
  ConstructorArgumentValues cavs=new ConstructorArgumentValues();
  cavs.addIndexedArgumentValue(0,convertersDef);
  RootBeanDefinition messageConverterDef=new RootBeanDefinition(CompositeMessageConverter.class,cavs,null);
  return new RuntimeBeanReference(registerBeanDef(messageConverterDef,parserCxt,source));
}
