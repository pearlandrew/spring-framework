{
  RootBeanDefinition beanDef=new RootBeanDefinition(WebSocketMessageBrokerStats.class);
  beanDef.getPropertyValues().add("subProtocolWebSocketHandler",subProtoHandler);
  if (StompBrokerRelayMessageHandler.class.equals(broker.getBeanClass())) {
    beanDef.getPropertyValues().add("stompBrokerRelay",broker);
  }
  String name=inChannel.getBeanName() + "Executor";
  if (context.getRegistry().containsBeanDefinition(name)) {
    beanDef.getPropertyValues().add("inboundChannelExecutor",context.getRegistry().getBeanDefinition(name));
  }
  name=outChannel.getBeanName() + "Executor";
  if (context.getRegistry().containsBeanDefinition(name)) {
    beanDef.getPropertyValues().add("outboundChannelExecutor",context.getRegistry().getBeanDefinition(name));
  }
  name=SOCKJS_SCHEDULER_BEAN_NAME;
  if (context.getRegistry().containsBeanDefinition(name)) {
    beanDef.getPropertyValues().add("sockJsTaskScheduler",context.getRegistry().getBeanDefinition(name));
  }
  registerBeanDefByName("webSocketMessageBrokerStats",beanDef,context,source);
}
