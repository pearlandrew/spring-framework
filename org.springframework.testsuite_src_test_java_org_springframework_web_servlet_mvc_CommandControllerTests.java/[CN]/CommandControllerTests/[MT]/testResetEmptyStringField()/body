{
  TestController mc=new TestController();
  MockHttpServletRequest request=new MockHttpServletRequest("GET","/welcome.html");
  request.addParameter("_name","visible");
  request.addParameter("name","test");
  MockHttpServletResponse response=new MockHttpServletResponse();
  ModelAndView mv=mc.handleRequest(request,response);
  TestBean tb=(TestBean)mv.getModel().get("command");
  Errors errors=(Errors)mv.getModel().get("errors");
  assertTrue("Correct name property","test".equals(tb.getName()));
  assertTrue("Correct name value","test".equals(errors.getFieldValue("name")));
  request=new MockHttpServletRequest("GET","/welcome.html");
  request.addParameter("_name","visible");
  request.addParameter("_someNonExistingField","visible");
  mv=mc.handleRequest(request,response);
  tb=(TestBean)mv.getModel().get("command");
  errors=(Errors)mv.getModel().get("errors");
  assertTrue("Correct name property",tb.getName() == null);
  assertTrue("Correct name value",errors.getFieldValue("name") == null);
}
