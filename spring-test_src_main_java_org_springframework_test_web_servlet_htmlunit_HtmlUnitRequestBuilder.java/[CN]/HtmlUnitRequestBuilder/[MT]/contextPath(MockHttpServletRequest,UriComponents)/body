{
  if (this.contextPath == null) {
    List<String> pathSegments=uriComponents.getPathSegments();
    if (pathSegments.isEmpty()) {
      result.setContextPath("");
    }
 else {
      result.setContextPath("/" + pathSegments.get(0));
    }
  }
 else {
    if (!uriComponents.getPath().startsWith(this.contextPath)) {
      throw new IllegalArgumentException(uriComponents.getPath() + " should start with contextPath " + this.contextPath);
    }
    result.setContextPath(this.contextPath);
  }
}
