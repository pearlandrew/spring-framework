{
  String charset=getCharset();
  String httpMethod=webRequest.getHttpMethod().name();
  UriComponents uriComponents=uriComponents();
  MockHttpServletRequest result=new HtmlUnitMockHttpServletRequest(servletContext,httpMethod,uriComponents.getPath());
  parent(result,parentBuilder);
  result.setServerName(uriComponents.getHost());
  authType(result);
  result.setCharacterEncoding(charset);
  content(result,charset);
  contextPath(result,uriComponents);
  contentType(result);
  cookies(result);
  headers(result);
  locales(result);
  servletPath(uriComponents,result);
  params(result,uriComponents);
  ports(uriComponents,result);
  result.setProtocol("HTTP/1.1");
  result.setQueryString(uriComponents.getQuery());
  result.setScheme(uriComponents.getScheme());
  pathInfo(uriComponents,result);
  return postProcess(result);
}
