{
  org.hibernate.Interceptor entityInterceptor=mock(org.hibernate.Interceptor.class);
  given(sessionFactory.openSession(entityInterceptor)).willReturn(session);
  HibernateInterceptor interceptor=new HibernateInterceptor();
  interceptor.setSessionFactory(sessionFactory);
  interceptor.setEntityInterceptor(entityInterceptor);
  try {
    interceptor.invoke(invocation);
  }
 catch (  Throwable t) {
    fail("Should not have thrown Throwable: " + t.getMessage());
  }
  verify(session).flush();
  verify(session).close();
}
