{
  MockControl sfControl=MockControl.createControl(SessionFactory.class);
  SessionFactory sf=(SessionFactory)sfControl.getMock();
  MockControl sessionControl=MockControl.createControl(Session.class);
  Session session=(Session)sessionControl.getMock();
  sf.openSession();
  sfControl.setReturnValue(session,1);
  session.getSessionFactory();
  sessionControl.setReturnValue(sf);
  session.enableFilter("myFilter");
  sessionControl.setReturnValue(null,1);
  session.flush();
  sessionControl.setVoidCallable(1);
  session.close();
  sessionControl.setReturnValue(null,1);
  sfControl.replay();
  sessionControl.replay();
  HibernateInterceptor interceptor=new HibernateInterceptor();
  interceptor.setSessionFactory(sf);
  interceptor.setFilterName("myFilter");
  try {
    interceptor.invoke(new TestInvocation(sf));
  }
 catch (  Throwable t) {
    fail("Should not have thrown Throwable: " + t.getMessage());
  }
  sfControl.verify();
  sessionControl.verify();
}
