{
  PreparedStatement ps=null;
  if (generatedKeysColumnNames != null || returnGeneratedKeys) {
    try {
      if (generatedKeysColumnNames != null) {
        ps=con.prepareStatement(this.actualSql,generatedKeysColumnNames);
      }
 else {
        ps=con.prepareStatement(this.actualSql,PreparedStatement.RETURN_GENERATED_KEYS);
      }
    }
 catch (    AbstractMethodError ex) {
      throw new InvalidDataAccessResourceUsageException("The JDBC driver is not compliant to JDBC 3.0 and thus " + "does not support retrieval of auto-generated keys",ex);
    }
  }
 else   if (resultSetType == ResultSet.TYPE_FORWARD_ONLY && !updatableResults) {
    ps=con.prepareStatement(this.actualSql);
  }
 else {
    ps=con.prepareStatement(this.actualSql,resultSetType,updatableResults ? ResultSet.CONCUR_UPDATABLE : ResultSet.CONCUR_READ_ONLY);
  }
  setValues(ps);
  return ps;
}
