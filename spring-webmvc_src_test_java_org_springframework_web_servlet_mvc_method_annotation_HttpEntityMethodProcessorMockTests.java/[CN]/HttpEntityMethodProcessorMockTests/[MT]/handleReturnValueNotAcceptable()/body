{
  String body="Foo";
  ResponseEntity<String> returnValue=new ResponseEntity<String>(body,HttpStatus.OK);
  MediaType accepted=MediaType.APPLICATION_ATOM_XML;
  servletRequest.addHeader("Accept",accepted.toString());
  given(messageConverter.canWrite(String.class,null)).willReturn(true);
  given(messageConverter.getSupportedMediaTypes()).willReturn(Arrays.asList(MediaType.TEXT_PLAIN));
  given(messageConverter.canWrite(String.class,accepted)).willReturn(false);
  processor.handleReturnValue(returnValue,returnTypeResponseEntity,mavContainer,webRequest);
  fail("Expected exception");
}
