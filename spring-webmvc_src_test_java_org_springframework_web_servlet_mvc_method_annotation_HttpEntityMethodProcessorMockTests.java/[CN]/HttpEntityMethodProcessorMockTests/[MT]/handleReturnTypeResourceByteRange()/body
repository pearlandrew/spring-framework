{
  Resource resource=new ByteArrayResource("Content".getBytes(Charset.forName("UTF-8")));
  ResponseEntity<Resource> returnValue=ResponseEntity.ok(resource);
  servletRequest.addHeader("Range","bytes=0-5");
  given(resourceMessageConverter.canWrite(HttpRangeResource.class,null)).willReturn(true);
  given(resourceMessageConverter.getSupportedMediaTypes()).willReturn(Collections.singletonList(MediaType.ALL));
  given(resourceMessageConverter.canWrite(HttpRangeResource.class,MediaType.APPLICATION_OCTET_STREAM)).willReturn(true);
  processor.handleReturnValue(returnValue,returnTypeResponseEntityResource,mavContainer,webRequest);
  then(resourceMessageConverter).should(times(1)).write(any(ByteArrayResource.class),eq(MediaType.APPLICATION_OCTET_STREAM),any(HttpOutputMessage.class));
  assertEquals(206,servletResponse.getStatus());
}
