{
  VelocityEngineFactoryBean vefb=new VelocityEngineFactoryBean();
  Properties props=new Properties();
  props.setProperty("myprop","/mydir");
  vefb.setVelocityProperties(props);
  Object value=new Object();
  Map<String,Object> map=new HashMap<>();
  map.put("myentry",value);
  vefb.setVelocityPropertiesMap(map);
  vefb.afterPropertiesSet();
  assertThat(vefb.getObject(),instanceOf(VelocityEngine.class));
  VelocityEngine ve=vefb.getObject();
  assertEquals("/mydir",ve.getProperty("myprop"));
  assertEquals(value,ve.getProperty("myentry"));
}
