{
  List<MessageConverter> converters=new ArrayList<MessageConverter>();
  boolean registerDefaults=configureMessageConverters(converters);
  if (registerDefaults) {
    if (jackson2Present) {
      DefaultContentTypeResolver resolver=new DefaultContentTypeResolver();
      resolver.setDefaultMimeType(MimeTypeUtils.APPLICATION_JSON);
      MappingJackson2MessageConverter converter=new MappingJackson2MessageConverter();
      converter.setContentTypeResolver(resolver);
      converters.add(converter);
    }
    converters.add(new StringMessageConverter());
    converters.add(new ByteArrayMessageConverter());
  }
  return new CompositeMessageConverter(converters);
}
