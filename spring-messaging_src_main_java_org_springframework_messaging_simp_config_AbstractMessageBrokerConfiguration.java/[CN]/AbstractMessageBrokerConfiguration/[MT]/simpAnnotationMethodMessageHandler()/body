{
  SimpAnnotationMethodMessageHandler handler=new SimpAnnotationMethodMessageHandler(clientInboundChannel(),clientOutboundChannel(),brokerMessagingTemplate());
  handler.setDestinationPrefixes(getBrokerRegistry().getApplicationDestinationPrefixes());
  handler.setMessageConverter(brokerMessageConverter());
  handler.setValidator(simpValidator());
  PathMatcher pathMatcher=this.getBrokerRegistry().getPathMatcher();
  if (pathMatcher != null) {
    handler.setPathMatcher(pathMatcher);
  }
  return handler;
}
