{
  HttpHeaders headers=outputMessage.getHeaders();
  if (contentType == null || contentType.isWildcardType() || contentType.isWildcardSubtype()) {
    contentType=getContentType(resource);
  }
  if (contentType != null) {
    headers.setContentType(contentType);
  }
  Long contentLength=getContentLength(resource,contentType);
  if (contentLength != null) {
    headers.setContentLength(contentLength);
  }
  FileCopyUtils.copy(resource.getInputStream(),outputMessage.getBody());
  outputMessage.getBody().flush();
}
