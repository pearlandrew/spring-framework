{
  Class<?> handlerType=(handler instanceof String) ? getApplicationContext().getType((String)handler) : handler.getClass();
  final Class<?> userType=ClassUtils.getUserClass(handlerType);
  Set<Method> methods=HandlerMethodSelector.selectMethods(userType,new MethodFilter(){
    public boolean matches(    Method method){
      return getMappingForMethod(method,userType) != null;
    }
  }
);
  for (  Method method : methods) {
    T mapping=getMappingForMethod(method,userType);
    registerHandlerMethod(handler,method,mapping);
  }
}
