{
  CorsConfiguration corsConfig=super.getCorsConfiguration(handler,request);
  if (handler instanceof HandlerMethod) {
    HandlerMethod handlerMethod=(HandlerMethod)handler;
    if (handlerMethod.equals(PREFLIGHT_AMBIGUOUS_MATCH)) {
      return AbstractHandlerMethodMapping.ALLOW_CORS_CONFIG;
    }
 else {
      CorsConfiguration corsConfigFromMethod=this.mappingRegistry.getCorsConfiguration(handlerMethod);
      corsConfig=(corsConfig == null ? corsConfigFromMethod : corsConfig.combine(corsConfigFromMethod));
    }
  }
  return corsConfig;
}
