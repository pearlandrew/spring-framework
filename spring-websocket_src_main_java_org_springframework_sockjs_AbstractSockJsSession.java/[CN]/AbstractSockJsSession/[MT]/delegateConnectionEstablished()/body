{
  this.state=State.OPEN;
  this.handler=handlerProvider.getHandler();
  try {
    this.handler.afterConnectionEstablished(this);
  }
 catch (  Throwable ex) {
    tryCloseWithError(ex,null);
  }
}
