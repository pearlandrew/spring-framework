{
  if (!isSynchronizationActive()) {
    throw new IllegalStateException("Transaction synchronization is not active");
  }
  List<TransactionSynchronization> synchs=synchronizations.get();
  OrderComparator.sort(synchs);
  return Collections.unmodifiableList(new ArrayList<TransactionSynchronization>(synchs));
}
