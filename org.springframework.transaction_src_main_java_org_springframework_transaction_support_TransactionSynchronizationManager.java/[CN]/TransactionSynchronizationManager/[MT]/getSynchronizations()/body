{
  List<TransactionSynchronization> synchs=synchronizations.get();
  if (synchs == null) {
    throw new IllegalStateException("Transaction synchronization is not active");
  }
  if (synchs.isEmpty()) {
    return Collections.emptyList();
  }
 else {
    OrderComparator.sort(synchs);
    return Collections.unmodifiableList(new ArrayList<TransactionSynchronization>(synchs));
  }
}
