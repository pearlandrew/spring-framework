{
  if (bean instanceof Portlet) {
    PortletConfig config=this.portletConfig;
    if (config == null || !this.useSharedPortletConfig) {
      config=new DelegatingPortletConfig(beanName,this.portletContext,this.portletConfig);
    }
    try {
      ((Portlet)bean).init(config);
    }
 catch (    PortletException ex) {
      throw new BeanInitializationException("Portlet.init threw exception",ex);
    }
  }
  return bean;
}
