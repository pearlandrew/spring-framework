{
  if (!isStrictEncoding()) {
    return builder.build().expand(uriVariables).encode();
  }
 else {
    Map<String,Object> encodedUriVars=new HashMap<String,Object>(uriVariables.size());
    for (    Map.Entry<String,?> entry : uriVariables.entrySet()) {
      encodedUriVars.put(entry.getKey(),applyStrictEncoding(entry.getValue()));
    }
    return builder.build().expand(encodedUriVars);
  }
}
