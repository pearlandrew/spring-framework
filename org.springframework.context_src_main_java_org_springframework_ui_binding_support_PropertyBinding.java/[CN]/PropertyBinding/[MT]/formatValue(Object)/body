{
  Formatter formatter;
  if (isIndexable() || isMap()) {
    formatter=indexedValueFormatter;
  }
 else {
    formatter=valueFormatter;
  }
  Class<?> formattedType=getFormattedObjectType(formatter.getClass());
  value=typeConverter.convert(value,formattedType);
  return formatter.format(value,getLocale());
}
