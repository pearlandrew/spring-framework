{
  if (isReadOnly()) {
    throw new IllegalStateException("Property is read only");
  }
  if (sourceValue instanceof String) {
    try {
      buffer.setValue(valueFormatter.parse((String)sourceValue,getLocale()));
      sourceValue=null;
      bindingStatus=BindingStatus.DIRTY;
    }
 catch (    ParseException e) {
      this.sourceValue=sourceValue;
      sourceValueParseException=e;
      bindingStatus=BindingStatus.INVALID_SOURCE_VALUE;
    }
  }
 else   if (sourceValue instanceof String[]) {
    String[] sourceValues=(String[])sourceValue;
    Class<?> parsedType=getFormattedObjectType(indexedValueFormatter.getClass());
    if (parsedType == null) {
      parsedType=String.class;
    }
    Object parsed=Array.newInstance(parsedType,sourceValues.length);
    for (int i=0; i < sourceValues.length; i++) {
      Object parsedValue;
      try {
        parsedValue=indexedValueFormatter.parse(sourceValues[i],LocaleContextHolder.getLocale());
        Array.set(parsed,i,parsedValue);
      }
 catch (      ParseException e) {
        this.sourceValue=sourceValue;
        sourceValueParseException=e;
        bindingStatus=BindingStatus.INVALID_SOURCE_VALUE;
        break;
      }
    }
    if (bindingStatus != BindingStatus.INVALID_SOURCE_VALUE) {
      buffer.setValue(parsed);
      sourceValue=null;
      bindingStatus=BindingStatus.DIRTY;
    }
  }
}
