{
  streamWriter.writeStartElement(name.getPrefix(),name.getLocalPart(),name.getNamespaceURI());
  if (namespaceContext != null) {
    String defaultNamespaceUri=namespaceContext.getNamespaceURI("");
    if (StringUtils.hasLength(defaultNamespaceUri)) {
      streamWriter.writeNamespace("",defaultNamespaceUri);
      streamWriter.setDefaultNamespace(defaultNamespaceUri);
    }
    for (Iterator<String> iterator=namespaceContext.getBoundPrefixes(); iterator.hasNext(); ) {
      String prefix=iterator.next();
      streamWriter.writeNamespace(prefix,namespaceContext.getNamespaceURI(prefix));
      streamWriter.setPrefix(prefix,namespaceContext.getNamespaceURI(prefix));
    }
  }
  for (int i=0; i < attributes.getLength(); i++) {
    QName attrName=toQName(attributes.getURI(i),attributes.getQName(i));
    if (!("xmlns".equals(attrName.getLocalPart()) || "xmlns".equals(attrName.getPrefix()))) {
      streamWriter.writeAttribute(attrName.getPrefix(),attrName.getNamespaceURI(),attrName.getLocalPart(),attributes.getValue(i));
    }
  }
}
