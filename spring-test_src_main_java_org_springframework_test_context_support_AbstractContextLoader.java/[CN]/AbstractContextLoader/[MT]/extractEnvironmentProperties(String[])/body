{
  StringBuilder sb=new StringBuilder();
  for (  String keyValuePair : keyValuePairs) {
    sb.append(keyValuePair).append(LINE_SEPARATOR);
  }
  String content=sb.toString();
  Properties props=new Properties();
  try {
    props.load(new StringReader(content));
  }
 catch (  IOException e) {
    throw new IllegalStateException("Failed to load test environment properties from: " + content,e);
  }
  Map<String,Object> properties=new HashMap<String,Object>();
  for (  String name : props.stringPropertyNames()) {
    properties.put(name,props.getProperty(name));
  }
  return properties;
}
