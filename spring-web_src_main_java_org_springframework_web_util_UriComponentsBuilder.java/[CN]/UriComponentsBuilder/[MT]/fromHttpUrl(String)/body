{
  Assert.notNull(httpUrl,"'httpUrl' must not be null");
  Matcher m=HTTP_URL_PATTERN.matcher(httpUrl);
  if (m.matches()) {
    UriComponentsBuilder builder=new UriComponentsBuilder();
    String scheme=m.group(1);
    builder.scheme((scheme != null) ? scheme.toLowerCase() : scheme);
    builder.userInfo(m.group(4));
    String host=m.group(5);
    if (StringUtils.hasLength(scheme) && !StringUtils.hasLength(host)) {
      throw new IllegalArgumentException("[" + httpUrl + "] is not a valid HTTP URL");
    }
    builder.host(host);
    String port=m.group(7);
    if (StringUtils.hasLength(port)) {
      builder.port(port);
    }
    builder.path(m.group(8));
    builder.query(m.group(10));
    return builder;
  }
 else {
    throw new IllegalArgumentException("[" + httpUrl + "] is not a valid HTTP URL");
  }
}
