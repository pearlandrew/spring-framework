{
  if (getContentHandler() != null) {
    final Location location=event.getLocation();
    getContentHandler().setDocumentLocator(new Locator2(){
      public int getColumnNumber(){
        return location.getColumnNumber();
      }
      public int getLineNumber(){
        return location.getLineNumber();
      }
      public String getPublicId(){
        return location.getPublicId();
      }
      public String getSystemId(){
        return location.getSystemId();
      }
      public String getXMLVersion(){
        if (event.isStartDocument()) {
          StartDocument startDocument=(StartDocument)event;
          String version=startDocument.getVersion();
          return StringUtils.hasLength(version) ? version : "1.0";
        }
        return null;
      }
      public String getEncoding(){
        if (event.isStartDocument()) {
          StartDocument startDocument=(StartDocument)event;
          if (startDocument.encodingSet()) {
            return startDocument.getCharacterEncodingScheme();
          }
        }
        return null;
      }
    }
);
    getContentHandler().startDocument();
  }
}
