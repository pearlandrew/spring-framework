{
  if (!mbd.isSingleton()) {
    return null;
  }
  try {
    FactoryBean<?> factoryBean=doGetBean(FACTORY_BEAN_PREFIX + beanName,FactoryBean.class,null,true);
    return getTypeForFactoryBean(factoryBean);
  }
 catch (  BeanCreationException ex) {
    if (logger.isWarnEnabled()) {
      logger.warn("Bean creation exception on FactoryBean type check: " + ex);
    }
    onSuppressedException(ex);
    return null;
  }
}
