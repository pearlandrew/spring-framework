{
  try {
    WebSocketHandler sockJsWrapper=new SockJsWebSocketHandler(this.sockJsConfig,webSocketHandler);
    this.handshakeHandler.doHandshake(request,response,sockJsWrapper);
  }
 catch (  Throwable t) {
    throw new TransportErrorException("Failed to start handshake request",t,session.getId());
  }
}
