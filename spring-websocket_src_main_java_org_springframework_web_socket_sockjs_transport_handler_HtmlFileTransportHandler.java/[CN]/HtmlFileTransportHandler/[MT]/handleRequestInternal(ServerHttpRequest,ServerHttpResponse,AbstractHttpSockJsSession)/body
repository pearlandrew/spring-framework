{
  try {
    String callback=request.getQueryParams().getFirst("c");
    if (!StringUtils.hasText(callback)) {
      response.setStatusCode(HttpStatus.INTERNAL_SERVER_ERROR);
      response.getBody().write("\"callback\" parameter required".getBytes("UTF-8"));
      return;
    }
  }
 catch (  Throwable t) {
    throw new SockJsProcessingException("Failed to send error to client",t,session.getId());
  }
  super.handleRequestInternal(request,response,session);
}
