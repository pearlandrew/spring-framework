{
  String callback=request.getQueryParams().getFirst("c");
  if (!StringUtils.hasText(callback)) {
    response.setStatusCode(HttpStatus.INTERNAL_SERVER_ERROR);
    try {
      response.getBody().write("\"callback\" parameter required".getBytes("UTF-8"));
    }
 catch (    IOException t) {
      sockJsSession.tryCloseWithSockJsTransportError(t,CloseStatus.SERVER_ERROR);
      throw new SockJsTransportFailureException("Failed to write to response",sockJsSession.getId(),t);
    }
    return;
  }
  super.handleRequestInternal(request,response,sockJsSession);
}
