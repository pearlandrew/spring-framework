{
  ServletRequest servletRequest=webRequest.getNativeRequest(ServletRequest.class);
  MultipartHttpServletRequest multipartServletRequest=WebUtils.getNativeRequest(servletRequest,MultipartHttpServletRequest.class);
  if (multipartServletRequest == null) {
    throw new IllegalStateException("Current request is not of type " + MultipartRequest.class.getName());
  }
  String partName=getPartName(parameter);
  HttpInputMessage inputMessage=new RequestPartServletServerHttpRequest(multipartServletRequest,partName);
  Object arg=readWithMessageConverters(inputMessage,parameter,parameter.getParameterType());
  if (isValidationApplicable(arg,parameter)) {
    WebDataBinder binder=binderFactory.createBinder(webRequest,arg,partName);
    binder.validate();
    Errors errors=binder.getBindingResult();
    if (errors.hasErrors()) {
      throw new RequestPartNotValidException(errors);
    }
  }
  return arg;
}
