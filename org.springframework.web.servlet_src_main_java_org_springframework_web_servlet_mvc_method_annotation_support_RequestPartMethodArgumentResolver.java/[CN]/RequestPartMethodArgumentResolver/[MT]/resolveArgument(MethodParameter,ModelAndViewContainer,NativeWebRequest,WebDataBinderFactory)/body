{
  String partName=getPartName(parameter);
  Object arg;
  HttpServletRequest servletRequest=request.getNativeRequest(HttpServletRequest.class);
  MultipartHttpServletRequest multipartRequest=WebUtils.getNativeRequest(servletRequest,MultipartHttpServletRequest.class);
  if (MultipartFile.class.equals(parameter.getParameterType())) {
    assertMultipartRequest(multipartRequest,request);
    arg=multipartRequest.getFile(partName);
  }
 else   if (isMultipartFileCollection(parameter)) {
    assertMultipartRequest(multipartRequest,request);
    arg=multipartRequest.getFiles(partName);
  }
 else   if ("javax.servlet.http.Part".equals(parameter.getParameterType().getName())) {
    arg=servletRequest.getPart(partName);
  }
 else {
    HttpInputMessage inputMessage=new RequestPartServletServerHttpRequest(multipartRequest,partName);
    arg=readWithMessageConverters(inputMessage,parameter,parameter.getParameterType());
    if (isValidationApplicable(arg,parameter)) {
      WebDataBinder binder=binderFactory.createBinder(request,arg,partName);
      binder.validate();
      Errors errors=binder.getBindingResult();
      if (errors.hasErrors()) {
        throw new RequestPartNotValidException(errors);
      }
    }
  }
  if (arg == null) {
    handleMissingValue(partName,parameter);
  }
  return arg;
}
