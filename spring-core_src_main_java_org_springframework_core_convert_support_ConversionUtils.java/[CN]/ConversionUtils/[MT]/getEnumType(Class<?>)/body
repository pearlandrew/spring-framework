{
  Class<?> enumType=targetType;
  while (enumType != null && !enumType.isEnum()) {
    enumType=enumType.getSuperclass();
  }
  if (enumType == null) {
    throw new IllegalArgumentException("The target type " + targetType.getName() + " does not refer to an enum");
  }
  return enumType;
}
