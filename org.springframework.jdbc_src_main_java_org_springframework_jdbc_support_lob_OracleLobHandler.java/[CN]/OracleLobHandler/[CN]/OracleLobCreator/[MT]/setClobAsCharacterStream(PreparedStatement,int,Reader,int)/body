{
  if (characterStream != null) {
    Clob clob=(Clob)createLob(ps,true,new LobCallback(){
      public void populateLob(      Object lob) throws Exception {
        Method methodToInvoke=lob.getClass().getMethod("getCharacterOutputStream",(Class[])null);
        Writer writer=(Writer)methodToInvoke.invoke(lob,(Object[])null);
        FileCopyUtils.copy(characterStream,writer);
      }
    }
);
    ps.setClob(paramIndex,clob);
    if (logger.isDebugEnabled()) {
      logger.debug("Set character stream for Oracle CLOB with length " + clob.length());
    }
  }
 else {
    ps.setClob(paramIndex,(Clob)null);
    logger.debug("Set Oracle CLOB to null");
  }
}
