{
  if (logger.isTraceEnabled()) {
    logger.trace("Getting resource URL for lookupPath=" + lookupPath);
  }
  for (  String pattern : this.handlerMap.keySet()) {
    if (!getPathMatcher().match(pattern,lookupPath)) {
      continue;
    }
    String pathWithinMapping=getPathMatcher().extractPathWithinPattern(pattern,lookupPath);
    String pathMapping=lookupPath.substring(0,lookupPath.indexOf(pathWithinMapping));
    if (logger.isTraceEnabled()) {
      logger.trace("Invoking ResourceResolverChain for URL pattern=\"" + pattern + "\"");
    }
    ResourceHttpRequestHandler handler=this.handlerMap.get(pattern);
    ResourceResolverChain chain=new DefaultResourceResolverChain(handler.getResourceResolvers());
    String resolved=chain.resolveUrlPath(pathWithinMapping,handler.getLocations());
    if (resolved == null) {
      throw new IllegalStateException("Failed to get public resource URL path for " + pathWithinMapping);
    }
    if (logger.isTraceEnabled()) {
      logger.trace("Resolved public resource URL path=\"" + resolved + "\"");
    }
    return pathMapping + resolved;
  }
  logger.debug("No matching resource mapping");
  return null;
}
