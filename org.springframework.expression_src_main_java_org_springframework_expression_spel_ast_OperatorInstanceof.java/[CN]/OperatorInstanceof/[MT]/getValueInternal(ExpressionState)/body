{
  TypedValue left=getLeftOperand().getValueInternal(state);
  TypedValue right=getRightOperand().getValueInternal(state);
  Object leftValue=left.getValue();
  Object rightValue=right.getValue();
  if (leftValue == null) {
    return BooleanTypedValue.False;
  }
  if (rightValue == null || !(rightValue instanceof Class<?>)) {
    throw new SpelEvaluationException(getRightOperand().getStartPosition(),SpelMessage.INSTANCEOF_OPERATOR_NEEDS_CLASS_OPERAND,(rightValue == null ? "null" : rightValue.getClass().getName()));
  }
  Class<?> rightClass=(Class<?>)rightValue;
  return BooleanTypedValue.forValue(rightClass.isAssignableFrom(leftValue.getClass()));
}
