{
  MockHttpServletRequest request=new MockHttpServletRequest();
  MockHttpServletResponse response=new MockHttpServletResponse();
  response.setWriterAccessAllowed(false);
  AbstractXsltView view=new AbstractXsltView(){
    protected Map getParameters(    HttpServletRequest request){
      Map parameters=new HashMap();
      parameters.put("sex","Male");
      return parameters;
    }
  }
;
  view.setStylesheetLocation(new ClassPathResource("org/springframework/web/servlet/view/xslt/sunnyDay.xsl"));
  view.initApplicationContext();
  Hero hero=new Hero("Jet",24,"BOOM");
  Document document=DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
  Element node=document.createElement("hero");
  node.setAttribute("name",hero.getName());
  node.setAttribute("age",hero.getAge() + "");
  node.setAttribute("catchphrase",hero.getCatchphrase());
  view.render(new ModelAndView().addObject("hero",node).getModel(),request,response);
  String text=response.getContentAsString();
  assertEquals("<hero name=\"Jet\" age=\"24\" catchphrase=\"BOOM\" sex=\"Male\"/>",text.trim());
}
