{
  BytesMessage bytesMessageMock=createMock(BytesMessage.class);
  Object toBeMarshalled=new Object();
  expect(sessionMock.createBytesMessage()).andReturn(bytesMessageMock);
  bytesMessageMock.setStringProperty(JsonMessageConverter.DEFAULT_ENCODING_PROPERTY_NAME,"UTF-8");
  bytesMessageMock.setStringProperty(DefaultJavaTypeMapper.CLASSID_PROPERTY_NAME,Object.class.getName());
  bytesMessageMock.writeBytes(isA(byte[].class));
  replay(sessionMock,bytesMessageMock);
  converter.toMessage(toBeMarshalled,sessionMock);
  verify(sessionMock,bytesMessageMock);
}
