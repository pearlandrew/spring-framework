{
  if (obj instanceof Ordered) {
    return ((Ordered)obj).getOrder();
  }
  if (obj != null) {
    Class<?> clazz=(obj instanceof Class ? (Class)obj : obj.getClass());
    Order order=clazz.getAnnotation(Order.class);
    if (order != null) {
      return order.value();
    }
  }
  return Ordered.LOWEST_PRECEDENCE;
}
