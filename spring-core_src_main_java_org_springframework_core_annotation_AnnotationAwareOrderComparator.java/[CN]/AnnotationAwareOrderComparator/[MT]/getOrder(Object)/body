{
  if (obj instanceof Ordered) {
    return ((Ordered)obj).getOrder();
  }
  if (obj != null) {
    Order order=obj.getClass().getAnnotation(Order.class);
    if (order != null) {
      return order.value();
    }
  }
  return Ordered.LOWEST_PRECEDENCE;
}
