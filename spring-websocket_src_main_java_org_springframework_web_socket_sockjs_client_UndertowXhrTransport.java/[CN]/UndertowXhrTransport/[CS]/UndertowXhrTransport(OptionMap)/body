{
  Assert.notNull(optionMap,"OptionMap is required");
  this.optionMap=optionMap;
  this.httpClient=UndertowClient.getInstance();
  this.worker=Xnio.getInstance().createWorker(optionMap);
  if (undertow13Present) {
    this.undertowBufferSupport=new Undertow13BufferSupport();
  }
 else {
    this.undertowBufferSupport=new Undertow10BufferSupport();
  }
}
