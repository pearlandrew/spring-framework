{
  if (!this.mergeEnabled) {
    throw new IllegalStateException("Not allowed to merge when the 'mergeEnabled' property is set to 'false'");
  }
  if (parent == null) {
    return this;
  }
  if (!(parent instanceof Set)) {
    throw new IllegalArgumentException("Cannot merge with object of type [" + parent.getClass() + "]");
  }
  Set<E> merged=new ManagedSet<E>();
  merged.addAll((Set)parent);
  merged.addAll(this);
  return merged;
}
