{
  MediaType contentType=inputMessage.getHeaders().getContentType();
  if (contentType == null) {
    contentType=MediaType.APPLICATION_OCTET_STREAM;
  }
  Class<T> paramClass=(paramType instanceof Class) ? (Class)paramType : null;
  for (  HttpMessageConverter<?> messageConverter : this.messageConverters) {
    if (messageConverter instanceof GenericHttpMessageConverter) {
      GenericHttpMessageConverter genericMessageConverter=(GenericHttpMessageConverter)messageConverter;
      if (genericMessageConverter.canRead(paramType,contentType)) {
        if (logger.isDebugEnabled()) {
          logger.debug("Reading [" + paramType + "] as \""+ contentType+ "\" using ["+ messageConverter+ "]");
        }
        return (T)genericMessageConverter.read(paramType,inputMessage);
      }
    }
    if (paramClass != null) {
      if (messageConverter.canRead(paramClass,contentType)) {
        if (logger.isDebugEnabled()) {
          logger.debug("Reading [" + paramClass.getName() + "] as \""+ contentType+ "\" using ["+ messageConverter+ "]");
        }
        return ((HttpMessageConverter<T>)messageConverter).read(paramClass,inputMessage);
      }
    }
  }
  throw new HttpMediaTypeNotSupportedException(contentType,allSupportedMediaTypes);
}
