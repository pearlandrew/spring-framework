{
  super.afterPropertiesSet();
  if (isPubSubDomain()) {
    if (!(getConnectionFactory() instanceof TopicConnectionFactory)) {
      throw new IllegalArgumentException("Specified a Spring JMS 1.0.2 template for topics " + "but did not supply an instance of TopicConnectionFactory");
    }
  }
 else {
    if (!(getConnectionFactory() instanceof QueueConnectionFactory)) {
      throw new IllegalArgumentException("Specified a Spring JMS 1.0.2 template for queues " + "but did not supply an instance of QueueConnectionFactory");
    }
  }
}
