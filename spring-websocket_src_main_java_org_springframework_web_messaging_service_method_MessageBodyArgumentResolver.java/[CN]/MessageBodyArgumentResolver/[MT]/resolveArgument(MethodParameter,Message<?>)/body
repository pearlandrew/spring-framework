{
  Object arg=null;
  MessageBody annot=parameter.getParameterAnnotation(MessageBody.class);
  if (annot == null || annot.required()) {
    Class<?> sourceClass=message.getPayload().getClass();
    Class<?> targetClass=parameter.getParameterType();
    if (targetClass.isAssignableFrom(sourceClass)) {
      return message.getPayload();
    }
 else {
      return this.converter.fromMessage(message,targetClass);
    }
  }
  return arg;
}
