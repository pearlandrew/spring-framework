{
  String currentStatement=lineNumberReader.readLine();
  StringBuilder scriptBuilder=new StringBuilder();
  while (currentStatement != null) {
    if (StringUtils.hasText(currentStatement) && (commentPrefix != null && !currentStatement.startsWith(commentPrefix))) {
      if (scriptBuilder.length() > 0) {
        scriptBuilder.append('\n');
      }
      scriptBuilder.append(currentStatement);
    }
    currentStatement=lineNumberReader.readLine();
  }
  return scriptBuilder.toString();
}
