{
  Assert.isAssignable(HttpEntity.class,parameter.getParameterType());
  ParameterizedType type=(ParameterizedType)parameter.getGenericParameterType();
  if (type.getActualTypeArguments().length == 1) {
    Type typeArgument=type.getActualTypeArguments()[0];
    if (typeArgument instanceof Class) {
      return (Class<?>)typeArgument;
    }
 else     if (typeArgument instanceof GenericArrayType) {
      Type componentType=((GenericArrayType)typeArgument).getGenericComponentType();
      if (componentType instanceof Class) {
        return Array.newInstance((Class<?>)componentType,0).getClass();
      }
    }
 else     if (typeArgument instanceof ParameterizedType) {
      return typeArgument;
    }
  }
  throw new IllegalArgumentException("HttpEntity parameter (" + parameter.getParameterName() + ") "+ "in method "+ parameter.getMethod()+ "is not parameterized");
}
