{
  int nParams=method.getParameterTypes().length;
  String propertyName=propertyNameFor(method);
  Class<?> propertyType=method.getParameterTypes()[nParams - 1];
  PropertyDescriptor existingPD=findExistingPropertyDescriptor(propertyName,propertyType);
  if (nParams == 1) {
    if (existingPD == null) {
      this.propertyDescriptors.add(new SimpleNonIndexedPropertyDescriptor(propertyName,null,method));
    }
 else {
      existingPD.setWriteMethod(method);
    }
  }
 else   if (nParams == 2) {
    if (existingPD == null) {
      this.propertyDescriptors.add(new SimpleIndexedPropertyDescriptor(propertyName,null,null,null,method));
    }
 else     if (existingPD instanceof IndexedPropertyDescriptor) {
      ((IndexedPropertyDescriptor)existingPD).setIndexedWriteMethod(method);
    }
 else {
      this.propertyDescriptors.remove(existingPD);
      this.propertyDescriptors.add(new SimpleIndexedPropertyDescriptor(propertyName,existingPD.getReadMethod(),existingPD.getWriteMethod(),null,method));
    }
  }
 else {
    throw new IllegalArgumentException("write method must have exactly 1 or 2 parameters: " + method);
  }
}
