{
  final Object CONNECTION_FACTORY=new Object();
  ManagedConnectionFactory managedConnectionFactory=createMock(ManagedConnectionFactory.class);
  expect(managedConnectionFactory.createConnectionFactory()).andReturn(CONNECTION_FACTORY);
  replay(managedConnectionFactory);
  LocalConnectionFactoryBean factory=new LocalConnectionFactoryBean();
  factory.setManagedConnectionFactory(managedConnectionFactory);
  factory.afterPropertiesSet();
  assertEquals(CONNECTION_FACTORY,factory.getObject());
  verify(managedConnectionFactory);
}
