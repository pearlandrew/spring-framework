{
  for (Iterator iterator=attributes.entrySet().iterator(); iterator.hasNext(); ) {
    Map.Entry entry=(Map.Entry)iterator.next();
    if (entry.getKey() instanceof String && entry.getValue() instanceof Class) {
      getXStream().useAttributeFor((String)entry.getKey(),(Class)entry.getValue());
    }
 else     if (entry.getKey() instanceof Class && entry.getValue() instanceof String) {
      getXStream().useAttributeFor((Class)entry.getKey(),(String)entry.getValue());
    }
 else {
      throw new IllegalArgumentException("Invalid attribute key and value pair. " + "'useAttributesFor' property takes either a <String, Class> map or a <Class, String> map");
    }
  }
}
