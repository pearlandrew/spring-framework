{
  if (!CollectionUtils.isEmpty(queryParams)) {
    StringBuilder queryBuilder=new StringBuilder();
    for (Iterator<Entry<String,List<String>>> entryIterator=queryParams.entrySet().iterator(); entryIterator.hasNext(); ) {
      Entry<String,List<String>> entry=entryIterator.next();
      String name=entry.getKey();
      List<String> values=entry.getValue();
      if (CollectionUtils.isEmpty(values) || (values.size() == 1 && values.get(0) == null)) {
        queryBuilder.append(name);
      }
 else {
        for (Iterator<String> valueIterator=values.iterator(); valueIterator.hasNext(); ) {
          String value=valueIterator.next();
          queryBuilder.append(name);
          queryBuilder.append('=');
          queryBuilder.append(value);
          if (valueIterator.hasNext()) {
            queryBuilder.append('&');
          }
        }
      }
      if (entryIterator.hasNext()) {
        queryBuilder.append('&');
      }
    }
    setQuery(queryBuilder.toString());
  }
 else {
    setQuery(null);
  }
}
