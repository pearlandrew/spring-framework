{
  Assert.hasLength(encoding,"'encoding' must not be empty");
  if (encoded) {
    return this;
  }
  final Map<Type,String> encoded=new EnumMap<Type,String>(Type.class);
  for (  Entry<Type,String> entry : uriComponents.entrySet()) {
    Type key=entry.getKey();
    String value=entry.getValue();
    if (value != null) {
      value=encodeUriComponent(value,encoding,key);
    }
    encoded.put(key,value);
  }
  return new UriComponents(encoded,true);
}
