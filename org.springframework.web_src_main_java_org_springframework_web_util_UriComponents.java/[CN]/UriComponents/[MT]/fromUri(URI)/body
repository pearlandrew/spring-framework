{
  Assert.notNull(uri,"'uri' must not be null");
  Map<Type,String> uriComponents=new EnumMap<Type,String>(Type.class);
  if (uri.getScheme() != null) {
    uriComponents.put(Type.SCHEME,uri.getScheme());
  }
  if (uri.getRawAuthority() != null) {
    uriComponents.put(Type.AUTHORITY,uri.getRawAuthority());
  }
  if (uri.getRawUserInfo() != null) {
    uriComponents.put(Type.USER_INFO,uri.getRawUserInfo());
  }
  if (uri.getHost() != null) {
    uriComponents.put(Type.HOST,uri.getHost());
  }
  if (uri.getPort() != -1) {
    uriComponents.put(Type.PORT,Integer.toString(uri.getPort()));
  }
  if (uri.getRawPath() != null) {
    uriComponents.put(Type.PATH,uri.getRawPath());
  }
  if (uri.getRawQuery() != null) {
    uriComponents.put(Type.QUERY,uri.getRawQuery());
  }
  if (uri.getRawFragment() != null) {
    uriComponents.put(Type.FRAGMENT,uri.getRawFragment());
  }
  return new UriComponents(uriComponents,true);
}
