{
  if (!isAsyncDispatch(request)) {
    response=new ShallowEtagResponseWrapper(response);
  }
  filterChain.doFilter(request,response);
  if (!isAsyncStarted(request)) {
    updateResponse(request,response);
  }
}
