{
  if (this.engine != null && this.engineName != null) {
    throw new IllegalStateException("You should define engine or engineName properties, not both.");
  }
  if (this.engineName != null) {
    ScriptEngine scriptEngine=new ScriptEngineManager().getEngineByName(this.engineName);
    Assert.state(scriptEngine != null,"No engine \"" + this.engineName + "\" found.");
    Assert.state(scriptEngine instanceof Invocable,"Script engine should be instance of Invocable");
    this.engine=scriptEngine;
  }
  Assert.state(this.engine != null,"No script engine found, please specify valid engine or engineName properties.");
  return this.engine;
}
