{
  if (this.engine == null) {
    this.engine=createScriptEngine();
  }
  Assert.state(this.renderFunction != null,"renderFunction property must be defined.");
  this.resourceLoader=new DefaultResourceLoader(createClassLoader());
  if (this.scripts != null) {
    try {
      for (      String script : this.scripts) {
        this.engine.eval(read(script));
      }
    }
 catch (    ScriptException e) {
      throw new IllegalStateException("could not load script",e);
    }
  }
}
