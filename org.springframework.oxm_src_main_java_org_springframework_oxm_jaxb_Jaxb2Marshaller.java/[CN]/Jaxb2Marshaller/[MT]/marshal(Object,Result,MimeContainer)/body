{
  try {
    Marshaller marshaller=createMarshaller();
    if (mtomEnabled && mimeContainer != null) {
      marshaller.setAttachmentMarshaller(new Jaxb2AttachmentMarshaller(mimeContainer));
    }
    if (StaxUtils.isStaxResult(result)) {
      marshalStaxResult(marshaller,graph,result);
    }
 else {
      marshaller.marshal(graph,result);
    }
  }
 catch (  JAXBException ex) {
    throw convertJaxbException(ex);
  }
}
