{
  if (this.store.containsKey(key)) {
    return (T)get(key).get();
  }
 else {
synchronized (this.store) {
      if (this.store.containsKey(key)) {
        return (T)get(key).get();
      }
      T value;
      try {
        value=valueLoader.call();
      }
 catch (      Exception ex) {
        throw new ValueRetrievalException(key,valueLoader,ex);
      }
      put(key,value);
      return value;
    }
  }
}
