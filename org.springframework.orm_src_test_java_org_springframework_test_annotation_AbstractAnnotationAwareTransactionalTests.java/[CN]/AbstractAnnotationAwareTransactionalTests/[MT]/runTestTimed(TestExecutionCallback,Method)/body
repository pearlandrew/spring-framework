{
  Timed timed=testMethod.getAnnotation(Timed.class);
  if (timed == null) {
    runTest(tec,testMethod);
  }
 else {
    long startTime=System.currentTimeMillis();
    try {
      runTest(tec,testMethod);
    }
  finally {
      long elapsed=System.currentTimeMillis() - startTime;
      if (elapsed > timed.millis()) {
        fail("Took " + elapsed + " ms; limit was "+ timed.millis());
      }
    }
  }
}
