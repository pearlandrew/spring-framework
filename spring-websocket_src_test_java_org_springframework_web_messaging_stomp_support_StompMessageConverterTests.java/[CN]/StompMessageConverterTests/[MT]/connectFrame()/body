{
  String accept="accept-version:1.1\n";
  String host="host:github.org\n";
  String frame="\n\n\nCONNECT\n" + accept + host+ "\n";
  Message<byte[]> message=this.converter.toMessage(frame.getBytes("UTF-8"),"session-123");
  assertEquals(0,message.getPayload().length);
  MessageHeaders messageHeaders=message.getHeaders();
  StompHeaders stompHeaders=new StompHeaders(messageHeaders,true);
  assertEquals(6,stompHeaders.getMessageHeaders().size());
  assertEquals(MessageType.CONNECT,stompHeaders.getMessageType());
  assertEquals(StompCommand.CONNECT,stompHeaders.getStompCommand());
  assertEquals("session-123",stompHeaders.getSessionId());
  assertNotNull(messageHeaders.get(MessageHeaders.ID));
  assertNotNull(messageHeaders.get(MessageHeaders.TIMESTAMP));
  assertEquals(Collections.singleton("1.1"),stompHeaders.getAcceptVersion());
  assertEquals("github.org",stompHeaders.getRawHeaders().get("host"));
  String convertedBack=new String(this.converter.fromMessage(message),"UTF-8");
  assertEquals("CONNECT\n",convertedBack.substring(0,8));
  assertTrue(convertedBack.contains(accept));
  assertTrue(convertedBack.contains(host));
}
