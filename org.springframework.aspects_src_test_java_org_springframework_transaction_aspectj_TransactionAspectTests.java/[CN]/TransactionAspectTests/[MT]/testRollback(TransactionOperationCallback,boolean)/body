{
  txManager.clear();
  assertEquals(0,txManager.begun);
  try {
    toc.performTransactionalOperation();
    assertEquals(1,txManager.commits);
  }
 catch (  Throwable caught) {
    if (caught instanceof AssertionFailedError) {
      return;
    }
  }
  if (rollback) {
    assertEquals(1,txManager.rollbacks);
  }
  assertEquals(1,txManager.begun);
}
