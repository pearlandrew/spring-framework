{
  Set<ProduceMediaTypeExpression> result=new LinkedHashSet<ProduceMediaTypeExpression>();
  if (headers != null) {
    for (    String header : headers) {
      HeaderExpression expr=new HeaderExpression(header);
      if ("Accept".equalsIgnoreCase(expr.name)) {
        for (        MediaType mediaType : MediaType.parseMediaTypes(expr.value)) {
          result.add(new ProduceMediaTypeExpression(mediaType,expr.isNegated));
        }
      }
    }
  }
  if (produces != null) {
    for (    String produce : produces) {
      result.add(new ProduceMediaTypeExpression(produce));
    }
  }
  return result;
}
