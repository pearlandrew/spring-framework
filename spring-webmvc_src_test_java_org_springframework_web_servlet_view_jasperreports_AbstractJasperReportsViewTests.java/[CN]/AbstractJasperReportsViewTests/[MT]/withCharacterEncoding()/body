{
  AbstractJasperReportsView view=getView(COMPILED_REPORT);
  assumeTrue(view instanceof AbstractJasperReportsSingleFormatView && ((AbstractJasperReportsSingleFormatView)view).useWriter());
  String characterEncoding="UTF-8";
  Map<Object,Object> parameters=new HashMap<Object,Object>();
  parameters.put(net.sf.jasperreports.engine.JRExporterParameter.CHARACTER_ENCODING,characterEncoding);
  view.setExporterParameters(parameters);
  view.convertExporterParameters();
  view.render(getModel(),this.request,this.response);
  assertEquals(characterEncoding,this.response.getCharacterEncoding());
}
