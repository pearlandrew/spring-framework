{
  if (MediaType.APPLICATION_FORM_URLENCODED.equals(request.getHeaders().getContentType())) {
    if (request.getQueryParams().getFirst("d") == null) {
      sendInternalServerError(response,"Payload expected.",sockJsSession.getId());
      return;
    }
  }
  super.handleRequestInternal(request,response,sockJsSession);
  try {
    response.getBody().write("ok".getBytes("UTF-8"));
  }
 catch (  Throwable t) {
    throw new TransportErrorException("Failed to write response body",t,sockJsSession.getId());
  }
}
