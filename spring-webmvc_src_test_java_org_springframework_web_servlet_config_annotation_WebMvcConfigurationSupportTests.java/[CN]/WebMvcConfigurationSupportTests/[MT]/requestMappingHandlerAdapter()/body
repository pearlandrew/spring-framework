{
  ApplicationContext context=initContext(WebConfig.class);
  RequestMappingHandlerAdapter adapter=context.getBean(RequestMappingHandlerAdapter.class);
  assertEquals(9,adapter.getMessageConverters().size());
  ConfigurableWebBindingInitializer initializer=(ConfigurableWebBindingInitializer)adapter.getWebBindingInitializer();
  assertNotNull(initializer);
  ConversionService conversionService=initializer.getConversionService();
  assertNotNull(conversionService);
  assertTrue(conversionService instanceof FormattingConversionService);
  Validator validator=initializer.getValidator();
  assertNotNull(validator);
  assertTrue(validator instanceof LocalValidatorFactoryBean);
  DirectFieldAccessor fieldAccessor=new DirectFieldAccessor(adapter);
  List<Object> interceptors=(List<Object>)fieldAccessor.getPropertyValue("responseBodyAdvice");
  assertEquals(1,interceptors.size());
  assertEquals(JsonViewResponseBodyAdvice.class,interceptors.get(0).getClass());
}
