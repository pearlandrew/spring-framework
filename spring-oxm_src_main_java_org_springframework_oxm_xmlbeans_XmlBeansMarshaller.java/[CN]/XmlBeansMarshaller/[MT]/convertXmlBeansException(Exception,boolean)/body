{
  if (ex instanceof XMLStreamValidationException) {
    return new ValidationFailureException("XMLBeans validation exception",ex);
  }
 else   if (ex instanceof XmlException || ex instanceof SAXException) {
    if (marshalling) {
      return new MarshallingFailureException("XMLBeans marshalling exception",ex);
    }
 else {
      return new UnmarshallingFailureException("XMLBeans unmarshalling exception",ex);
    }
  }
 else {
    return new UncategorizedMappingException("Unknown XMLBeans exception",ex);
  }
}
