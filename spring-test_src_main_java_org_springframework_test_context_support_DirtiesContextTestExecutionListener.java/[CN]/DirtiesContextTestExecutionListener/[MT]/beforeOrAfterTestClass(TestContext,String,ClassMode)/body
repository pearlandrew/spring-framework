{
  Class<?> testClass=testContext.getTestClass();
  Assert.notNull(testClass,"The test class of the supplied TestContext must not be null");
  DirtiesContext dirtiesContext=AnnotatedElementUtils.findAnnotation(testClass,DirtiesContext.class);
  boolean classAnnotated=(dirtiesContext != null);
  ClassMode classMode=(classAnnotated ? dirtiesContext.classMode() : null);
  if (logger.isDebugEnabled()) {
    logger.debug(String.format("%s test class: context %s, class annotated with @DirtiesContext [%s] with mode [%s].",phase,testContext,classAnnotated,classMode));
  }
  if (classMode == requiredClassMode) {
    dirtyContext(testContext,dirtiesContext.hierarchyMode());
  }
}
