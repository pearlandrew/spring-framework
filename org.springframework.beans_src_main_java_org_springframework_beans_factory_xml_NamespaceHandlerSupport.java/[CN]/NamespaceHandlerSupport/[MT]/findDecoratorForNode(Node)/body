{
  BeanDefinitionDecorator decorator=null;
  if (node instanceof Element) {
    decorator=(BeanDefinitionDecorator)this.decorators.get(node.getLocalName());
  }
 else   if (node instanceof Attr) {
    decorator=(BeanDefinitionDecorator)this.attributeDecorators.get(node.getLocalName());
  }
 else {
    throw new IllegalStateException("Cannot decorate based on Nodes of type [" + node.getClass().getName() + "]");
  }
  if (decorator == null) {
    throw new IllegalStateException("Cannot locate BeanDefinitionDecorator for " + (node instanceof Element ? "element" : "attribute") + " ["+ node.getLocalName()+ "]");
  }
  return decorator;
}
