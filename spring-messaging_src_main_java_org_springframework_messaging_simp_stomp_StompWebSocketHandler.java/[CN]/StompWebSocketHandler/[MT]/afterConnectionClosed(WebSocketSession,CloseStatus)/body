{
  String sessionId=session.getId();
  this.sessions.remove(sessionId);
  if ((this.userSessionStore != null) && (session.getPrincipal() != null)) {
    this.userSessionStore.deleteUserSessionId(session.getPrincipal().getName(),sessionId);
  }
  StompHeaderAccessor headers=StompHeaderAccessor.create(StompCommand.DISCONNECT);
  headers.setSessionId(sessionId);
  Message<?> message=MessageBuilder.withPayload(new byte[0]).copyHeaders(headers.toMap()).build();
  this.clientInputChannel.send(message);
}
