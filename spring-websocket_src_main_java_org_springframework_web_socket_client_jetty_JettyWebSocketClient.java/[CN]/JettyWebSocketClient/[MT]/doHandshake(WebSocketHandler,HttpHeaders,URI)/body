{
  Assert.notNull(webSocketHandler,"webSocketHandler is required");
  Assert.notNull(uri,"uri is required");
  if (logger.isDebugEnabled()) {
    logger.debug("Connecting to " + uri);
  }
  JettyWebSocketSessionAdapter session=new JettyWebSocketSessionAdapter();
  session.setUri(uri);
  session.setRemoteHostName(uri.getHost());
  JettyWebSocketListenerAdapter listener=new JettyWebSocketListenerAdapter(webSocketHandler,session);
  try {
    this.client.connect(listener,uri).get();
    return session;
  }
 catch (  Exception e) {
    throw new WebSocketConnectFailureException("Failed to connect to " + uri,e);
  }
}
