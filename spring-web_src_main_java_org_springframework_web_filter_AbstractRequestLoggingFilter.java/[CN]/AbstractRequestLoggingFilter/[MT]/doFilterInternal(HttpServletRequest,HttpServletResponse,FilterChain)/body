{
  if (isIncludePayload()) {
    request=new RequestCachingRequestWrapper(request);
  }
  beforeRequest(request,getBeforeMessage(request));
  try {
    filterChain.doFilter(request,response);
  }
  finally {
    afterRequest(request,getAfterMessage(request));
  }
}
