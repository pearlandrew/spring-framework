{
  Mockito.<Class<?>>when(testContext.getTestClass()).thenReturn(clazz);
  Invocable instance=clazz.newInstance();
  when(testContext.getTestInstance()).thenReturn(instance);
  when(testContext.getTestMethod()).thenReturn(clazz.getDeclaredMethod("transactionalTest"));
  when(tm.getTransaction(Mockito.any(TransactionDefinition.class))).thenReturn(new SimpleTransactionStatus());
  assertFalse(instance.invoked);
  listener.beforeTestMethod(testContext);
  listener.afterTestMethod(testContext);
  assertTrue(instance.invoked);
}
