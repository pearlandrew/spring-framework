{
  Object session=externalContext.getSession(false);
  if (session instanceof PortletSession) {
    return StringUtils.toStringArray(((PortletSession)session).getAttributeNames(PortletSession.APPLICATION_SCOPE));
  }
 else   if (session != null) {
    return StringUtils.toStringArray(externalContext.getSessionMap().keySet());
  }
 else {
    return new String[0];
  }
}
