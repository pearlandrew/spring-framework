{
  Object session=externalContext.getSession(false);
  if (session instanceof PortletSession) {
    return ((PortletSession)session).getAttribute(name,PortletSession.APPLICATION_SCOPE);
  }
 else   if (session != null) {
    return externalContext.getSessionMap().get(name);
  }
 else {
    return null;
  }
}
