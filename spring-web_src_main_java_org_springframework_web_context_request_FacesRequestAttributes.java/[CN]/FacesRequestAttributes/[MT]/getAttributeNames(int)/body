{
  if (scope == SCOPE_GLOBAL_SESSION && portletApiPresent) {
    return PortletSessionAccessor.getAttributeNames(getExternalContext());
  }
 else {
    return StringUtils.toStringArray(getAttributeMap(scope).keySet());
  }
}
