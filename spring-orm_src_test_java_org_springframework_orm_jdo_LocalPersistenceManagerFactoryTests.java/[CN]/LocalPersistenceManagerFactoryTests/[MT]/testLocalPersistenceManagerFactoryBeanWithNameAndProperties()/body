{
  LocalPersistenceManagerFactoryBean pmfb=new LocalPersistenceManagerFactoryBean(){
    @Override protected PersistenceManagerFactory newPersistenceManagerFactory(    String name){
      throw new IllegalArgumentException(name);
    }
  }
;
  pmfb.setPersistenceManagerFactoryName("myName");
  pmfb.getJdoPropertyMap().put("myKey","myValue");
  try {
    pmfb.afterPropertiesSet();
    fail("Should have thrown IllegalStateException");
  }
 catch (  IllegalStateException ex) {
    assertTrue(ex.getMessage().indexOf("persistenceManagerFactoryName") != -1);
    assertTrue(ex.getMessage().indexOf("jdoProp") != -1);
  }
}
