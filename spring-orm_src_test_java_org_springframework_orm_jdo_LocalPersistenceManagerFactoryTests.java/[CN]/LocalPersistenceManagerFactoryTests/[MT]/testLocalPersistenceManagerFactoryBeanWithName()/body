{
  LocalPersistenceManagerFactoryBean pmfb=new LocalPersistenceManagerFactoryBean(){
    @Override protected PersistenceManagerFactory newPersistenceManagerFactory(    String name){
      throw new IllegalArgumentException(name);
    }
  }
;
  pmfb.setPersistenceManagerFactoryName("myName");
  try {
    pmfb.afterPropertiesSet();
    fail("Should have thrown IllegalArgumentException");
  }
 catch (  IllegalArgumentException ex) {
    assertTrue("Correct exception","myName".equals(ex.getMessage()));
  }
}
