{
  LocalPersistenceManagerFactoryBean pmfb=new LocalPersistenceManagerFactoryBean(){
    @Override protected PersistenceManagerFactory newPersistenceManagerFactory(    Map props){
      throw new IllegalArgumentException((String)props.get("myKey"));
    }
  }
;
  Properties props=new Properties();
  props.setProperty("myKey","myValue");
  pmfb.setJdoProperties(props);
  try {
    pmfb.afterPropertiesSet();
    fail("Should have thrown IllegalArgumentException");
  }
 catch (  IllegalArgumentException ex) {
    assertTrue("Correct exception","myValue".equals(ex.getMessage()));
  }
}
