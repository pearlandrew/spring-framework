{
  LocalPersistenceManagerFactoryBean pmfb=new LocalPersistenceManagerFactoryBean(){
    protected PersistenceManagerFactory newPersistenceManagerFactory(    Map props){
      throw new IllegalArgumentException((String)props.get("myKey"));
    }
  }
;
  pmfb.setConfigLocation(new ClassPathResource("test.properties",getClass()));
  try {
    pmfb.afterPropertiesSet();
    fail("Should have thrown IllegalArgumentException");
  }
 catch (  IllegalArgumentException ex) {
    assertTrue("Correct exception","myValue".equals(ex.getMessage()));
  }
}
