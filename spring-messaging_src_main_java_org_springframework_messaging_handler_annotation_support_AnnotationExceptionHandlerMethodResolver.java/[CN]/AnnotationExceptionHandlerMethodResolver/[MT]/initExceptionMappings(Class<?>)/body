{
  Map<Class<? extends Throwable>,Method> result=new HashMap<Class<? extends Throwable>,Method>();
  for (  Method method : HandlerMethodSelector.selectMethods(handlerType,EXCEPTION_HANDLER_METHOD_FILTER)) {
    for (    Class<? extends Throwable> exceptionType : getMappedExceptions(method)) {
      Method oldMethod=result.put(exceptionType,method);
      if (oldMethod != null && !oldMethod.equals(method)) {
        throw new IllegalStateException("Ambiguous @ExceptionHandler method mapped for [" + exceptionType + "]: {"+ oldMethod+ ", "+ method+ "}.");
      }
    }
  }
  return result;
}
