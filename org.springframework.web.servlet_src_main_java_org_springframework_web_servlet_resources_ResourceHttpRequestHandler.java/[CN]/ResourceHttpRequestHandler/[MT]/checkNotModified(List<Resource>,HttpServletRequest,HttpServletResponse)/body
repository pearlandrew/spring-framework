{
  long lastModifiedTimestamp=-1;
  long ifModifiedSince=request.getDateHeader("If-Modified-Since");
  for (  Resource resource : resources) {
    long resourceLastModified=resource.lastModified();
    if (resourceLastModified > lastModifiedTimestamp) {
      lastModifiedTimestamp=resourceLastModified;
    }
  }
  boolean notModified=ifModifiedSince >= (lastModifiedTimestamp / 1000 * 1000);
  if (notModified) {
    response.setStatus(HttpServletResponse.SC_NOT_MODIFIED);
  }
 else {
    response.setDateHeader("Last-Modified",lastModifiedTimestamp);
  }
  return notModified;
}
