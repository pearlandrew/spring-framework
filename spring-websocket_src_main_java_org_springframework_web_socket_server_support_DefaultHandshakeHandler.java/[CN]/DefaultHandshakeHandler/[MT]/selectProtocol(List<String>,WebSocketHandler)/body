{
  if (requestedProtocols != null) {
    List<String> handlerProtocols=determineHandlerSupportedProtocols(webSocketHandler);
    if (logger.isDebugEnabled()) {
      logger.debug("Requested sub-protocol(s): " + requestedProtocols + ", WebSocketHandler supported sub-protocol(s): "+ handlerProtocols+ ", configured sub-protocol(s): "+ this.supportedProtocols);
    }
    for (    String protocol : requestedProtocols) {
      if (handlerProtocols.contains(protocol.toLowerCase())) {
        return protocol;
      }
      if (this.supportedProtocols.contains(protocol.toLowerCase())) {
        return protocol;
      }
    }
  }
  return null;
}
