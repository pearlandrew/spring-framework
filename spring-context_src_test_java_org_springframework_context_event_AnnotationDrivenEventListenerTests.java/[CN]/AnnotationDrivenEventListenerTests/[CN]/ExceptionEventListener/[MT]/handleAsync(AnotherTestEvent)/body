{
  collectEvent(event);
  if ("fail".equals(event.msg)) {
    countDownLatch.countDown();
    throw new IllegalStateException("Test exception");
  }
}
