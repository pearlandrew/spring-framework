{
  this.session=this.request.getSession(false);
synchronized (this.sessionAttributesToUpdate) {
    if (this.session != null) {
      try {
        for (        Map.Entry<String,Object> entry : this.sessionAttributesToUpdate.entrySet()) {
          String name=entry.getKey();
          Object newValue=entry.getValue();
          Object oldValue=this.session.getAttribute(name);
          if (oldValue == newValue) {
            this.session.setAttribute(name,newValue);
          }
        }
      }
 catch (      IllegalStateException ex) {
      }
    }
    this.sessionAttributesToUpdate.clear();
  }
}
