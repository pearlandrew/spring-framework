{
  GenericXmlApplicationContext context=new GenericXmlApplicationContext();
  context.load(new ClassPathResource("taskNamespaceTests.xml",getClass()));
  context.refresh();
  ITestBean testBean=(ITestBean)context.getBean("target");
  testBean.test();
  testBean.await(3000);
  Thread asyncThread=testBean.getThread();
  assertTrue(asyncThread.getName().startsWith("testExecutor"));
  TestableAsyncUncaughtExceptionHandler exceptionHandler=(TestableAsyncUncaughtExceptionHandler)context.getBean("exceptionHandler");
  assertFalse("handler should not have been called yet",exceptionHandler.isCalled());
  testBean.failWithVoid();
  exceptionHandler.await(3000);
  Method m=ReflectionUtils.findMethod(TestBean.class,"failWithVoid");
  exceptionHandler.assertCalledWith(m,UnsupportedOperationException.class);
  context.close();
}
