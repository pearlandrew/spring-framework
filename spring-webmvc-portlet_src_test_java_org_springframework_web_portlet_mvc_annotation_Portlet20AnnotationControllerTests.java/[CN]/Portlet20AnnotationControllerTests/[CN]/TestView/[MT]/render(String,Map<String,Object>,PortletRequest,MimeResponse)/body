{
  TestBean tb=(TestBean)model.get("testBean");
  if (tb == null) {
    tb=(TestBean)model.get("myCommand");
  }
  if (tb.getName().endsWith("myDefaultName")) {
    assertEquals(107,tb.getDate().getYear());
  }
  Errors errors=(Errors)model.get(BindingResult.MODEL_KEY_PREFIX + "testBean");
  if (errors == null) {
    errors=(Errors)model.get(BindingResult.MODEL_KEY_PREFIX + "myCommand");
  }
  if (errors.hasFieldErrors("date")) {
    throw new IllegalStateException();
  }
  List<?> testBeans=(List<?>)model.get("testBeanList");
  response.getWriter().write(viewName + "-" + tb.getName()+ "-"+ errors.getFieldError("age").getCode()+ "-"+ ((TestBean)testBeans.get(0)).getName()+ "-"+ model.get("myKey"));
}
