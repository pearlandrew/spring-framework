{
  if (this.redirectedUrl != null) {
    throw new IllegalStateException("Cannot set WindowState after sendRedirect has been called");
  }
  if (!CollectionUtils.contains(getPortalContext().getSupportedWindowStates(),windowState)) {
    throw new WindowStateException("WindowState not supported",windowState);
  }
  this.windowState=windowState;
}
