{
  if (this.redirectedUrl != null) {
    throw new IllegalStateException("Cannot set PortletMode after sendRedirect has been called");
  }
  if (!CollectionUtils.contains(getPortalContext().getSupportedPortletModes(),portletMode)) {
    throw new PortletModeException("PortletMode not supported",portletMode);
  }
  this.portletMode=portletMode;
}
