{
  if (expression.isCompilable()) {
    if (logger.isDebugEnabled()) {
      logger.debug("SpEL: compiling " + expression.toStringAST());
    }
    Class<? extends CompiledExpression> clazz=createExpressionClass(expression);
    try {
      return clazz.newInstance();
    }
 catch (    Exception ex) {
      throw new IllegalStateException("Failed to instantiate CompiledExpression",ex);
    }
  }
 else {
    if (logger.isDebugEnabled()) {
      logger.debug("SpEL: unable to compile " + expression.toStringAST());
    }
  }
  return null;
}
