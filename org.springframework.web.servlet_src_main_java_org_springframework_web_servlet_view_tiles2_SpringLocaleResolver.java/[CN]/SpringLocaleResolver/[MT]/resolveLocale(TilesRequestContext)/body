{
  if (context instanceof JspTilesRequestContext) {
    PageContext pc=((JspTilesRequestContext)context).getPageContext();
    return RequestContextUtils.getLocale((HttpServletRequest)pc.getRequest());
  }
 else   if (context instanceof ServletTilesRequestContext) {
    HttpServletRequest request=((ServletTilesRequestContext)context).getRequest();
    if (request != null) {
      return RequestContextUtils.getLocale(request);
    }
  }
  return super.resolveLocale(context);
}
