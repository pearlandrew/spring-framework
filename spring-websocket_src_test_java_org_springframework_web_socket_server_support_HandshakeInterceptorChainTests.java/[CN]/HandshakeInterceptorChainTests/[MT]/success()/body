{
  when(i1.beforeHandshake(request,response,wsHandler,attributes)).thenReturn(true);
  when(i2.beforeHandshake(request,response,wsHandler,attributes)).thenReturn(true);
  when(i3.beforeHandshake(request,response,wsHandler,attributes)).thenReturn(true);
  HandshakeInterceptorChain chain=new HandshakeInterceptorChain(interceptors,wsHandler);
  chain.applyBeforeHandshake(request,response,attributes);
  verify(i1).beforeHandshake(request,response,wsHandler,attributes);
  verify(i2).beforeHandshake(request,response,wsHandler,attributes);
  verify(i3).beforeHandshake(request,response,wsHandler,attributes);
  verifyNoMoreInteractions(i1,i2,i3);
}
