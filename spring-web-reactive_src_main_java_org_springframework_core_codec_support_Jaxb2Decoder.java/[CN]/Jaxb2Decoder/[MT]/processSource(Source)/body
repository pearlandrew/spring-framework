{
  if (source instanceof StreamSource) {
    StreamSource streamSource=(StreamSource)source;
    InputSource inputSource=new InputSource(streamSource.getInputStream());
    try {
      XMLReader xmlReader=XMLReaderFactory.createXMLReader();
      return new SAXSource(xmlReader,inputSource);
    }
 catch (    SAXException ex) {
      throw new CodecException("Error while processing the source",ex);
    }
  }
 else {
    return source;
  }
}
